var legumes=(()=>{var Je=Object.defineProperty;var gt=Object.prototype.hasOwnProperty;var Ae=Object.getOwnPropertySymbols,Zt=Object.prototype.propertyIsEnumerable;var ve=(e,_,n)=>_ in e?Je(e,_,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[_]=n,ue=(e,_)=>{for(var n in _||(_={}))gt.call(_,n)&&ve(e,n,_[n]);if(Ae)for(var n of Ae(_))Zt.call(_,n)&&ve(e,n,_[n]);return e};var Ut=(e,_)=>{for(var n in _)Je(e,n,{get:_[n],enumerable:!0})};var rn={};Ut(rn,{ACCIDENTAL:()=>y,ARTICULATION:()=>G,BARLINE:()=>K,BRACKET:()=>te,CLEF:()=>q,CONFIG:()=>N,CUE:()=>ee,NOTE_LENGTH:()=>J,compile_score:()=>cn,export_animated_svg:()=>ot,export_gif:()=>Mt,export_midi:()=>Lt,export_mock_svg:()=>et,export_pdf:()=>ut,export_sketch_svg:()=>mt,export_svg:()=>at,export_txt:()=>St,parse_midi:()=>Ot,parse_txt:()=>ht,playhead_coords:()=>Pt,register_font:()=>ze,render_score:()=>Xn,round_polylines:()=>_t,score_from_midi:()=>Be,score_to_midi:()=>$e});var J={WHOLE:64,HALF:32,QUARTER:16,EIGHTH:8,SIXTEENTH:4,THIRTYSECOND:2,SIXTYFOURTH:1},y={SHARP:1,NATURAL:0,FLAT:-1},q={TREBLE:0,BASS:1},_e={[y.SHARP]:"FCGDAEB",[y.FLAT]:"BEADGCF",[y.NATURAL]:""},G={STACCATO:11,SPICCATO:12,TENUTO:13,FERMATA:14,ACCENT:15,MARCATO:16,TREMBLEMENT:17,TRILL:18,MORDENT:19,TURN:20,UP_BOW:21,FLAGEOLET:22,ARPEGGIATED:23,MORDENT_INV:-19,TURN_INV:-20},ee={PEDAL_ON:"ped",PEDAL_OFF:"*",PIANISSISSIMO:"ppp",PIANISSIMO:"pp",PIANO:"p",MEZZO_PIANO:"mp",MEZZO_FORTE:"mf",FORTE:"f",FORTISSIMO:"ff",FORTISSISSIMO:"fff",SFORZANDO:"sfz"},K={NONE:0,SINGLE:1,DOUBLE:2,END:3,REPEAT_BEGIN:4,REPEAT_END:5,REPEAT_END_BEGIN:6},te={NONE:0,BRACE:1,BRACKET:2};function Me(e,_){let n=e[0],t=Number(e.split("_")[1]);return(_==q.TREBLE?6*7+3:5*7-2)-("CDEFGAB".indexOf(n)+t*7)}function we(e){return[y.FLAT,y.NATURAL,y.SHARP]["b_s".indexOf(e[1])]}function De(e,_){return Array.from(new Set(e.map(n=>n.voice))).filter(n=>_.includes(n)||!_.length)}function Te(){return"_"+String.fromCharCode(...new Array(6).fill(0).map(e=>~~(Math.random()*26)+65))}function be(e){let _={};for(let t of e)_[t.voice]||(_[t.voice]=[]),_[t.voice].push(t.staff_pos);let n={};for(let t in _){_[t].sort((a,l)=>a-l);let R=~~(_[t].length/2);_[t].length%2?n[t]=_[t][R]:n[t]=(_[t][R-1]+_[t][R])/2}return n}function he(e,_){let n=1,t=new Array(e.notes.length),R={};for(let a=0;a<e.notes.length;a++){let l=e.notes[a],r=0,s=[],i=l.stem_dir,f=l.duration;l.tuplet&&(f=l.tuplet.display_duration);for(let u=0;u<e.notes.length;u++){let o=l,m=e.notes[u];o.voice==m.voice&&o.begin==m.begin&&o.duration==m.duration&&s.push([u,m])}s.sort((u,o)=>i*(u[1].staff_pos-o[1].staff_pos));let M=s.findIndex(u=>u[0]==a);if(s[M-1]&&(l.prev_in_chord=s[M-1][0]),s[M+1])l.next_in_chord=s[M+1][0];else if(f<J.QUARTER){let u=!1;for(let o=0;o<a;o++){let U=function(){for(let L=0;L<a;L++)if(e.notes[L].voice==e.notes[a].voice&&e.notes[o].begin<e.notes[L].begin&&e.notes[L].begin<e.notes[a].begin){S=!1;break}if(S){for(let L=0;L<e.rests.length;L++)if(e.rests[L].voice==e.notes[a].voice&&e.notes[o].begin<e.rests[L].begin&&e.rests[L].begin<e.notes[a].begin){S=!1;break}}if(S){for(let L=e.notes[o].begin+e.notes[o].duration;L<=e.notes[a].begin;L++)if(e.grace[L]){S=!1;break}}},m=e.notes[a],F=e.notes[o],h=t[o],S=!0;if(F.voice==m.voice&&F.next_in_chord==null)if(m.tuplet&&F.tuplet&&m.tuplet.id==F.tuplet.id){if(U(),S){r=t[o],u=!0;break}}else{if(m.tuplet||F.tuplet)continue;{U();let L=i==e.notes[o].stem_dir,W=~~(F.begin/_)==~~(m.begin/_);if(h!=0&&S&&L&&W){r=t[o],u=!0;break}}}}u||(r=n,n++)}t[a]=r}for(let a=0;a<e.voices;a++)R[a]={};for(let a=1;a<n;a++){let l=t.map((r,s)=>[r,s]).filter(r=>r[0]==a).map(r=>r[1]);l.length>1&&(R[e.notes[l[0]].voice][a]=[])}for(let a=0;a<e.notes.length;a++){let l=R[e.notes[a].voice][t[a]];t[a]>0&&!l||l&&R[e.notes[a].voice][t[a]].push(a)}for(let a in R)for(let l in R[a])e.beams.push(R[a][l])}var Yt=2,B={WHOLE:32,HALF:16,QUARTER:8,EIGHTH:4,SIXTEENTH:2,THIRTYSECOND:1},Se=2,ae=1.5,C={Ab_0:8,Ab_1:20,Ab_2:32,Ab_3:44,Ab_4:56,Ab_5:68,Ab_6:80,Ab_7:92,Ab_8:104,Ab_9:116,F_3:41,Ds_8:99,Ds_9:111,F_8:101,F_9:113,Gs_3:44,Gs_2:32,Gs_1:20,Gs_0:8,Gs_7:92,Gs_6:80,Gs_5:68,Gs_4:56,G_10:127,Gs_9:116,Gs_8:104,E_3:40,E_2:28,E_1:16,E_0:4,E_7:88,E_6:76,E_5:64,E_4:52,E_9:112,E_8:100,As_9:118,As_8:106,Ds_0:3,Ds_1:15,Ds_6:75,Ds_7:87,Ds_4:51,Ds_5:63,As_1:22,As_0:10,As_3:46,As_2:34,As_5:70,As_4:58,As_7:94,As_6:82,Cs_7:85,Cs_6:73,Cs_5:61,Cs_4:49,Bb_9:118,Cs_2:25,Cs_1:13,Cs_0:1,Bb_5:70,Bb_4:58,Bb_7:94,Bb_6:82,Bb_1:22,Bb_0:10,Cs_9:109,Cs_8:97,Bb_8:106,Bb_3:46,Bb_2:34,A_7:93,A_6:81,A_5:69,A_4:57,A_3:45,A_2:33,A_1:21,A_0:9,F_4:53,A_9:117,A_8:105,B_8:107,B_9:119,F_10:125,B_0:11,B_1:23,B_2:35,B_3:47,B_4:59,B_5:71,B_6:83,B_7:95,Fs_0:6,Fs_1:18,Fs_2:30,Fs_3:42,Fs_4:54,Fs_5:66,F_5:65,Fs_7:90,Fs_8:102,Fs_9:114,Gb_8:102,Gb_9:114,Gb_2:30,Gb_3:42,Gb_0:6,Gb_1:18,Gb_6:78,Gb_7:90,Gb_4:54,Gb_5:66,F_6:77,Fs_6:78,Eb_8:99,Eb_9:111,E_10:124,Eb_4:51,Eb_5:63,Eb_6:75,Eb_7:87,Eb_0:3,Eb_1:15,Eb_2:27,Eb_3:39,D_8:98,D_9:110,D_2:26,D_3:38,D_0:2,D_1:14,D_6:74,D_7:86,D_4:50,D_5:62,F_2:29,G_9:115,G_8:103,G_5:67,G_4:55,G_7:91,G_6:79,G_1:19,G_0:7,G_3:43,G_2:31,Cs_3:37,Db_9:109,Db_8:97,Db_3:37,Db_2:25,Db_1:13,Db_0:1,Db_7:85,Db_6:73,Db_5:61,Db_4:49,C_1:12,C_0:0,C_3:36,C_2:24,C_5:60,C_4:48,C_7:84,C_6:72,C_9:108,C_8:96,Ds_2:27,Ds_3:39,D_10:122,C_10:120,F_7:89,F_0:5,F_1:17};for(let e=0;e<=10;e++)C["Es_"+e]=C["F_"+e],C["Fb_"+e]=C["E_"+e],C["Bs_"+e]=C["C_"+(e+1)],C["Cb_"+e]=C["B_"+(e-1)];function Et(e){let[_,n]=e,t=y.NATURAL;return _<0?(t=y.FLAT,_=-_):_&&(t=y.SHARP),[t,_]}function pt(e,_){let n=e.begin,t=e.begin+e.duration,R=_.begin,a=_.begin+_.duration;return n<a&&R<t}var Fe={};function Vt(e,_){let n=[],t=e|_[0]<<24|_[1]<<16,R=Fe[t];if(R!==void 0)return R;for(let s in C)C[s]==e&&n.push(s);if(n.length==0)return null;if(n.length==1)return Fe[t]=n[0],n[0];let[a,l]=_,r=_e[a].slice(0,l).split("");for(let s of r)for(let i=0;i<n.length;i++){if(a==y.SHARP&&n[i].startsWith(s+"s"))return Fe[t]=n[i],n[i];if(a==y.FLAT&&n[i].startsWith(s+"b"))return Fe[t]=n[i],n[i]}return Fe[t]=n[0],n[0]}function Qt(e,_){for(let n=5;n>=0;n--){let t=Math.pow(2,n),R=e/t,a=_/t;if(R-=~~R,a-=~~a,R==0&&a==0)return 0;if(R>0&&a==0)return-1;if(R==0&&a>0)return 1}return 0}function Ce(e,_,n){let t=_,R=e,a=[];for(;t>0;){let l=0;for(let r=0;r<=5;r++){let s=Math.pow(2,r);if(t<s)break;if(Qt(R+s,R)>0){l=s;break}}if(!l)for(let r=5;r>=0;r--){let s=Math.pow(2,r);if(t>=s){l=s;break}}a.push({begin:R,duration:l,voice:n,tuplet:null}),t-=l,R+=l}return a}function Gt(e,_,n){let t=e.duration,R=e.staves[_],a=[],l=!1;for(let r of n){let s=R.notes.filter(M=>M.voice==r);if(!s.length)continue;l=!0;let i=new Array(t).fill(!0);for(let M=0;M<t;M++)for(let u of s)if(u.voice==r&&u.begin<=M&&M<u.begin+u.duration){i[M]=!1;break}let f=0;for(let M=0;M<i.length+1;M++)M<i.length&&i[M]?f++:(f>0&&a.push(...Ce(M-f,f,r)),f=0)}return l||a.push(...Ce(0,t,n[0])),a}function Ht(e){let _=[];for(let n of e.tracks)for(let t of n.events)t.type=="SEQUENCE_OR_TRACK_NAME"&&_.push(...t.data.text.split(`
`));return _}function Kt(e){return e.type=="NOTE_ON"&&e.data.velocity!=0}function xt(e){return e.type=="NOTE_OFF"||e.type=="NOTE_ON"&&e.data.velocity==0}function yt(e){var i;let _=e.ticks_per_quarter_note,n=[],t=-1,R=0,a=null,l=null;for(let f of e.tracks){t+=1;let M=0;for(let u of f.events)if(M+=u.delta_time,u.type=="TIME_SIGNATURE"&&t==0){let o=[u.data.numerator,2**u.data.denominator_exp];n.length==0||n[n.length-1][1][0]!=null?n.push([M,[o,l],[]]):n[n.length-1][1][0]=o,a=o}else if(u.type=="KEY_SIGNATURE"&&t==0){let o=Et([u.data.num_sharps_or_flats,u.data.is_minor]);n.length==0||n[n.length-1][1][1]!=null?n.push([M,[a,o],[]]):n[n.length-1][1][1]=o,l=o}else if(u.type=="END_OF_TRACK")R=Math.max(M,R);else for(let o=0;o<n.length;o++){let m=n.length-o-1;if(M>=n[m][0]){if(u.type=="NOTE_ON"||u.type=="NOTE_OFF"){let F;Kt(u)?F="NOTE_ON":xt(u)&&(F="NOTE_OFF"),n[m][2].push({name:F,abs_tick:M-n[m][0],pitch:u.data.key,channel:(t*16+u.data.channel)*100})}break}}}let r=[];for(let f=0;f<n.length;f++)for(let M=0;M<n[f][2].length;M++){let u=n[f][2][M];if(u.name=="NOTE_ON")r.unshift([!0,f,M,u]);else if(u.name=="NOTE_OFF")for(let o=0;o<r.length;o++){let m=r[o];if(m[0]&&m[3].channel==u.channel&&m[3].pitch==u.pitch){r[o][0]=!1,n[m[1]][2][m[2]].duration=u.abs_tick-m[3].abs_tick;break}}}let s=[];for(let f=0;f<n.length;f++){let M=f+1<n.length?n[f+1][0]:R;s.push({time_signature:n[f][1][0],key_signature:(i=n[f][1][1])!=null?i:[0,0],resolution:_,duration:M-n[f][0],notes:[]});for(let u=0;u<n[f][2].length;u++){let o=n[f][2][u];if(n[f][2][u].name=="NOTE_ON")if(o.duration!==void 0){let m=o.duration;s[s.length-1].notes.push({begin:o.abs_tick,pitch:o.pitch,duration:m,channel:o.channel})}else console.warn("WARNING: Unpaired NOTE_ON event, discarding!",o)}}return s}function Jt(e){function _(t,R){return t.begin==R.begin&&t.duration==R.duration?t.pitch==R.pitch:pt(t,R)}function n(t,R){let a=t.notes[R].channel;for(let l=0;l<R;l++)if(t.notes[l].channel==a&&_(t.notes[R],t.notes[l]))return!0;return!1}for(let t=0;t<e.length;t++){let R=e[t].notes,a=e[t].cross_ties;for(let l=0;l<R.length;l++){let r=R[l],s=!1;for(let i=0;i<a.length;i++)if(r==a[i].right){s=!0;break}if(!s){for(;n(e[t],l);)r.channel++;for(let i=0;i<e[t].cross_ties.length;i++)e[t].cross_ties[i].left==r&&(e[t].cross_ties[i].right.channel=r.channel)}}}}function At(e){let _=1024,n=-1,t=!1;for(let R in B){let a=B[R],l=Math.abs(e-a);l<_&&(n=a,_=l)}for(let R in B){let a=~~(B[R]*ae),l=Math.abs(e-a);l<_&&(t=!0,n=a,_=l)}return[n,t]}function vt(e){return e==B.THIRTYSECOND*ae||e==B.SIXTEENTH*ae||e==B.EIGHTH*ae||e==B.QUARTER*ae||e==B.HALF*ae||e==B.WHOLE*ae}function ke(e,_){return e/_*(B.QUARTER/B.THIRTYSECOND)}function wt(e,_){return~~(e*(B.THIRTYSECOND*1/B.QUARTER)*_)}function Dt(e){let _=e.time_signature,n=e.key_signature,t=e.resolution,R=e.notes,a=[];function l(){let u=t,o=_[0];return~~(B.WHOLE/_[1])*o}function r(){let u=l();return wt(u,t)}let s=r(),i=l();function f(u){return~~ke(u,t)}function M(){return{time_signature:_,key_signature:n,duration:f(s),notes:[],cross_ties:[]}}for(;e.duration>s*a.length;)a.push(M());for(let u=0;u<R.length;u++){let o=R[u],m=~~(o.begin/s);for(;m>=a.length;)a.push(M());let F=f(o.begin-m*s),[h,S]=At(ke(o.duration,t)),U=o.channel,L=o.pitch,W={begin:F,channel:U,pitch:L,duration:Math.min(h,i-F)};a[m].notes.push(W);let V=1,E=W;for(;F+h>i;){m+V>=a.length&&a.push(M());let O={begin:0,duration:Math.min(i,F+h-i),channel:U,pitch:L};a[m+V].notes.push(O),a[m+V-1].cross_ties.push({left:E,right:O}),a[m+V].cross_ties.push({left:E,right:O}),h=F+h-i,F=0,V+=1,E=O}}return a}function Ct(e,_){var S,U;let n=e.staves[_],[t,R]=n.key_signature,a=_e[t].slice(0,R).split(""),l={};function r(L){let W=~~(B.WHOLE/L[1]);return L[1]==4&&L[0]>=4&&(W*=2),W}let s=r(n.time_signature),i=De(n.notes.concat(n.rests),[]);n.voices=i.length;function f(L){return~~(L.begin/s)}function M(L){let W=[];for(let V of n.notes)f(V)==L&&W.push(V);return W}function u(L){let W=f(L),V=M(W);return V.reduce((O,T)=>O+T.staff_pos,0)/V.length<4?1:-1}for(let L=0;L<n.notes.length;L++){let W=n.notes[L],V=W.name,E=Number(V.split("_")[1]),O=Me(V,n.clef);W.octave=E,W.staff_pos=O;let T=vt(W.duration);W.modifier=T}for(let L=0;L<n.notes.length;L++){let W=null,V=n.notes[L],E=V.name,O=E[0],T=we(E),c=O+"_"+V.octave;a.includes(O)?T==t&&(l[c]===void 0||l[c]===T)||(W=T,l[c]=T):T==y.NATURAL?l[c]&&(W=T,l[c]=T):l[c]!==T&&(W=T,l[c]=T),V.accidental=W}let o=be(n.notes),m={},F={},h=Object.entries(o).sort((L,W)=>L[1]-W[1]);for(let L=0;L<h.length;L++)m[h[L][0]]=L,F[L]=o[h[L][0]];for(let L=0;L<n.notes.length;L++)n.notes[L].voice=(S=m[n.notes[L].voice])!=null?S:0;for(let L=0;L<n.rests.length;L++)n.rests[L].voice=(U=m[n.rests[L].voice])!=null?U:0;for(let L=0;L<n.notes.length;L++){let W=n.notes[L],V;n.voices==1?V=u(W):V=W.voice%2?1:-1,W.stem_dir=V}he(n,s);for(let L=0;L<n.notes.length;L++)n.notes[L].duration*=Se,n.notes[L].begin*=Se;for(let L=0;L<n.rests.length;L++)n.rests[L].duration*=Se,n.rests[L].begin*=Se}function kt(e){let _={};for(let t of e)for(let R of t.notes)_[R.channel]||(_[R.channel]=[0,0]),_[R.channel][0]+=R.pitch,_[R.channel][1]++;let n={};for(let t in _)n[t]=_[t][1]?_[t][0]/_[t][1]:0;return n}function Bt(e){return e>C.C_5?q.TREBLE:q.BASS}function Be(e){var i,f;let _=yt(e),n=[];for(let M=0;M<_.length;M++){let u=Dt(_[M]);for(let o=0;o<u.length;o++)n.push(u[o])}Jt(n);let t=kt(n),R={};for(let M in t)R[M]=Bt(t[M]);let a=Object.keys(t).map(Number).sort((M,u)=>M-u),l={};for(let M=0;M<a.length;M++){let u=~~(a[M]/100),m=~~((a[M]-u*100)/Yt),F=u*100+m;l[F]||(l[F]=[]),l[F].push(a[M])}let r=Object.values(l),s={title:Ht(e),instruments:[],composer:[],slurs:[],measures:[],crescs:[]};for(let M=0;M<n.length;M++){let u=n[M].cross_ties;for(let o=0;o<u.length;o++){let m={left:(i=u[o].left.id)!=null?i:Te(),right:(f=u[o].right.id)!=null?f:Te(),is_tie:!0};u[o].left.id=m.left,u[o].right.id=m.right,s.slurs.push(m)}}for(let M=0;M<n.length;M++){let u={duration:n[M].duration,barline:M==n.length?K.END:K.SINGLE,staves:[]};for(let o=0;o<r.length;o++){let m=r[o];u.staves.push({clef:R[m[0]],time_signature:n[M].time_signature,key_signature:n[M].key_signature,notes:[],rests:[],grace:[],voices:null,beams:[]});for(let F=0;F<n[M].notes.length;F++)if(m.includes(n[M].notes[F].channel)){let h=Vt(n[M].notes[F].pitch,n[M].key_signature),S={begin:n[M].notes[F].begin,duration:n[M].notes[F].duration,accidental:null,modifier:null,octave:null,name:h,voice:n[M].notes[F].channel,staff_pos:null,stem_dir:null,prev_in_chord:null,next_in_chord:null,tuplet:null};n[M].notes[F].id&&(S.id=n[M].notes[F].id),u.staves[o].notes.push(S)}u.staves[o].rests.push(...Gt(u,o,m)),Ct(u,o)}u.duration*=2,s.measures.push(u)}return s}function $e(e){let _={events:[]},n=[],t={},R={};for(let r=0;r<e.slurs.length;r++)e.slurs[r].is_tie&&(t[e.slurs[r].left]=!0,R[e.slurs[r].right]=!0);_.events.push({type:"SEQUENCE_OR_TRACK_NAME",delta_time:0,data:{text:e.title.concat(e.composer).join(`
`)}});let a=[];for(let r=0;r<e.instruments.length;r++)a.push(...e.instruments[r].names);for(let r=0;r<e.measures[0].staves.length;r++){let s=0;for(let i=0;i<e.measures.length;i++){if(n[r]||(n[r]={events:[]},a[r]&&n[r].events.push({type:"INSTRUMENT_NAME",delta_time:0,data:{text:a[r]}})),r==0){if(i==0||e.measures[i].staves[r].key_signature.toString()!=e.measures[i-1].staves[r].key_signature.toString()){let[f,M]=e.measures[i].staves[r].key_signature;_.events.push({type:"KEY_SIGNATURE",delta_time:s,data:{num_sharps_or_flats:f*M,is_minor:0}})}if(i==0||e.measures[i].staves[r].time_signature.toString()!=e.measures[i-1].staves[r].time_signature.toString()){let[f,M]=e.measures[i].staves[r].time_signature,u=Math.log2(M);_.events.push({type:"TIME_SIGNATURE",delta_time:s,data:{numerator:f,denominator_exp:u,clocks_per_metronome_click:24,notated_32nd_per_quarter_note:8}})}}for(let f=0;f<e.measures[i].staves[r].notes.length;f++){let M=e.measures[i].staves[r].notes[f],u=M.begin,o=M.duration,m=100;M.articulation==G.STACCATO&&(o/=2),M.articulation==G.SPICCATO&&(o/=4),M.articulation==G.ACCENT&&(m=125);let F=u+o;if(M.prev_in_chord!=null||M.next_in_chord!=null){let h=M,S=M,U=0,L=0,W=M.articulation==G.ARPEGGIATED;for(;h.prev_in_chord!=null;)h=e.measures[i].staves[r].notes[h.prev_in_chord],W=W||h.articulation==G.ARPEGGIATED,U++;for(;S.next_in_chord!=null;)S=e.measures[i].staves[r].notes[S.next_in_chord],W=W||S.articulation==G.ARPEGGIATED,L++;if(W){let V;h.staff_pos<S.staff_pos?V=L:V=U,u+=Math.min(2,M.duration/(L+U+1))*V}}if(e.measures[i].staves[r].grace[M.begin]&&(u=Math.min(F-1,Math.max(u,M.begin+e.measures[i].staves[r].grace[M.begin].duration/4))),M.articulation!=G.TRILL&&M.articulation!=G.TREMBLEMENT)R[M.id]||n[r].events.push({type:"NOTE_ON",delta_time:s+u,data:{key:C[M.name],velocity:m,channel:0}}),t[M.id]||n[r].events.push({type:"NOTE_OFF",delta_time:s+F,data:{key:C[M.name],velocity:0,channel:0}});else{let h=String.fromCharCode(M.name[0].charCodeAt(0)+1);h=="H"?h="A"+M.name.slice(1):h=="C"?(h+=M.name.slice(1),h=h.split("_")[0]+"_"+(M.octave+1)):h+=M.name.slice(1);let S=!1;for(let U=u;U<F;U++)n[r].events.push({type:"NOTE_ON",delta_time:s+U,data:{key:C[S?h:M.name],velocity:m,channel:0}}),n[r].events.push({type:"NOTE_OFF",delta_time:s+U+1,data:{key:C[S?h:M.name],velocity:0,channel:0}}),S=!S}}for(let f=0;f<e.measures[i].staves[r].grace.length;f++)if(!!e.measures[i].staves[r].grace[f])for(let M=0;M<e.measures[i].staves[r].grace[f].staves[0].notes.length;M++){let u=e.measures[i].staves[r].grace[f].staves[0].notes[M];n[r].events.push({type:"NOTE_ON",delta_time:s+f+u.begin/4,data:{key:C[u.name],velocity:100,channel:0}}),n[r].events.push({type:"NOTE_OFF",delta_time:s+f+(u.begin+u.duration)/4,data:{key:C[u.name],velocity:0,channel:0}})}s+=e.measures[i].duration}}n.unshift(_);for(let r=0;r<n.length;r++){n[r].events.sort((s,i)=>s.delta_time-i.delta_time);for(let s=n[r].events.length-1;s>0;s--)n[r].events[s].delta_time-=n[r].events[s-1].delta_time}for(let r=0;r<n.length;r++){for(let s=0;s<n[r].events.length;s++)n[r].events[s].delta_time=~~(n[r].events[s].delta_time*6);n[r].events.push({type:"END_OF_TRACK",delta_time:0,data:{}})}return{magic:"MThd",tracks:n,num_tracks:n.length,format:1,time_format:"METRIC",ticks_per_quarter_note:96}}var de="R".charCodeAt(0),je={},ge={};function H(e){return Ze[e]==null&&$t(e),Ze[e]}function $t(e){var _=qe[e];if(_!=null){for(var n=_.substring(3,5),t=1*n.charCodeAt(0)-de,R=1*n.charCodeAt(1)-de,a=_.substring(5),l=[[]],r=Infinity,s=-Infinity,i=0;i<a.length;){var f=a.substring(i,i+2);if(f==" R")l.push([]);else{var M=f.charCodeAt(0)-de,u=f.charCodeAt(1)-de;r=Math.min(u,r),s=Math.max(u,s),l[l.length-1].push([M,u])}i+=2}if(ge[e]){let o=ge[e];t*=o,R*=o,r*=o,s*=o;for(let m=0;m<l.length;m++)for(let F=0;F<l[m].length;F++)l[m][F][0]*=o,l[m][F][1]*=o}Ze[e]={xmin:t,xmax:R,ymin:r,ymax:s,polylines:l}}}var v={DUPLEX:0,DUPLEX_ITALIC:1,TRIPLEX:20,TRIPLEX_ITALIC:21};function se(e,_=v.DUPLEX_ITALIC){let n=2001+_*50,t=e.charCodeAt(0);if(65<=t&&t<=90)return t-65+n;if(97<=t&&t<=122)return t-97+n+100;if(48<=t&&t<=57)return t-48+n+199;let R={".":2210,",":2211,":":2212,";":2213,"!":2214,"?":2215,"'":2216,'"':2217,"\xB0":2218,"*":2219,"/":2220,"(":2221,")":2222,"[":2223,"]":2224,"{":2225,"}":2226,"\u27E8":2227,"\u27E9":2228,"|":2229,"-":2231,"+":2232,"=":2238,"<":2241,">":2242,"~":2246,"`":2249,"\u2019":2251,"\u2018":2252,"\u221A":2255,"%":2271,"&":2272,"@":2273,$:2274,"#":2275}[e];return R||je[e]}function k(e,_=v.DUPLEX_ITALIC,n=0){let t=-n;for(let R=0;R<e.length;R++){if(t+=n,e[R]==" "){t+=10;continue}let a=se(e[R],_);if(a===void 0)continue;let l=H(a);t+=l.xmax-l.xmin}return t}function ze(e,_,n=1){if(Object.assign(je,e),Object.assign(qe,_),n!=1)for(let t in _)ge[t]=n}var Ze={},qe={2001:" 18H\\RFK[ RRFY[ RRIX[ RMUVU RI[O[ RU[[[",2002:" 45G]LFL[ RMFM[ RIFUFXGYHZJZLYNXOUP RUFWGXHYJYLXNWOUP RMPUPXQYRZTZWYYXZU[I[ RUPWQXRYTYWXYWZU[",2003:" 32G\\XIYLYFXIVGSFQFNGLIKKJNJSKVLXNZQ[S[VZXXYV RQFOGMILKKNKSLVMXOZQ[",2004:" 30G]LFL[ RMFM[ RIFSFVGXIYKZNZSYVXXVZS[I[ RSFUGWIXKYNYSXVWXUZS[",2005:" 22G\\LFL[ RMFM[ RSLST RIFYFYLXF RMPSP RI[Y[YUX[",2006:" 20G[LFL[ RMFM[ RSLST RIFYFYLXF RMPSP RI[P[",2007:" 40G^XIYLYFXIVGSFQFNGLIKKJNJSKVLXNZQ[S[VZXX RQFOGMILKKNKSLVMXOZQ[ RXSX[ RYSY[ RUS\\S",2008:" 27F^KFK[ RLFL[ RXFX[ RYFY[ RHFOF RUF\\F RLPXP RH[O[ RU[\\[",2009:" 12MXRFR[ RSFS[ ROFVF RO[V[",2010:" 20KZUFUWTZR[P[NZMXMVNUOVNW RTFTWSZR[ RQFXF",2011:" 27F\\KFK[ RLFL[ RYFLS RQOY[ RPOX[ RHFOF RUF[F RH[O[ RU[[[",2012:" 14I[NFN[ ROFO[ RKFRF RK[Z[ZUY[",2013:" 30F_KFK[ RLFRX RKFR[ RYFR[ RYFY[ RZFZ[ RHFLF RYF]F RH[N[ RV[][",2014:" 21G^LFL[ RMFYY RMHY[ RYFY[ RIFMF RVF\\F RI[O[",2015:" 44G]QFNGLIKKJOJRKVLXNZQ[S[VZXXYVZRZOYKXIVGSFQF RQFOGMILKKOKRLVMXOZQ[ RS[UZWXXVYRYOXKWIUGSF",2016:" 29G]LFL[ RMFM[ RIFUFXGYHZJZMYOXPUQMQ RUFWGXHYJYMXOWPUQ RI[P[",2017:" 64G]QFNGLIKKJOJRKVLXNZQ[S[VZXXYVZRZOYKXIVGSFQF RQFOGMILKKOKRLVMXOZQ[ RS[UZWXXVYRYOXKWIUGSF RNYNXOVQURUTVUXV_W`Y`Z^Z] RUXV\\W^X_Y_Z^",2018:" 45G]LFL[ RMFM[ RIFUFXGYHZJZLYNXOUPMP RUFWGXHYJYLXNWOUP RI[P[ RRPTQURXYYZZZ[Y RTQUSWZX[Z[[Y[X",2019:" 34H\\XIYFYLXIVGSFPFMGKIKKLMMNOOUQWRYT RKKMMONUPWQXRYTYXWZT[Q[NZLXKUK[LX",2020:" 16I\\RFR[ RSFS[ RLFKLKFZFZLYF RO[V[",2021:" 23F^KFKULXNZQ[S[VZXXYUYF RLFLUMXOZQ[ RHFOF RVF\\F",2022:" 15H\\KFR[ RLFRX RYFR[ RIFOF RUF[F",2023:" 24F^JFN[ RKFNV RRFN[ RRFV[ RSFVV RZFV[ RGFNF RWF]F",2024:" 21H\\KFX[ RLFY[ RYFK[ RIFOF RUF[F RI[O[ RU[[[",2025:" 20H]KFRQR[ RLFSQS[ RZFSQ RIFOF RVF\\F RO[V[",2026:" 16H\\XFK[ RYFL[ RLFKLKFYF RK[Y[YUX[",2027:" 18H\\RFK[ RRFY[ RRIX[ RMUVU RI[O[ RU[[[",2028:" 45G]LFL[ RMFM[ RIFUFXGYHZJZLYNXOUP RUFWGXHYJYLXNWOUP RMPUPXQYRZTZWYYXZU[I[ RUPWQXRYTYWXYWZU[",2029:" 14I[NFN[ ROFO[ RKFZFZLYF RK[R[",2030:" 15H\\RFJ[ RRFZ[ RRIY[ RKZYZ RJ[Z[",2031:" 22G\\LFL[ RMFM[ RSLST RIFYFYLXF RMPSP RI[Y[YUX[",2032:" 16H\\XFK[ RYFL[ RLFKLKFYF RK[Y[YUX[",2033:" 27F^KFK[ RLFL[ RXFX[ RYFY[ RHFOF RUF\\F RLPXP RH[O[ RU[\\[",2034:" 56G]QFNGLIKKJOJRKVLXNZQ[S[VZXXYVZRZOYKXIVGSFQF RQFOGMILKKOKRLVMXOZQ[ RS[UZWXXVYRYOXKWIUGSF ROMOT RUMUT ROPUP ROQUQ",2035:" 12MXRFR[ RSFS[ ROFVF RO[V[",2036:" 27F\\KFK[ RLFL[ RYFLS RQOY[ RPOX[ RHFOF RUF[F RH[O[ RU[[[",2037:" 15H\\RFK[ RRFY[ RRIX[ RI[O[ RU[[[",2038:" 30F_KFK[ RLFRX RKFR[ RYFR[ RYFY[ RZFZ[ RHFLF RYF]F RH[N[ RV[][",2039:" 21G^LFL[ RMFYY RMHY[ RYFY[ RIFMF RVF\\F RI[O[",2040:" 36G]KEJJ RZEYJ RONNS RVNUS RKWJ\\ RZWY\\ RKGYG RKHYH ROPUP ROQUQ RKYYY RKZYZ",2041:" 44G]QFNGLIKKJOJRKVLXNZQ[S[VZXXYVZRZOYKXIVGSFQF RQFOGMILKKOKRLVMXOZQ[ RS[UZWXXVYRYOXKWIUGSF",2042:" 21F^KFK[ RLFL[ RXFX[ RYFY[ RHF\\F RH[O[ RU[\\[",2043:" 29G]LFL[ RMFM[ RIFUFXGYHZJZMYOXPUQMQ RUFWGXHYJYMXOWPUQ RI[P[",2044:" 20H]KFRPJ[ RJFQP RJFYFZLXF RKZXZ RJ[Y[ZUX[",2045:" 16I\\RFR[ RSFS[ RLFKLKFZFZLYF RO[V[",2046:" 33I\\KKKILGMFOFPGQIRMR[ RKIMGOGQI RZKZIYGXFVFUGTISMS[ RZIXGVGTI RO[V[",2047:" 48H]RFR[ RSFS[ RPKMLLMKOKRLTMUPVUVXUYTZRZOYMXLUKPK RPKNLMMLOLRMTNUPV RUVWUXTYRYOXMWLUK ROFVF RO[V[",2048:" 21H\\KFX[ RLFY[ RYFK[ RIFOF RUF[F RI[O[ RU[[[",2049:" 41G^RFR[ RSFS[ RIMJLLMMQNSOTQU RJLKMLQMSNTQUTUWTXSYQZM[L RTUVTWSXQYM[L\\M ROFVF RO[V[",2050:" 43G]JXK[O[MWKSJPJLKIMGPFTFWGYIZLZPYSWWU[Y[ZX RMWLTKPKLLINGPF RTFVGXIYLYPXTWW RKZNZ RVZYZ",2051:" 18H\\UFH[ RUFV[ RTHU[ RLUUU RF[L[ RR[X[",2052:" 41F^OFI[ RPFJ[ RLFWFZG[I[KZNYOVP RWFYGZIZKYNXOVP RMPVPXQYSYUXXVZR[F[ RVPWQXSXUWXUZR[",2053:" 34H]ZH[H\\F[L[JZHYGWFTFQGOIMLLOKSKVLYMZP[S[UZWXXV RTFRGPINLMOLSLVMYNZP[",2054:" 30F]OFI[ RPFJ[ RLFUFXGYHZKZOYSWWUYSZO[F[ RUFWGXHYKYOXSVWTYRZO[",2055:" 22F]OFI[ RPFJ[ RTLRT RLF[FZLZF RMPSP RF[U[WVT[",2056:" 20F\\OFI[ RPFJ[ RTLRT RLF[FZLZF RMPSP RF[M[",2057:" 42H^ZH[H\\F[L[JZHYGWFTFQGOIMLLOKSKVLYMZP[R[UZWXYT RTFRGPINLMOLSLVMYNZP[ RR[TZVXXT RUT\\T",2058:" 27E_NFH[ ROFI[ R[FU[ R\\FV[ RKFRF RXF_F RLPXP RE[L[ RR[Y[",2059:" 12LYUFO[ RVFP[ RRFYF RL[S[",2060:" 21I[XFSWRYQZO[M[KZJXJVKULVKW RWFRWQYO[ RTF[F",2061:" 27F]OFI[ RPFJ[ R]FLS RSOW[ RROV[ RLFSF RYF_F RF[M[ RS[Y[",2062:" 14H\\QFK[ RRFL[ RNFUF RH[W[YUV[",2063:" 30E`NFH[ RNFO[ ROFPY R\\FO[ R\\FV[ R]FW[ RKFOF R\\F`F RE[K[ RS[Z[",2064:" 21F_OFI[ ROFVX ROIV[ R\\FV[ RLFOF RYF_F RF[L[",2065:" 42G]SFPGNILLKOJSJVKYLZN[Q[TZVXXUYRZNZKYHXGVFSF RSFQGOIMLLOKSKVLYN[ RQ[SZUXWUXRYNYKXHVF",2066:" 27F]OFI[ RPFJ[ RLFXF[G\\I\\K[NYPUQMQ RXFZG[I[KZNXPUQ RF[M[",2067:" 61G]SFPGNILLKOJSJVKYLZN[Q[TZVXXUYRZNZKYHXGVFSF RSFQGOIMLLOKSKVLYN[ RQ[SZUXWUXRYNYKXHVF RLYLXMVOUPURVSXS_T`V`W^W] RSXT^U_V_W^",2068:" 42F^OFI[ RPFJ[ RLFWFZG[I[KZNYOVPMP RWFYGZIZKYNXOVP RRPTQURVZW[Y[ZYZX RURWYXZYZZY RF[M[",2069:" 35G^ZH[H\\F[L[JZHYGVFRFOGMIMKNMONVRXT RMKOMVQWRXTXWWYVZS[O[LZKYJWJUI[JYKY",2070:" 16H]UFO[ RVFP[ ROFLLNF]F\\L\\F RL[S[",2071:" 25F_NFKQJUJXKZN[R[UZWXXU\\F ROFLQKUKXLZN[ RKFRF RYF_F",2072:" 15H\\NFO[ ROFPY R\\FO[ RLFRF RXF^F",2073:" 24E_MFK[ RNFLY RUFK[ RUFS[ RVFTY R]FS[ RJFQF RZF`F",2074:" 21G]NFU[ ROFV[ R\\FH[ RLFRF RXF^F RF[L[ RR[X[",2075:" 20H]NFRPO[ ROFSPP[ R]FSP RLFRF RYF_F RL[S[",2076:" 16G][FH[ R\\FI[ ROFLLNF\\F RH[V[XUU[",2077:" 46H\\KILKXWYYY[ RLLXX RKIKKLMXYY[ RPPLTKVKXLZK[ RKVMZ RLTLVMXMZK[ RSSXN RVIVLWNYNYLWKVI RVIWLYN",2101:" 39I]NONPMPMONNPMTMVNWOXQXXYZZ[ RWOWXXZZ[[[ RWQVRPSMTLVLXMZP[S[UZWX RPSNTMVMXNZP[",2102:" 33G\\LFL[ RMFM[ RMPONQMSMVNXPYSYUXXVZS[Q[OZMX RSMUNWPXSXUWXUZS[ RIFMF",2103:" 28H[WPVQWRXQXPVNTMQMNNLPKSKULXNZQ[S[VZXX RQMONMPLSLUMXOZQ[",2104:" 36H]WFW[ RXFX[ RWPUNSMQMNNLPKSKULXNZQ[S[UZWX RQMONMPLSLUMXOZQ[ RTFXF RW[[[",2105:" 31H[LSXSXQWOVNTMQMNNLPKSKULXNZQ[S[VZXX RWSWPVN RQMONMPLSLUMXOZQ[",2106:" 22KXUGTHUIVHVGUFSFQGPIP[ RSFRGQIQ[ RMMUM RM[T[",2107:" 60I\\QMONNOMQMSNUOVQWSWUVVUWSWQVOUNSMQM RONNPNTOV RUVVTVPUN RVOWNYMYNWN RNUMVLXLYM[P\\U\\X]Y^ RLYMZP[U[X\\Y^Y_XaUbObLaK_K^L\\O[",2108:" 28G]LFL[ RMFM[ RMPONRMTMWNXPX[ RTMVNWPW[ RIFMF RI[P[ RT[[[",2109:" 18MXRFQGRHSGRF RRMR[ RSMS[ ROMSM RO[V[",2110:" 25MXSFRGSHTGSF RTMT_SaQbObNaN`O_P`Oa RSMS_RaQb RPMTM",2111:" 27G\\LFL[ RMFM[ RWMMW RRSX[ RQSW[ RIFMF RTMZM RI[P[ RT[Z[",2112:" 12MXRFR[ RSFS[ ROFSF RO[V[",2113:" 44BcGMG[ RHMH[ RHPJNMMOMRNSPS[ ROMQNRPR[ RSPUNXMZM]N^P^[ RZM\\N]P][ RDMHM RD[K[ RO[V[ RZ[a[",2114:" 28G]LML[ RMMM[ RMPONRMTMWNXPX[ RTMVNWPW[ RIMMM RI[P[ RT[[[",2115:" 36H\\QMNNLPKSKULXNZQ[S[VZXXYUYSXPVNSMQM RQMONMPLSLUMXOZQ[ RS[UZWXXUXSWPUNSM",2116:" 36G\\LMLb RMMMb RMPONQMSMVNXPYSYUXXVZS[Q[OZMX RSMUNWPXSXUWXUZS[ RIMMM RIbPb",2117:" 33H\\WMWb RXMXb RWPUNSMQMNNLPKSKULXNZQ[S[UZWX RQMONMPLSLUMXOZQ[ RTb[b",2118:" 23IZNMN[ ROMO[ ROSPPRNTMWMXNXOWPVOWN RKMOM RK[R[",2119:" 32J[WOXMXQWOVNTMPMNNMOMQNRPSUUWVXW RMPNQPRUTWUXVXYWZU[Q[OZNYMWM[NY",2120:" 16KZPFPWQZS[U[WZXX RQFQWRZS[ RMMUM",2121:" 28G]LMLXMZP[R[UZWX RMMMXNZP[ RWMW[ RXMX[ RIMMM RTMXM RW[[[",2122:" 15I[LMR[ RMMRY RXMR[ RJMPM RTMZM",2123:" 24F^JMN[ RKMNX RRMN[ RRMV[ RSMVX RZMV[ RGMNM RWM]M",2124:" 21H\\LMW[ RMMX[ RXML[ RJMPM RTMZM RJ[P[ RT[Z[",2125:" 22H[LMR[ RMMRY RXMR[P_NaLbKbJaK`La RJMPM RTMZM",2126:" 16I[WML[ RXMM[ RMMLQLMXM RL[X[XWW[",2127:" 40G^QMNNLPKRJUJXKZN[P[RZUWWTYPZM RQMONMPLRKUKXLZN[ RQMSMUNVPXXYZZ[ RSMTNUPWXXZZ[[[",2128:" 57G\\TFQGOIMMLPKTJZIb RTFRGPINMMPLTKZJb RTFVFXGYHYKXMWNTOPO RVFXHXKWMVNTO RPOTPVRWTWWVYUZR[P[NZMYLV RPOSPURVTVWUYTZR[",2129:" 28H\\IPKNMMOMQNROSRSVRZOb RJOLNPNRO RZMYPXRSYP^Nb RYMXPWRSY",2130:" 44I\\VNTMRMONMQLTLWMYNZP[R[UZWWXTXQWOSJRHRFSEUEWFYH RRMPNNQMTMXNZ RR[TZVWWTWPVNTKSISGTFVFYH",2131:" 32I[XPVNTMPMNNNPPRSS RPMONOPQRSS RSSNTLVLXMZP[S[UZWX RSSOTMVMXNZP[",2132:" 31I[TFRGQHQIRJUKZKZJWKSMPOMRLULWMYP[S]T_TaSbQbPa RULQONRMUMWNYP[",2133:" 32G]HQIOKMNMONOPNTL[ RMMNNNPMTK[ RNTPPRNTMVMXNYOYRXWUb RVMXOXRWWTb",2134:" 44F]GQHOJMMMNNNPMUMXNZO[ RLMMNMPLULXMZO[Q[SZUXWUXRYMYIXGVFTFRHRJSMUPWRZT RSZUWVUWRXMXIWGVF",2135:" 15LXRMPTOXOZP[S[UYVW RSMQTPXPZQ[",2136:" 29H\\NMJ[ ROMK[ RXMYNZNYMWMUNQROSMS ROSQTSZT[ ROSPTRZS[U[WZYW",2137:" 23H\\KFMFOGPHQJWXXZY[ RMFOHPJVXWZY[Z[ RRMJ[ RRMK[",2138:" 28F]MMGb RNMHb RMPLVLYN[P[RZTXVU RXMUXUZV[Y[[Y\\W RYMVXVZW[",2139:" 24H\\NML[ ROMNSMXL[ RYMXQVU RZMYPXRVUTWQYOZL[ RKMOM",2140:" 45IZTFRGQHQIRJUKXK RUKQLOMNONQPSSTVT RUKRLPMOOOQQSST RSTOUMVLXLZN\\S^T_TaRbPb RSTPUNVMXMZO\\S^",2141:" 32I[RMONMQLTLWMYNZP[R[UZWWXTXQWOVNTMRM RRMPNNQMTMXNZ RR[TZVWWTWPVN",2142:" 22G]PNL[ RPNM[ RVNV[ RVNW[ RIPKNNM[M RIPKONN[N",2143:" 31H[LVMYNZP[R[UZWWXTXQWOVNTMRMONMQLTHb RR[TZVWWTWPVN RRMPNNQMTIb",2144:" 35H][MQMNNLQKTKWLYMZO[Q[TZVWWTWQVOUNSM RQMONMQLTLXMZ RQ[SZUWVTVPUN RUN[N",2145:" 16H\\SNP[ RSNQ[ RJPLNOMZM RJPLOONZN",2146:" 31H\\IQJOLMOMPNPPNVNYP[ RNMONOPMVMYNZP[Q[TZVXXUYRYOXMWNXOYR RXUYO",2147:" 37G]ONMOKQJTJWKYLZN[Q[TZWXYUZRZOXMVMTORSPXMb RJWLYNZQZTYWWYU RZOXNVNTPRSPYNb",2148:" 23I[KMMMONPPU_VaWb RMMNNOPT_UaWbYb RZMYOWRM]K`Jb",2149:" 34F]UFOb RVFNb RGQHOJMMMNNNPMUMXOZRZTYWVYS RLMMNMPLULXMZO[R[TZVXXUYS[M",2150:" 44F]JQLOONNMLNJQITIWJZK[M[OZQWRT RIWJYKZMZOYQW RQTQWRZS[U[WZYWZTZQYNXMWNYOZQ RQWRYSZUZWYYW",2151:" 39H]XMVTUXUZV[Y[[Y\\W RYMWTVXVZW[ RVTVQUNSMQMNNLQKTKWLYMZO[Q[SZUWVT RQMONMQLTLXMZ",2152:" 36H[PFLSLVMYNZ RQFMS RMSNPPNRMTMVNWOXQXTWWUZR[P[NZMWMS RVNWPWTVWTZR[ RMFQF",2153:" 25I[WPWQXQXPWNUMRMONMQLTLWMYNZP[R[UZWW RRMPNNQMTMXNZ",2154:" 42H]ZFVTUXUZV[Y[[Y\\W R[FWTVXVZW[ RVTVQUNSMQMNNLQKTKWLYMZO[Q[SZUWVT RQMONMQLTLXMZ RWF[F",2155:" 26I[MVQUTTWRXPWNUMRMONMQLTLWMYNZP[R[UZWX RRMPNNQMTMXNZ",2156:" 35KZZGYHZI[H[GZFXFVGUHTJSMP[O_Na RXFVHUJTNRWQ[P^O`NaLbJbIaI`J_K`Ja ROMYM",2157:" 43H\\YMU[T^RaObLbJaI`I_J^K_J` RXMT[S^QaOb RVTVQUNSMQMNNLQKTKWLYMZO[Q[SZUWVT RQMONMQLTLXMZ",2158:" 31H]PFJ[ RQFK[ RMTOPQNSMUMWNXOXQVWVZW[ RUMWOWQUWUZV[Y[[Y\\W RMFQF",2159:" 26LYUFTGUHVGUF RMQNOPMSMTNTQRWRZS[ RRMSNSQQWQZR[U[WYXW",2160:" 32LYVFUGVHWGVF RNQOOQMTMUNUQR[Q^P`OaMbKbJaJ`K_L`Ka RSMTNTQQ[P^O`Mb",2161:" 34H\\PFJ[ RQFK[ RXNWOXPYOYNXMWMUNQROSMS ROSQTSZT[ ROSPTRZS[U[WZYW RMFQF",2162:" 18MYUFQTPXPZQ[T[VYWW RVFRTQXQZR[ RRFVF",2163:" 52AbBQCOEMHMINIPHTF[ RGMHNHPGTE[ RHTJPLNNMPMRNSOSQP[ RPMRORQO[ RRTTPVNXMZM\\N]O]Q[W[Z\\[ RZM\\O\\QZWZZ[[^[`YaW",2164:" 37F]GQHOJMMMNNNPMTK[ RLMMNMPLTJ[ RMTOPQNSMUMWNXOXQVWVZW[ RUMWOWQUWUZV[Y[[Y\\W",2165:" 32I[RMONMQLTLWMYNZP[R[UZWWXTXQWOVNTMRM RRMPNNQMTMXNZ RR[TZVWWTWPVN",2166:" 42G\\HQIOKMNMONOPNTJb RMMNNNPMTIb RNTOQQNSMUMWNXOYQYTXWVZS[Q[OZNWNT RWNXPXTWWUZS[ RFbMb",2167:" 33H\\XMRb RYMSb RVTVQUNSMQMNNLQKTKWLYMZO[Q[SZUWVT RQMONMQLTLXMZ RObVb",2168:" 26IZJQKOMMPMQNQPPTN[ ROMPNPPOTM[ RPTRPTNVMXMYNYOXPWOXN",2169:" 28J[XOXPYPYOXNUMRMONNONQORVVWW RNPOQVUWVWYVZS[P[MZLYLXMXMY",2170:" 18KYTFPTOXOZP[S[UYVW RUFQTPXPZQ[ RNMWM",2171:" 37F]GQHOJMMMNNNQLWLYN[ RLMMNMQKWKYLZN[P[RZTXVT RXMVTUXUZV[Y[[Y\\W RYMWTVXVZW[",2172:" 26H\\IQJOLMOMPNPQNWNYP[ RNMONOQMWMYNZP[Q[TZVXXUYQYMXMYO",2173:" 41C`DQEOGMJMKNKQIWIYK[ RIMJNJQHWHYIZK[M[OZQXRV RTMRVRYSZU[W[YZ[X\\V]R]M\\M]O RUMSVSYU[",2174:" 42H\\KQMNOMRMSOSR RQMRORRQVPXNZL[K[JZJYKXLYKZ RQVQYR[U[WZYW RYNXOYPZOZNYMXMVNTPSRRVRYS[",2175:" 41G\\HQIOKMNMONOQMWMYO[ RMMNNNQLWLYMZO[Q[SZUXWT RZMV[U^SaPbMbKaJ`J_K^L_K` RYMU[T^RaPb",2176:" 31H\\YMXOVQNWLYK[ RLQMOOMRMVO RMOONRNVOXO RLYNYRZUZWY RNYR[U[WYXW",2177:" 43G^VGUHVIWHWGUFRFOGMILLL[ RRFPGNIMLM[ R\\G[H\\I]H]G\\FZFXGWIW[ RZFYGXIX[ RIM[M RI[P[ RT[[[",2178:" 33G]WGVHWIXHWGUFRFOGMILLL[ RRFPGNIMLM[ RWMW[ RXMX[ RIMXM RI[P[ RT[[[",2179:" 35G]VGUHVIWHWGUF RXFRFOGMILLL[ RRFPGNIMLM[ RWHW[ RXFX[ RIMWM RI[P[ RT[[[",2180:" 54BcRGQHRISHRGPFMFJGHIGLG[ RMFKGIIHLH[ R]G\\H]I^H]G[FXFUGSIRLR[ RXFVGTISLS[ R]M][ R^M^[ RDM^M RD[K[ RO[V[ RZ[a[",2181:" 56BcRGQHRISHRGPFMFJGHIGLG[ RMFKGIIHLH[ R\\G[H\\I]H]G[F R^FXFUGSIRLR[ RXFVGTISLS[ R]H][ R^F^[ RDM]M RD[K[ RO[V[ RZ[a[",2182:" 12MXRMR[ RSMS[ ROMSM RO[V[",2184:" 25IZWNUMRMONMPLSLVMYNZQ[T[VZ RRMPNNPMSMVNYOZQ[ RMTUT",2185:" 43I\\TFQGOJNLMOLTLXMZO[Q[TZVWWUXRYMYIXGVFTF RTFRGPJOLNOMTMXNZO[ RQ[SZUWVUWRXMXIWGVF RNPWP",2186:" 42G]UFOb RVFNb RQMMNKPJSJVKXMZP[S[WZYXZUZRYPWNTMQM RQMNNLPKSKVLXNZP[ RS[VZXXYUYRXPVNTM",2187:" 27I[TMVNXPXOWNTMQMNNMOLQLSMUOWSZ RQMONNOMQMSNUSZT\\T^S_Q_",2190:" 45G]LMKNJPJRKUOYP[ RJRKTOXP[P]O`MbLbKaJ_J\\KXMTOQRNTMVMYNZPZTYXWZU[T[SZSXTWUXTY RVMXNYPYTXXWZ",2191:" 69E_YGXHYIZHYGWFTFQGOINKMNLRJ[I_Ha RTFRGPIOKNNLWK[J^I`HaFbDbCaC`D_E`Da R_G^H_I`H`G_F]F[GZHYJXMU[T_Sa R]F[HZJYNWWV[U^T`SaQbObNaN`O_P`Oa RIM^M",2192:" 52F^[GZH[I\\H[GXFUFRGPIOKNNMRK[J_Ia RUFSGQIPKONMWL[K^J`IaGbEbDaD`E_F`Ea RYMWTVXVZW[Z[\\Y]W RZMXTWXWZX[ RJMZM",2193:" 54F^YGXHYIZHZGXF R\\FUFRGPIOKNNMRK[J_Ia RUFSGQIPKONMWL[K^J`IaGbEbDaD`E_F`Ea R[FWTVXVZW[Z[\\Y]W R\\FXTWXWZX[ RJMYM",2194:" 86@cTGSHTIUHTGRFOFLGJIIKHNGRE[D_Ca ROFMGKIJKINGWF[E^D`CaAb?b>a>`?_@`?a R`G_H`IaH`G]FZFWGUITKSNRRP[O_Na RZFXGVIUKTNRWQ[P^O`NaLbJbIaI`J_K`Ja R^M\\T[X[Z\\[_[aYbW R_M]T\\X\\Z][ RDM_M",2195:" 88@cTGSHTIUHTGRFOFLGJIIKHNGRE[D_Ca ROFMGKIJKINGWF[E^D`CaAb?b>a>`?_@`?a R^G]H^I_H_G]F RaFZFWGUITKSNRRP[O_Na RZFXGVIUKTNRWQ[P^O`NaLbJbIaI`J_K`Ja R`F\\T[X[Z\\[_[aYbW RaF]T\\X\\Z][ RDM^M",2196:" 20LYMQNOPMSMTNTQRWRZS[ RRMSNSQQWQZR[U[WYXW",2200:" 40H\\QFNGLJKOKRLWNZQ[S[VZXWYRYOXJVGSFQF RQFOGNHMJLOLRMWNYOZQ[ RS[UZVYWWXRXOWJVHUGSF",2201:" 11H\\NJPISFS[ RRGR[ RN[W[",2202:" 45H\\LJMKLLKKKJLHMGPFTFWGXHYJYLXNUPPRNSLUKXK[ RTFVGWHXJXLWNTPPR RKYLXNXSZVZXYYX RNXS[W[XZYXYV",2203:" 47H\\LJMKLLKKKJLHMGPFTFWGXIXLWNTOQO RTFVGWIWLVNTO RTOVPXRYTYWXYWZT[P[MZLYKWKVLUMVLW RWQXTXWWYVZT[",2204:" 13H\\THT[ RUFU[ RUFJUZU RQ[X[",2205:" 39H\\MFKP RKPMNPMSMVNXPYSYUXXVZS[P[MZLYKWKVLUMVLW RSMUNWPXSXUWXUZS[ RMFWF RMGRGWF",2206:" 48H\\WIVJWKXJXIWGUFRFOGMILKKOKULXNZQ[S[VZXXYUYTXQVOSNRNOOMQLT RRFPGNIMKLOLUMXOZQ[ RS[UZWXXUXTWQUOSN",2207:" 31H\\KFKL RKJLHNFPFUIWIXHYF RLHNGPGUI RYFYIXLTQSSRVR[ RXLSQRSQVQ[",2208:" 63H\\PFMGLILLMNPOTOWNXLXIWGTFPF RPFNGMIMLNNPO RTOVNWLWIVGTF RPOMPLQKSKWLYMZP[T[WZXYYWYSXQWPTO RPONPMQLSLWMYNZP[ RT[VZWYXWXSWQVPTO",2209:" 48H\\XMWPURRSQSNRLPKMKLLINGQFSFVGXIYLYRXVWXUZR[O[MZLXLWMVNWMX RQSORMPLMLLMIOGQF RSFUGWIXLXRWVVXTZR[",2210:"  6MWRYQZR[SZRY",2211:"  8MWR[QZRYSZS\\R^Q_",2212:" 12MWRMQNROSNRM RRYQZR[SZRY",2213:" 14MWRMQNROSNRM RR[QZRYSZS\\R^Q_",2214:" 15MWRFQHRTSHRF RRHRN RRYQZR[SZRY",2215:" 32I[MJNKMLLKLJMHNGPFSFVGWHXJXLWNVORQRT RSFUGVHWJWLVNTP RRYQZR[SZRY",2216:"  6NVRFQM RSFQM",2217:" 12JZNFMM ROFMM RVFUM RWFUM",2218:" 14KYQFOGNINKOMQNSNUMVKVIUGSFQF",2219:"  9JZRFRR RMIWO RWIMO",2220:"  3G][BIb",2221:" 20KYVBTDRGPKOPOTPYR]T`Vb RTDRHQKPPPTQYR\\T`",2222:" 20KYNBPDRGTKUPUTTYR]P`Nb RPDRHSKTPTTSYR\\P`",2223:" 12KYOBOb RPBPb ROBVB RObVb",2224:" 12KYTBTb RUBUb RNBUB RNbUb",2225:" 40KYTBRCQDPFPHQJRKSMSOQQ RRCQEQGRISJTLTNSPORSTTVTXSZR[Q]Q_Ra RQSSUSWRYQZP\\P^Q`RaTb",2226:" 40KYPBRCSDTFTHSJRKQMQOSQ RRCSESGRIQJPLPNQPURQTPVPXQZR[S]S_Ra RSSQUQWRYSZT\\T^S`RaPb",2227:"  4KYUBNRUb",2228:"  4KYOBVROb",2229:"  3NVRBRb",2230:"  6KYOBOb RUBUb",2231:"  3E_IR[R",2232:"  6E_RIR[ RIR[R",2233:"  9F^RJR[ RJRZR RJ[Z[",2234:"  9F^RJR[ RJJZJ RJRZR",2235:"  6G]KKYY RYKKY",2236:"  6MWRQQRRSSRRQ",2237:" 15E_RIQJRKSJRI RIR[R RRYQZR[SZRY",2238:"  6E_IO[O RIU[U",2239:"  9E_YIK[ RIO[O RIU[U",2240:"  9E_IM[M RIR[R RIW[W",2241:"  4F^ZIJRZ[",2242:"  4F^JIZRJ[",2243:" 10F^ZFJMZT RJVZV RJ[Z[",2244:" 10F^JFZMJT RJVZV RJ[Z[",2245:" 21F_[WYWWVUTRPQOONMNKOJQJSKUMVOVQURTUPWNYM[M",2246:" 24F^IUISJPLONOPPTSVTXTZS[Q RISJQLPNPPQTTVUXUZT[Q[O",2247:"  8G]JTROZT RJTRPZT",2248:"  7LXTFOL RTFUGOL",2249:"  7LXPFUL RPFOGUL",2250:" 18H\\KFLHNJQKSKVJXHYF RKFLINKQLSLVKXIYF",2251:"  8MWRHQGRFSGSIRKQL",2252:"  8MWSFRGQIQKRLSKRJ",2253:"  8MWRHSGRFQGQIRKSL",2254:"  8MWQFRGSISKRLQKRJ",2255:" 10E[HMLMRY RKMR[ R[BR[",2256:" 13F^ZJSJOKMLKNJQJSKVMXOYSZZZ",2257:" 13F^JJJQKULWNYQZSZVYXWYUZQZJ",2258:" 13F^JJQJUKWLYNZQZSYVWXUYQZJZ",2259:" 13F^JZJSKOLMNKQJSJVKXMYOZSZZ",2260:" 16F^ZJSJOKMLKNJQJSKVMXOYSZZZ RJRVR",2261:" 11E_XP[RXT RUMZRUW RIRZR",2262:" 11JZPLRITL RMORJWO RRJR[",2263:" 11E_LPIRLT ROMJROW RJR[R",2264:" 11JZPXR[TX RMURZWU RRIRZ",2265:" 44I\\XRWOVNTMRMONMQLTLWMYNZP[R[UZWXXUYPYKXHWGUFRFPGOHOIPIPH RRMPNNQMTMXNZ RR[TZVXWUXPXKWHUF",2266:" 15H\\JFR[ RKFRY RZFR[ RJFZF RKGYG",2267:" 10AbDMIMRY RHNR[ Rb:R[",2268:" 32F^[CZD[E\\D\\C[BYBWCUETGSJRNPZO^N` RVDUFTJRVQZP]O_MaKbIbHaH`I_J`Ia",2269:" 50F^[CZD[E\\D\\C[BYBWCUETGSJRNPZO^N` RVDUFTJRVQZP]O_MaKbIbHaH`I_J`Ia RQKNLLNKQKSLVNXQYSYVXXVYSYQXNVLSKQK",2270:" 26F_\\S[UYVWVUUTTQPPONNLNJOIQISJULVNVPUQTTPUOWNYN[O\\Q\\S",2271:" 32F^[FI[ RNFPHPJOLMMKMIKIIJGLFNFPGSHVHYG[F RWTUUTWTYV[X[ZZ[X[VYTWT",2272:" 49F_[NZO[P\\O\\N[MZMYNXPVUTXRZP[M[JZIXIUJSPORMSKSIRGPFNGMIMKNNPQUXWZZ[[[\\Z\\Y RM[KZJXJUKSMQ RMKNMVXXZZ[",2273:" 56E`WNVLTKQKOLNMMPMSNUPVSVUUVS RQKOMNPNSOUPV RWKVSVUXVZV\\T]Q]O\\L[JYHWGTFQFNGLHJJILHOHRIUJWLYNZQ[T[WZYYZX RXKWSWUXV",2274:" 42H\\PBP_ RTBT_ RXIWJXKYJYIWGTFPFMGKIKKLMMNOOUQWRYT RKKMMONUPWQXRYTYXWZT[P[MZKXKWLVMWLX",2275:" 12H]SFLb RYFRb RLQZQ RKWYW",2276:" 46JZUITJUKVJVIUGSFQFOGNINKOMQOVR ROMTPVRWTWVVXTZ RPNNPMRMTNVPXU[ RNVSYU[V]V_UaSbQbOaN_N^O]P^O_",2277:" 30JZRFQHRJSHRF RRFRb RRQQTRbSTRQ RLMNNPMNLLM RLMXM RTMVNXMVLTM",2278:" 56JZRFQHRJSHRF RRFRT RRPQRSVRXQVSRRP RRTRb RR^Q`RbS`R^ RLMNNPMNLLM RLMXM RTMVNXMVLTM RL[N\\P[NZL[ RL[X[ RT[V\\X[VZT[",2279:" 12I\\XFX[ RKFXF RPPXP RK[X[",2281:" 38E`QFNGKIILHOHRIUKXNZQ[T[WZZX\\U]R]O\\LZIWGTFQF RROQPQQRRSRTQTPSORO RRPRQSQSPRP",2282:" 45J[PFNGOIQJ RPFOGOI RUFWGVITJ RUFVGVI RQJOKNLMNMQNSOTQUTUVTWSXQXNWLVKTJQJ RRUR[ RSUS[ RNXWX",2283:" 27I\\RFOGMILLLMMPORRSSSVRXPYMYLXIVGSFRF RRSR[ RSSS[ RNWWW",2284:" 28D`PFMGJIHLGOGSHVJYM[P\\T\\W[ZY\\V]S]O\\LZIWGTFPF RRFR\\ RGQ]Q",2285:" 31G`PMMNKPJSJTKWMYPZQZTYVWWTWSVPTNQMPM R]GWG[HUN R]G]M\\IVO R\\HVN",2286:" 28F\\IIJGLFOFQGRIRLQOPQNSKU ROFPGQIQMPPNS RVFT[ RWFS[ RKUYU",2287:" 30I\\MFMU RNFMQ RMQNOONQMTMWNXPXRWTUV RTMVNWPWRTXTZU[W[YY RKFNF",2288:" 44I\\RNOOMQLTLUMXOZR[S[VZXXYUYTXQVOSNRN RRHNJRFRN RSHWJSFSN RRSQTQURVSVTUTTSSRS RRTRUSUSTRT",2289:" 37G^QHRFR[ RTHSFS[ RJHKFKMLPNRQSRS RMHLFLNMQ R[HZFZMYPWRTSSS RXHYFYNXQ RNWWW",2290:" 31G]LFL[ RMFM[ RIFUFXGYHZJZMYOXPUQMQ RUFWGXHYJYMXOWPUQ RI[Y[YVX[",2291:" 24H[YGUGQHNJLMKPKSLVNYQ[U\\Y\\ RYGVHSJQMPPPSQVSYV[Y\\",2292:" 27F_OQMQKRJSIUIWJYKZM[O[QZRYSWSURSQROQ RSHPQ RZJRR R\\QST",2293:" 12H\\OKUY RUKOY RKOYU RYOKU",2294:" 48F^NVLUKUIVHXHYI[K\\L\\N[OYOXNVKRJOJMKJMHPGTGWHYJZMZOYRVVUXUYV[X\\Y\\[[\\Y\\X[VYUXUVV RJMKKMIPHTHWIYKZM",2295:" 48F^NMLNKNIMHKHJIHKGLGNHOJOKNMKQJTJVKYM[P\\T\\W[YYZVZTYQVMUKUJVHXGYG[H\\J\\K[MYNXNVM RJVKXMZP[T[WZYXZV",2317:" 12NVQQQSSSSQQQ RQQSS RSQQS",2318:" 18JZMPQRTTVVWYW[V]U^ RMQST RMRPSTUVWWY",2319:" 18JZWKVMTOPQMR RSPMS RUFVGWIWKVNTPQRMT",2320:" 36H\\SMONLPKRKTLVNWQWUVXTYRYPXNVMSM RXNSM RVMQNLP RONKR RLVQW RNWSVXT RUVYR",2321:" 36H\\SMONLPKRKTLVNWQWUVXTYRYPXNVMSM RXNSM RVMQNLP RONKR RLVQW RNWSVXT RUVYR",2322:" 34J[SMPNNPMRMTNVPWRWUVWTXRXPWNUMSM ROPUM RNRVN RMTWO RNUXP ROVWR RPWVT",2323:" 18JZOGO^ RUFU] RMNWL RMOWM RMWWU RMXWV",2324:" 18JZNFNX RVLV^ RNNVL RNOVM RNWVU RNXVV",2325:" 25JZNBNW RNNQLTLVMWOWQVSSUQVNW RNNQMTMVN RUMVOVQUSSU",2326:" 18E_HIHL R\\I\\L RHI\\I RHJ\\J RHK\\K RHL\\L",2327:" 18JZMNMQ RWNWQ RMNWN RMOWO RMPWP RMQWQ",2328:" 49JZMLWX RMLONQOTOVNWMWKUKUMTO RONTO RQOWM RVKVN RULWL RWXUVSUPUNVMWMYOYOWPU RUVPU RSUMW RNVNY RMXOX",2329:" 26JZPOOMOKMKMMNNPOSOUNWL RNKNN RMLOL RMMSO RPOUN RWLWY",2330:" 86A^GfHfIeIdHcGcFdFfGhIiKiNhPfQdR`RUQ;Q4R/S-U,V,X-Y/Y3X6W8U;P?JCHEFHEJDNDREVGYJ[N\\R\\V[XZZW[T[PZMYKWITHPHMIKKJNJRKUMW RGdGeHeHdGd RU;Q?LCIFGIFKENERFVGXJ[ RR\\U[WZYWZTZPYMXKVITH",2331:"103EfNSOUQVSVUUVSVQUOSNQNOONPMSMVNYP[S\\V\\Y[[Y\\W]T]P\\MZJXIUHRHOIMJKLIOHSHXI]KaMcPeTfYf]e`cba RKLJNIRIXJ\\L`NbQdUeYe]d_cba RPOTO ROPUP RNQVQ RNRVR RNSVS ROTUT RPUTU RaLaNcNcLaL RbLbN RaMcM RaVaXcXcVaV RbVbX RaWcW",2332:" 30D`H@Hd RM@Md RW@Wd R\\@\\d RMMWK RMNWL RMOWM RMWWU RMXWV RMYWW",2367:" 12NVQQQSSSSQQQ RQQSS RSQQS",2368:" 18JZMPQRTTVVWYW[V]U^ RMQST RMRPSTUVWWY",2369:" 18JZWKVMTOPQMR RSPMS RUFVGWIWKVNTPQRMT",2370:" 32H\\PMMNLOKQKSLUMVPWTWWVXUYSYQXOWNTMPM RMNLPLSMUNVPW RWVXTXQWOVNTM",2371:" 36H\\SMONLPKRKTLVNWQWUVXTYRYPXNVMSM RXNSM RVMQNLP RONKR RLVQW RNWSVXT RUVYR",2372:" 34J[SMPNNPMRMTNVPWRWUVWTXRXPWNUMSM ROPUM RNRVN RMTWO RNUXP ROVWR RPWVT",2373:" 18JZOGO^ RUFU] RMNWL RMOWM RMWWU RMXWV",2374:" 18JZNFNX RVLV^ RNNVL RNOVM RNWVU RNXVV",2375:" 25JZNBNW RNNQLTLVMWOWQVSSUQVNW RNNQMTMVN RUMVOVQUSSU",2376:" 18E_HIHL R\\I\\L RHI\\I RHJ\\J RHK\\K RHL\\L",2377:" 18JZMNMQ RWNWQ RMNWN RMOWO RMPWP RMQWQ",2378:" 36JZQCVMRTRU RULQS RTITKPRRUUY RW\\UYSXQXOYN[N]O_Ra RW\\UZSYOYO]P_Ra RSXPZN]",2379:" 26JZPOOMOKMKMMNNPOSOUNWL RNKNN RMLOL RMMSO RPOUN RWLSY",2380:" 86A^GfHfIeIdHcGcFdFfGhIiKiNhPfQdR`RUQ;Q4R/S-U,V,X-Y/Y3X6W8U;P?JCHEFHEJDNDREVGYJ[N\\R\\V[XZZW[T[PZMYKWITHPHMIKKJNJRKUMW RGdGeHeHdGd RU;Q?LCIFGIFKENERFVGXJ[ RR\\U[WZYWZTZPYMXKVITH",2381:" 89IjNQOOQNSNUOVQVSUUSVQVOUNTMQMNNKPISHWH[I^K`NaRaW`[_]]`ZcVfQiMk RWHZI]K_N`R`W_[^]\\`YcTgQi RPOTO ROPUP RNQVQ RNRVR RNSVS ROTUT RPUTU ReLeNgNgLeL RfLfN ReMgM ReVeXgXgVeV RfVfX ReWgW",2382:" 85D`H>Hf RI>If RM>Mf RQBSBSDQDQAR?T>W>Y?[A\\D\\I[LYNWOUOSNRLQNOQNROSQVRXSVUUWUYV[X\\[\\`[cYeWfTfReQcQ`S`SbQb RRBRD RQCSC RY?ZA[D[IZLYN RRLRNPQNRPSRVRX RYVZX[[[`ZcYe RR`Rb RQaSa",2401:" 21AcHBHb RIBIb R[B[b R\\B\\b RDB`B RDbMb RWb`b",2402:" 23BaGBQPFb RFBPP REBPQ REB\\B^I[B RGa\\a RFb\\b^[[b",2403:" 28I[X+U1R8P=OANFMNMVN^OcPgRlUsXy RU1S6Q<P@OFNNNVO^PdQhSnUs",2404:" 28I[L+O1R8T=UAVFWNWVV^UcTgRlOsLy RO1Q6S<T@UFVNVVU^TdShQnOs",2405:" 14I[M+MRMy RN+NRNy RM+X+ RMyXy",2406:" 14I[V+VRVy RW+WRWy RL+W+ RLyWy",2407:" 48I[V+S-Q/P1O4O8P<TDUGUJTMRP RS-Q0P4P8Q;UCVGVJUMRPNRRTUWVZV]UaQiPlPpQtSw RRTTWUZU]T`PhOlOpPsQuSwVy",2408:" 48I[N+Q-S/T1U4U8T<PDOGOJPMRP RQ-S0T4T8S;OCNGNJOMRPVRRTOWNZN]OaSiTlTpStQw RRTPWOZO]P`ThUlUpTsSuQwNy",2409:" 32I[V.S1Q4O8N=NCOIPMSXT\\UbUgTlSoQs RS1Q5P8O=OBPHQLTWU[VaVgUlSpQsNv",2410:" 32I[N.Q1S4U8V=VCUITMQXP\\ObOgPlQoSs RQ1S5T8U=UBTHSLPWO[NaNgOlQpSsVv",2411:' 147Z:RARRo R@RQo R?RRr RZ"VJRr',2412:" 57Ca].\\.[/[0\\1]1^0^.],[+Y+W,U.T0S3R:QJQjPsOv R\\/\\0]0]/\\/ RR:Rj RU.T1S:SZRjQqPtOvMxKyIyGxFvFtGsHsItIuHvGv RGtGuHuHtGt",3001:" 36H\\RFKZ RQIW[ RRIX[ RRFY[ RMUVU RI[O[ RT[[[ RKZJ[ RKZM[ RWZU[ RWYV[ RXYZ[",3002:" 78G]LFL[ RMGMZ RNFN[ RIFUFXGYHZJZLYNXOUP RXHYJYLXN RUFWGXIXMWOUP RNPUPXQYRZTZWYYXZU[I[ RXRYTYWXY RUPWQXSXXWZU[ RJFLG RKFLH ROFNH RPFNG RLZJ[ RLYK[ RNYO[ RNZP[",3003:" 37G\\XIYFYLXIVGTFQFNGLIKKJNJSKVLXNZQ[T[VZXXYV RMILKKNKSLVMX RQFOGMJLNLSMWOZQ[",3004:" 62G]LFL[ RMGMZ RNFN[ RIFSFVGXIYKZNZSYVXXVZS[I[ RWIXKYNYSXVWX RSFUGWJXNXSWWUZS[ RJFLG RKFLH ROFNH RPFNG RLZJ[ RLYK[ RNYO[ RNZP[",3005:" 83G\\LFL[ RMGMZ RNFN[ RIFYFYL RNPTP RTLTT RI[Y[YU RJFLG RKFLH ROFNH RPFNG RTFYG RVFYH RWFYI RXFYL RTLSPTT RTNRPTR RTOPPTQ RLZJ[ RLYK[ RNYO[ RNZP[ RT[YZ RV[YY RW[YX RX[YU",3006:" 70G[LFL[ RMGMZ RNFN[ RIFYFYL RNPTP RTLTT RI[Q[ RJFLG RKFLH ROFNH RPFNG RTFYG RVFYH RWFYI RXFYL RTLSPTT RTNRPTR RTOPPTQ RLZJ[ RLYK[ RNYO[ RNZP[",3007:" 60G^XIYFYLXIVGTFQFNGLIKKJNJSKVLXNZQ[T[VZXZY[YS RMILKKNKSLVMX RQFOGMJLNLSMWOZQ[ RXTXY RWSWYVZ RTS\\S RUSWT RVSWU RZSYU R[SYT",3008:" 81F^KFK[ RLGLZ RMFM[ RWFW[ RXGXZ RYFY[ RHFPF RTF\\F RMPWP RH[P[ RT[\\[ RIFKG RJFKH RNFMH ROFMG RUFWG RVFWH RZFYH R[FYG RKZI[ RKYJ[ RMYN[ RMZO[ RWZU[ RWYV[ RYYZ[ RYZ[[",3009:" 39LXQFQ[ RRGRZ RSFS[ RNFVF RN[V[ ROFQG RPFQH RTFSH RUFSG RQZO[ RQYP[ RSYT[ RSZU[",3010:" 45JYSFSWRZQ[ RTGTWSZ RUFUWTZQ[O[MZLXLVMUNUOVOWNXMX RMVMWNWNVMV RPFXF RQFSG RRFSH RVFUH RWFUG",3011:" 69F\\KFK[ RLGLZ RMFM[ RXGMR RPPW[ RQPX[ RQNY[ RHFPF RUF[F RH[P[ RT[[[ RIFKG RJFKH RNFMH ROFMG RWFXG RZFXG RKZI[ RKYJ[ RMYN[ RMZO[ RWYU[ RWYZ[",3012:" 52I[NFN[ ROGOZ RPFP[ RKFSF RK[Z[ZU RLFNG RMFNH RQFPH RRFPG RNZL[ RNYM[ RPYQ[ RPZR[ RU[ZZ RW[ZY RX[ZX RY[ZU",3013:" 63E_JFJZ RJFQ[ RKFQX RLFRX RXFQ[ RXFX[ RYGYZ RZFZ[ RGFLF RXF]F RG[M[ RU[][ RHFJG R[FZH R\\FZG RJZH[ RJZL[ RXZV[ RXYW[ RZY[[ RZZ\\[",3014:" 39F^KFKZ RKFY[ RLFXX RMFYX RYGY[ RHFMF RVF\\F RH[N[ RIFKG RWFYG R[FYG RKZI[ RKZM[",3015:" 54G]QFNGLIKKJOJRKVLXNZQ[S[VZXXYVZRZOYKXIVGSFQF RMILKKNKSLVMX RWXXVYSYNXKWI RQFOGMJLNLSMWOZQ[ RS[UZWWXSXNWJUGSF",3016:" 59G]LFL[ RMGMZ RNFN[ RIFUFXGYHZJZMYOXPUQNQ RXHYJYMXO RUFWGXIXNWPUQ RI[Q[ RJFLG RKFLH ROFNH RPFNG RLZJ[ RLYK[ RNYO[ RNZP[",3017:" 77G]QFNGLIKKJOJRKVLXNZQ[S[VZXXYVZRZOYKXIVGSFQF RMILKKNKSLVMX RWXXVYSYNXKWI RQFOGMJLNLSMWOZQ[ RS[UZWWXSXNWJUGSF RNXOVQURUTVUXV^W`Y`Z^Z\\ RV\\W^X_Y_ RUXW]X^Y^Z]",3018:" 80G]LFL[ RMGMZ RNFN[ RIFUFXGYHZJZLYNXOUPNP RXHYJYLXN RUFWGXIXMWOUP RRPTQUSWYX[Z[[Y[W RWWXYYZZZ RTQURXXYYZY[X RI[Q[ RJFLG RKFLH ROFNH RPFNG RLZJ[ RLYK[ RNYO[ RNZP[",3019:" 44H\\XIYFYLXIVGSFPFMGKIKLLNOPURWSXUXXWZ RLLMNOOUQWRXT RMGLILKMMONUPXRYTYWXYWZT[Q[NZLXKUK[LX",3020:" 57H\\JFJL RQFQ[ RRGRZ RSFS[ RZFZL RJFZF RN[V[ RKFJL RLFJI RMFJH ROFJG RUFZG RWFZH RXFZI RYFZL RQZO[ RQYP[ RSYT[ RSZU[",3021:" 45F^KFKULXNZQ[S[VZXXYUYG RLGLVMX RMFMVNYOZQ[ RHFPF RVF\\F RIFKG RJFKH RNFMH ROFMG RWFYG R[FYG",3022:" 34H\\KFR[ RLFRXR[ RMFSX RYGR[ RIFPF RUF[F RJFLH RNFMH ROFMG RWFYG RZFYG",3023:" 55F^JFN[ RKFNVN[ RLFOV RRFOVN[ RRFV[ RSFVVV[ RTFWV RZGWVV[ RGFOF RRFTF RWF]F RHFKG RIFKH RMFLH RNFLG RXFZG R\\FZG",3024:" 54H\\KFW[ RLFX[ RMFY[ RXGLZ RIFPF RUF[F RI[O[ RT[[[ RJFMH RNFMH ROFMG RVFXG RZFXG RLZJ[ RLZN[ RWZU[ RWYV[ RWYZ[",3025:" 48G]JFQQQ[ RKFRQRZ RLFSQS[ RYGSQ RHFOF RVF\\F RN[V[ RIFKG RNFLG RWFYG R[FYG RQZO[ RQYP[ RSYT[ RSZU[",3026:" 41H\\YFKFKL RWFK[ RXFL[ RYFM[ RK[Y[YU RLFKL RMFKI RNFKH RPFKG RT[YZ RV[YY RW[YX RX[YU",3051:" 38H\\UFIZ RSJT[ RTHUZ RUFUHVYV[ RLUTU RF[L[ RQ[X[ RIZG[ RIZK[ RTZR[ RTYS[ RVYW[",3052:" 78F^OFI[ RPFJ[ RQFK[ RLFWFZG[I[KZNYOVP RYGZIZKYNXO RWFXGYIYKXNVP RNPVPXQYSYUXXVZR[F[ RWQXSXUWXUZ RVPWRWUVXTZR[ RMFPG RNFOH RRFPH RSFPG RJZG[ RJYH[ RKYL[ RJZM[",3053:" 41H]ZH[H\\F[L[JZHYGWFTFQGOIMLLOKSKVLYMZP[S[UZWXXV RQHOJNLMOLSLWMY RTFRGPJOLNOMSMXNZP[",3054:" 63F]OFI[ RPFJ[ RQFK[ RLFUFXGYHZKZOYSWWUYSZO[F[ RWGXHYKYOXSVWTY RUFWHXKXOWSUWRZO[ RMFPG RNFOH RRFPH RSFPG RJZG[ RJYH[ RKYL[ RJZM[",3055:" 80F]OFI[ RPFJ[ RQFK[ RULST RLF[FZL RNPTP RF[U[WV RMFPG RNFOH RRFPH RSFPG RWFZG RXFZH RYFZI RZFZL RULSPST RTNRPSR RTOQPSQ RJZG[ RJYH[ RKYL[ RJZM[ RP[UZ RR[UY RUYWV",3056:" 70F\\OFI[ RPFJ[ RQFK[ RULST RLF[FZL RNPTP RF[N[ RMFPG RNFOH RRFPH RSFPG RWFZG RXFZH RYFZI RZFZL RULSPST RTNRPSR RTOQPSQ RJZG[ RJYH[ RKYL[ RJZM[",3057:" 65H^ZH[H\\F[L[JZHYGWFTFQGOIMLLOKSKVLYMZP[R[UZWXYT RQHOJNLMOLSLWMY RVXWWXT RTFRGPJOLNOMSMXNZP[ RR[TZVWWT RTT\\T RUTWU RVTWW RZTXV R[TXU",3058:" 81E_NFH[ ROFI[ RPFJ[ RZFT[ R[FU[ R\\FV[ RKFSF RWF_F RLPXP RE[M[ RQ[Y[ RLFOG RMFNH RQFOH RRFOG RXF[G RYFZH R]F[H R^F[G RIZF[ RIYG[ RJYK[ RIZL[ RUZR[ RUYS[ RVYW[ RUZX[",3059:" 39KYTFN[ RUFO[ RVFP[ RQFYF RK[S[ RRFUG RSFTH RWFUH RXFUG ROZL[ ROYM[ RPYQ[ ROZR[",3060:" 47I\\WFRWQYO[ RXFTSSVRX RYFUSSXQZO[M[KZJXJVKULUMVMWLXKX RKVKWLWLVKV RTF\\F RUFXG RVFWH RZFXH R[FXG",3061:" 72F]OFI[ RPFJ[ RQFK[ R\\GMR RQOU[ RROV[ RSNWZ RLFTF RYF_F RF[N[ RR[Y[ RMFPG RNFOH RRFPH RSFPG RZF\\G R^F\\G RJZG[ RJYH[ RKYL[ RJZM[ RUZS[ RUYT[ RVYX[",3062:" 49H\\QFK[ RRFL[ RSFM[ RNFVF RH[W[YU ROFRG RPFQH RTFRH RUFRG RLZI[ RLYJ[ RMYN[ RLZO[ RR[WZ RT[XX RV[YU",3063:" 68D`MFGZ RMGNYN[ RNFOY ROFPX R[FPXN[ R[FU[ R\\FV[ R]FW[ RJFOF R[F`F RD[J[ RR[Z[ RKFMG RLFMH R^F\\H R_F\\G RGZE[ RGZI[ RVZS[ RVYT[ RWYX[ RVZY[",3064:" 43F_OFIZ ROFV[ RPFVX RQFWX R\\GWXV[ RLFQF RYF_F RF[L[ RMFPG RNFPH RZF\\G R^F\\G RIZG[ RIZK[",3065:" 56G]SFPGNILLKOJSJVKYLZN[Q[TZVXXUYRZNZKYHXGVFSF ROIMLLOKSKWLY RUXWUXRYNYJXH RSFQGOJNLMOLSLXMZN[ RQ[SZUWVUWRXNXIWGVF",3066:" 60F]OFI[ RPFJ[ RQFK[ RLFXF[G\\I\\K[NYPUQMQ RZG[I[KZNXP RXFYGZIZKYNWPUQ RF[N[ RMFPG RNFOH RRFPH RSFPG RJZG[ RJYH[ RKYL[ RJZM[",3067:" 78G]SFPGNILLKOJSJVKYLZN[Q[TZVXXUYRZNZKYHXGVFSF ROIMLLOKSKWLY RUXWUXRYNYJXH RSFQGOJNLMOLSLXMZN[ RQ[SZUWVUWRXNXIWGVF RLXMVOUPURVSXT]U^V^W] RT^U_V_ RSXS_T`V`W]W\\",3068:" 78F^OFI[ RPFJ[ RQFK[ RLFWFZG[I[KZNYOVPNP RYGZIZKYNXO RWFXGYIYKXNVP RRPTQURWXXYYYZX RWYXZYZ RURVZW[Y[ZXZW RF[N[ RMFPG RNFOH RRFPH RSFPG RJZG[ RJYH[ RKYL[ RJZM[",3069:" 44G^ZH[H\\F[L[JZHYGVFRFOGMIMLNNPPVSWUWXVZ RNLONVRWT ROGNINKOMUPWRXTXWWYVZS[O[LZKYJWJUI[JYKY",3070:" 54G]TFN[ RUFO[ RVFP[ RMFKL R]F\\L RMF]F RK[S[ RNFKL RPFLI RRFMG RYF\\G RZF\\H R[F\\I R\\F\\L ROZL[ ROYM[ RPYQ[ ROZR[",3071:" 48F_NFKQJUJXKZN[R[UZWXXU\\G ROFLQKUKYLZ RPFMQLULYN[ RKFSF RYF_F RLFOG RMFNH RQFOH RRFOG RZF\\G R^F\\G",3072:" 35H\\NFNHOYO[ ROGPX RPFQW R[GO[ RLFSF RXF^F RMFNH RQFPH RRFOG RYF[G R]F[G",3073:" 57E_MFMHKYK[ RNGLX ROFMW RUFMWK[ RUFUHSYS[ RVGTX RWFUW R]GUWS[ RJFRF RUFWF RZF`F RKFNG RLFMH RPFNI RQFNG R[F]G R_F]G",3074:" 54G]NFT[ ROFU[ RPFV[ R[GIZ RLFSF RXF^F RF[L[ RQ[X[ RMFOH RQFPH RRFPG RYF[G R]F[G RIZG[ RIZK[ RTZR[ RTYS[ RUYW[",3075:" 51G]MFQPN[ RNFRPO[ ROFSPP[ R\\GSP RKFRF RYF_F RK[S[ RLFNG RPFOH RQFNG RZF\\G R^F\\G ROZL[ ROYM[ RPYQ[ ROZR[",3076:" 35G]ZFH[ R[FI[ R\\FJ[ R\\FNFLL RH[V[XU ROFLL RPFMI RRFNG RR[VZ RT[WX RU[XU",3101:" 54I]NPNOOOOQMQMONNPMTMVNWOXQXXYZZ[ RVOWQWXXZ RTMUNVPVXWZZ[[[ RVRUSPTMULWLXMZP[S[UZVX RNUMWMXNZ RUSQTOUNWNXOZP[",3102:" 47G\\LFL[MZOZ RMGMY RIFNFNZ RNPONQMSMVNXPYSYUXXVZS[Q[OZNX RWPXRXVWX RSMUNVOWRWVVYUZS[ RJFLG RKFLH",3103:" 34H[WQWPVPVRXRXPVNTMQMNNLPKSKULXNZQ[S[VZXX RMPLRLVMX RQMONNOMRMVNYOZQ[",3104:" 52H]VFV[[[ RWGWZ RSFXFX[ RVPUNSMQMNNLPKSKULXNZQ[S[UZVX RMPLRLVMX RQMONNOMRMVNYOZQ[ RTFVG RUFVH RXYY[ RXZZ[",3105:" 41H[MSXSXQWOVNSMQMNNLPKSKULXNZQ[S[VZXX RWRWQVO RMPLRLVMX RVSVPUNSM RQMONNOMRMVNYOZQ[",3106:" 40KYWHWGVGVIXIXGWFTFRGQHPKP[ RRHQKQZ RTFSGRIR[ RMMVM RM[U[ RPZN[ RPYO[ RRYS[ RRZT[",3107:" 89I\\XNYOZNYMXMVNUO RQMONNOMQMSNUOVQWSWUVVUWSWQVOUNSMQM ROONQNSOU RUUVSVQUO RQMPNOPOTPVQW RSWTVUTUPTNSM RNUMVLXLYM[N\\Q]U]X^Y_ RN[Q\\U\\X] RLYMZP[U[X\\Y^Y_XaUbObLaK_K^L\\O[ RObMaL_L^M\\O[",3108:" 65G^LFL[ RMGMZ RIFNFN[ RNQOOPNRMUMWNXOYRY[ RWOXRXZ RUMVNWQW[ RI[Q[ RT[\\[ RJFLG RKFLH RLZJ[ RLYK[ RNYO[ RNZP[ RWZU[ RWYV[ RYYZ[ RYZ[[",3109:" 43LXQFQHSHSFQF RRFRH RQGSG RQMQ[ RRNRZ RNMSMS[ RN[V[ ROMQN RPMQO RQZO[ RQYP[ RSYT[ RSZU[",3110:" 41KXRFRHTHTFRF RSFSH RRGTG RRMR^QaPb RSNS]R` ROMTMT]S`RaPbMbLaL_N_NaMaM` RPMRN RQMRO",3111:" 61G]LFL[ RMGMZ RIFNFN[ RWNNW RRSY[ RRTX[ RQTW[ RTM[M RI[Q[ RT[[[ RJFLG RKFLH RUMWN RZMWN RLZJ[ RLYK[ RNYO[ RNZP[ RWYU[ RVYZ[",3112:" 31LXQFQ[ RRGRZ RNFSFS[ RN[V[ ROFQG RPFQH RQZO[ RQYP[ RSYT[ RSZU[",3113:" 99AcFMF[ RGNGZ RCMHMH[ RHQIOJNLMOMQNROSRS[ RQORRRZ ROMPNQQQ[ RSQTOUNWMZM\\N]O^R^[ R\\O]R]Z RZM[N\\Q\\[ RC[K[ RN[V[ RY[a[ RDMFN REMFO RFZD[ RFYE[ RHYI[ RHZJ[ RQZO[ RQYP[ RSYT[ RSZU[ R\\ZZ[ R\\Y[[ R^Y_[ R^Z`[",3114:" 65G^LML[ RMNMZ RIMNMN[ RNQOOPNRMUMWNXOYRY[ RWOXRXZ RUMVNWQW[ RI[Q[ RT[\\[ RJMLN RKMLO RLZJ[ RLYK[ RNYO[ RNZP[ RWZU[ RWYV[ RYYZ[ RYZ[[",3115:" 46H\\QMNNLPKSKULXNZQ[S[VZXXYUYSXPVNSMQM RMPLRLVMX RWXXVXRWP RQMONNOMRMVNYOZQ[ RS[UZVYWVWRVOUNSM",3116:" 60G\\LMLb RMNMa RIMNMNb RNPONQMSMVNXPYSYUXXVZS[Q[OZNX RWPXRXVWX RSMUNVOWRWVVYUZS[ RIbQb RJMLN RKMLO RLaJb RL`Kb RN`Ob RNaPb",3117:" 55H\\VNVb RWOWa RUNWNXMXb RVPUNSMQMNNLPKSKULXNZQ[S[UZVX RMPLRLVMX RQMONNOMRMVNYOZQ[ RSb[b RVaTb RV`Ub RX`Yb RXaZb",3118:" 43IZNMN[ RONOZ RKMPMP[ RWOWNVNVPXPXNWMUMSNQPPS RK[S[ RLMNN RMMNO RNZL[ RNYM[ RPYQ[ RPZR[",3119:" 43J[WOXMXQWOVNTMPMNNMOMQNSPTUUWVXY RNNMQ RNRPSUTWU RXVWZ RMONQPRUSWTXVXYWZU[Q[OZNYMWM[NY",3120:" 22KZPHPVQYRZT[V[XZYX RQHQWRY RPHRFRWSZT[ RMMVM",3121:" 43G^LMLVMYNZP[S[UZVYWW RMNMWNY RIMNMNWOZP[ RWMW[\\[ RXNXZ RTMYMY[ RJMLN RKMLO RYYZ[ RYZ[[",3122:" 31I[LMR[ RMMRY RNMSY RXNSYR[ RJMQM RTMZM RKMNO RPMNN RVMXN RYMXN",3123:" 45F^JMN[ RKMNX RLMOX RRMOXN[ RRMV[ RSMVX RRMTMWX RZNWXV[ RGMOM RWM]M RHMKN RNMLN RXMZN R\\MZN",3124:" 48H\\LMV[ RMMW[ RNMX[ RWNMZ RJMQM RTMZM RJ[P[ RS[Z[ RKMMN RPMNN RUMWN RYMWN RMZK[ RMZO[ RVZT[ RWZY[",3125:" 40H[LMR[ RMMRY RNMSY RXNSYP_NaLbJbIaI_K_KaJaJ` RJMQM RTMZM RKMNO RPMNN RVMXN RYMXN",3126:" 41I[VML[ RWMM[ RXMN[ RXMLMLQ RL[X[XW RMMLQ RNMLP ROMLO RQMLN RS[XZ RU[XY RV[XX RW[XW",3151:" 50G]WMUTUXVZW[Y[[Y\\W RXMVTVZ RWMYMWTVX RUTUQTNRMPMMNKQJTJVKYLZN[P[RZSYTWUT RNNLQKTKWLY RPMNOMQLTLWMZN[",3152:" 52I\\PFNMMSMWNYOZQ[S[VZXWYTYRXOWNUMSMQNPOOQNT RQFOMNQNWOZ RVYWWXTXQWO RMFRFPMNT RS[UYVWWTWQVNUM RNFQG ROFPH",3153:" 34I[WQWPVPVRXRXPWNUMRMONMQLTLVMYNZP[R[UZWW ROONQMTMWNY RRMPOOQNTNWOZP[",3154:" 58G]YFVQUUUXVZW[Y[[Y\\W RZFWQVUVZ RVF[FWTVX RUTUQTNRMPMMNKQJTJVKYLZN[P[RZSYTWUT RMOLQKTKWLY RPMNOMQLTLWMZN[ RWFZG RXFYH",3155:" 33I[MVQUTTWRXPWNUMRMONMQLTLVMYNZP[R[UZWX ROONQMTMWNY RRMPOOQNTNWOZP[",3156:" 45JZZHZGYGYI[I[GZFXFVGTISKRNQRO[N^M`Kb RTJSMRRP[O^ RXFVHUJTMSRQZP]O_MaKbIbHaH_J_JaIaI` RNMYM",3157:" 57H]XMT[S^QaOb RYMU[S_ RXMZMV[T_RaObLbJaI`I^K^K`J`J_ RVTVQUNSMQMNNLQKTKVLYMZO[Q[SZTYUWVT RNOMQLTLWMY RQMOONQMTMWNZO[",3158:" 41G]OFI[K[ RPFJ[ RLFQFK[ RMTOPQNSMUMWNXPXSVX RWNWRVVVZ RWPUUUXVZW[Y[[Y\\W RMFPG RNFOH",3159:" 35KXSFSHUHUFSF RTFTH RSGUG RLQMOOMQMRNSPSSQX RRNRRQVQZ RRPPUPXQZR[T[VYWW",3160:" 45KXUFUHWHWFUF RVFVH RUGWG RMQNOPMRMSNTPTSRZQ]P_NaLbJbIaI_K_KaJaJ` RSNSSQZP]O_ RSPRTP[O^N`Lb",3161:" 49G]OFI[K[ RPFJ[ RLFQFK[ RYOYNXNXPZPZNYMWMUNQROS RMSOSQTRUTYUZWZ RQUSYTZ ROSPTRZS[U[WZYW RMFPG RNFOH",3162:" 26LXTFQQPUPXQZR[T[VYWW RUFRQQUQZ RQFVFRTQX RRFUG RSFTH",3163:" 61@cAQBODMFMGNHPHSF[ RGNGSE[ RGPFTD[F[ RHSJPLNNMPMRNSPSSQ[ RRNRSP[ RRPQTO[Q[ RSSUPWNYM[M]N^P^S\\X R]N]R\\V\\Z R]P[U[X\\Z][_[aYbW",3164:" 42F^GQHOJMLMMNNPNSL[ RMNMSK[ RMPLTJ[L[ RNSPPRNTMVMXNYPYSWX RXNXRWVWZ RXPVUVXWZX[Z[\\Y]W",3165:" 46H\\QMNNLQKTKVLYMZP[S[VZXWYTYRXOWNTMQM RNOMQLTLWMY RVYWWXTXQWO RQMOONQMTMWNZP[ RS[UYVWWTWQVNTM",3166:" 66G]HQIOKMMMNNOPOSNWKb RNNNSMWJb RNPMTIb ROTPQQORNTMVMXNYOZRZTYWWZT[R[PZOWOT RXOYQYTXWWY RVMWNXQXTWWVYT[ RFbNb RJaGb RJ`Hb RK`Lb RJaMb",3167:" 57G\\WMQb RXMRb RWMYMSb RUTUQTNRMPMMNKQJTJVKYLZN[P[RZSYTWUT RMOLQKTKWLY RPMNOMQLTLWMZN[ RNbVb RRaOb RR`Pb RS`Tb RRaUb",3168:" 30I[JQKOMMOMPNQPQTO[ RPNPTN[ RPPOTM[O[ RYOYNXNXPZPZNYMWMUNSPQT",3169:" 47J[XPXOWOWQYQYOXNUMRMONNONQOSQTTUVVWX RONNQ RORQSTTVU RWVVZ RNOOQQRTSVTWVWXVZS[P[MZLYLWNWNYMYMX",3170:" 23KYTFQQPUPXQZR[T[VYWW RUFRQQUQZ RTFVFRTQX RNMXM",3171:" 42F^GQHOJMLMMNNPNSLX RMNMRLVLZ RMPKUKXLZN[P[RZTXVU RXMVUVXWZX[Z[\\Y]W RYMWUWZ RXMZMXTWX",3172:" 29H\\IQJOLMNMONPPPSNX RONORNVNZ ROPMUMXNZP[R[TZVXXUYQYMXMXNYP",3173:" 48CaDQEOGMIMJNKPKSIX RJNJRIVIZ RJPHUHXIZK[M[OZQXRU RTMRURXSZU[W[YZ[X]U^Q^M]M]N^P RUMSUSZ RTMVMTTSX",3174:" 51G]JQLNNMPMRNSPSR RPMQNQRPVOXMZK[I[HZHXJXJZIZIY RRORRQVQY RZOZNYNYP[P[NZMXMVNTPSRRVRZS[ RPVPXQZS[U[WZYW",3175:" 49G]HQIOKMMMNNOPOSMX RNNNRMVMZ RNPLULXMZO[Q[SZUXWT RYMU[T^RaPb RZMV[T_ RYM[MW[U_SaPbMbKaJ`J^L^L`K`K_",3176:" 39H\\YMXOVQNWLYK[ RXOOOMPLR RVORNONNO RVORMOMMOLR RLYUYWXXV RNYRZUZVY RNYR[U[WYXV",3200:" 50H\\QFNGLJKOKRLWNZQ[S[VZXWYRYOXJVGSFQF RNHMJLNLSMWNY RVYWWXSXNWJVH RQFOGNIMNMSNXOZQ[ RS[UZVXWSWNVIUGSF",3201:" 28H\\QHQ[ RRHRZ RSFS[ RSFPINJ RM[W[ RQZO[ RQYP[ RSYT[ RSZU[",3202:" 62H\\LJLKMKMJLJ RLIMINJNKMLLLKKKJLHMGPFTFWGXHYJYLXNUPPRNSLUKXK[ RWHXJXLWN RTFVGWJWLVNTPPR RKYLXNXSYWYYX RNXSZWZXY RNXS[W[XZYXYV",3203:" 76H\\LJLKMKMJLJ RLIMINJNKMLLLKKKJLHMGPFTFWGXIXLWNTO RVGWIWLVN RSFUGVIVLUNSO RQOTOVPXRYTYWXYWZT[P[MZLYKWKVLUMUNVNWMXLX RWRXTXWWY RSOUPVQWTWWVZT[ RLVLWMWMVLV",3204:" 28H\\SIS[ RTHTZ RUFU[ RUFJUZU RP[X[ RSZQ[ RSYR[ RUYV[ RUZW[",3205:" 55H\\MFKPMNPMSMVNXPYSYUXXVZS[P[MZLYKWKVLUMUNVNWMXLX RWPXRXVWX RSMUNVOWRWVVYUZS[ RLVLWMWMVLV RMFWF RMGUG RMHQHUGWF",3206:" 69H\\VIVJWJWIVI RWHVHUIUJVKWKXJXIWGUFRFOGMILKKOKULXNZQ[S[VZXXYUYTXQVOSNQNOONPMR RNIMKLOLUMXNY RWXXVXSWQ RRFPGOHNJMNMUNXOZQ[ RS[UZVYWVWSVPUOSN",3207:" 43H\\KFKL RYFYIXLTQSSRWR[ RSRRTQWQ[ RXLSQQTPWP[R[ RKJLHNFPFUIWIXHYF RMHNGPGRH RKJLINHPHUI",3208:" 79H\\PFMGLILLMNPOTOWNXLXIWGTFPF RNGMIMLNN RVNWLWIVG RPFOGNINLONPO RTOUNVLVIUGTF RPOMPLQKSKWLYMZP[T[WZXYYWYSXQWPTO RMQLSLWMY RWYXWXSWQ RPONPMSMWNZP[ RT[VZWWWSVPTO",3209:" 69H\\MWMXNXNWMW RWOVQURSSQSNRLPKMKLLINGQFSFVGXIYLYRXVWXUZR[O[MZLXLWMVNVOWOXNYMY RMPLNLKMI RVHWIXLXRWVVX RQSORNQMNMKNHOGQF RSFUGVIWLWSVWUYTZR[",3316:"100E`HQHRISKSMRMOLMJJJHLF RLOJK RKSLRLPJMIKIIJGLFOFQGRHSJSU RSWS\\R^P_M_L^L\\M[N\\M] RQHRJR\\Q^ ROFPGQJQU RQWQ\\P^O_ RSJXF RXFZI[K\\O\\R[UYXV[ RWGZK[N[O RVHXJZM[P[SZVYX RWYUVSU RQUOVMX RWZUWSVPV RV[TXSW RQWOWMX",3404:" 47J[QFNINKOLSNVPWRWUVXTZ ROJOKSMVOWP ROHOIPJUMWOXRXUWXTZQ[ RRNNPNXMY ROPOXRZ RPOPXRYSZ RMYNYPZQ[",3405:" 27KXPUVQSMOPNRNWOYQ[UY RUQRN RPPOROWPYQZ RTRROQOPQPVQXSZ",2668:" 24LZLVNSPRRSRUP[ RPRQSQUO[ RRUTSVRWRVU RVRVUWWXWZV",2670:" 20NVNVPSRO RUFOXOZQ[SZTYVV RVFPXPZQ[ RPNVN"};function et(e){let _=e.w,n=e.h,t=e.elements,R=`<svg xmlns="http://www.w3.org/2000/svg" width="${_}" height="${n}">`;for(let a=0;a<t.length;a++){let l=t[a],{tag:r,x:s,y:i,w:f,h:M}=l;r=="note_head"?(l.stem_dir<0?l.twisted?R+=`<rect x="${s}" y="${i-2}" width="${10}" height="${4}" fill="blue"/>`:R+=`<rect x="${s-10}" y="${i-2}" width="${10}" height="${4}" fill="blue"/>`:l.twisted?R+=`<rect x="${s-10}" y="${i-2}" width="${10}" height="${4}" fill="blue"/>`:R+=`<rect x="${s}" y="${i-2}" width="${10}" height="${4}" fill="blue"/>`,R+=`<text x="${s}" y="${i}" font-size="8" fill="red">${l.duration}</text>`):r=="rest"?(R+=`<rect x="${s-f/2}" y="${i-M/2}" width="${f}" height="${M}" fill="rgba(0,255,0,0.2)" stroke="black"/>`,R+=`<text x="${s-f/2}" y="${i-M/2}" font-size="8">${l.duration}</text>`):r=="accidental"||r=="clef"||r=="timesig_digit"?R+=`<rect x="${s-f/2}" y="${i-M/2}" width="${f}" height="${M}" fill="rgba(255,255,0,0.2)" stroke="black"/>`:r=="beam"?R+=`<line x1="${s}" y1="${i}" x2="${s+f}" y2="${i+M}" stroke="brown" stroke-width="3"/>`:r=="line"?R+=`<line x1="${s}" y1="${i}" x2="${s+f}" y2="${i+M}" stroke="black"/>`:r=="dbg"?R+=`<rect x="${s}" y="${i}" width="${f}" height="${M}" fill="${l.color}" opacity="0.1"/>`:(R+=`<rect x="${s}" y="${i}" width="${f||1}" height="${M||1}" fill="rgba(0,0,0,0.2)" stroke="black"/>`,R+=`<text x="${s}" y="${i}" font-size="5">${r}</text>`)}return R+="</svg>",R}function Z(e,_){return e.map(n=>n.map(t=>_(t[0],t[1])))}function tt(e,_,n,t,R,a,l,r,s){let i=1-s,f=i*i,M=i*f,u=s*s,o=u*s;return[M*e+3*f*s*n+3*i*u*R+o*l,M*_+3*f*s*t+3*i*u*a+o*r]}var Q={};(function(){function _(t,R,a){return R<0?a?t=Z(t,(l,r)=>[l+5,r]):t=Z(t,(l,r)=>[l-6,r]):a?t=Z(t,(l,r)=>[l-6,r]):t=Z(t,(l,r)=>[l+5,r]),t}let n;n=H(2370).polylines,Q.note_whole_up_twist=_(n,-1,!0),Q.note_whole_down_twist=_(n,1,!0),Q.note_whole_up=_(n,-1,!1),Q.note_whole_down=_(n,1,!1),n=H(2371).polylines,n=Z(n,(t,R)=>Ue(t,R,1,.9,.4634)),n=n.slice(0,1).concat(Z(n.slice(0,1),(t,R)=>Ue(t,R,1,.75,.4634))),n=Z(n,(t,R)=>[t*.82+.5,R]),Q.note_half_up_twist=_(n,-1,!0),Q.note_half_down_twist=_(n,1,!0),Q.note_half_up=_(n,-1,!1),Q.note_half_down=_(n,1,!1),n=H(2372).polylines,n=Z(n,(t,R)=>Ue(t,R,1,.8,.4634)),Q.note_fill_up_twist=_(n,-1,!0),Q.note_fill_down_twist=_(n,1,!0),Q.note_fill_up=_(n,-1,!1),Q.note_fill_down=_(n,1,!1),n=H(2317).polylines,Q.dot=Z(n,(t,R)=>[t*1.1,R*1.1]),n=H(2325).polylines,Q.acc_flat=Z(n,(t,R)=>[t*.7,R]),n=H(2324).polylines,Q.acc_nat=Z(n,(t,R)=>[t*.7,R]),n=H(2323).polylines,n=Z(n,(t,R)=>[t*.9,R*1.1-t*.2]),n[3]=Z(n.slice(3,4),(t,R)=>[t,R+.15])[0],n[5]=Z(n.slice(5,6),(t,R)=>[t,R+.15])[0],Q.acc_sharp=n,n=H(2380).polylines,Q.clef_g=Z(n,(t,R)=>We(t,R,-.15)),n=H(2381).polylines,Q.clef_f=Z(n,(t,R)=>[t-9,R]),n=H(2376).polylines,Q.rest_whole=Z(n,(t,R)=>[t*.85,R*1.25+2.25]),n=H(2377).polylines,Q.rest_half=Z(n,(t,R)=>[t,R*1.25+1]),n=H(2378).polylines,Q.rest_quarter=Z(n,(t,R)=>We(t,R,-.1)),n=H(2379).polylines,Q.rest_8=Z(n,(t,R)=>[t,R]);{n=H(2379).polylines;let t=Z(n,(R,a)=>[R,a]);t[t.length-1][t[t.length-1].length-1][0]+=.93,t[t.length-1][t[t.length-1].length-1][1]-=3,n=Z(n,(R,a)=>[R-3.07,a+10]),Q.rest_16=t.concat(n)}{n=H(2379).polylines;let t=Z(n,(l,r)=>[l,r]);t[t.length-1][t[t.length-1].length-1][0]+=.93,t[t.length-1][t[t.length-1].length-1][1]-=3;let R=Z(t,(l,r)=>[l+3.07,r-10]),a=Z(n,(l,r)=>[l-3.07,r+10]);Q.rest_32=R.concat(t).concat(a)}{n=H(2379).polylines;let t=Z(n,(s,i)=>[s,i]);t[t.length-1][t[t.length-1].length-1][0]+=.93,t[t.length-1][t[t.length-1].length-1][1]-=3;let R=Z(t,(s,i)=>[s+4.07,i-10]),a=Z(t,(s,i)=>[s+1,i]),l=Z(n,(s,i)=>[s-2.07,i+10]),r=Z(n,(s,i)=>[s-5.14,i+20]);Q.rest_64=R.concat(a).concat(l).concat(r)}n=H(2368).polylines,n=Z(n,(t,R)=>[t+5,(R+2.5)*1.5]),Q.flag_up=n,n=Z(n,(t,R)=>[t,R]),n[0].pop(),n[0].pop(),n[0][n[0].length-1][1]+=3,Q.flag_mid_up=n,n=H(2369).polylines,n=Z(n,(t,R)=>[t+5,(R-2.5)*1.5]),Q.flag_down=n,n=Z(n,(t,R)=>[t,R]),n[n.length-1].shift(),n[n.length-1].shift(),n[n.length-1][0][1]-=3,Q.flag_mid_down=n;for(let t=0;t<10;t++)n=H(3200+t).polylines,Q["timesig_digit_"+t]=Z(n,(R,a)=>[R,a*.85+1.1]);for(let t=0;t<10;t++)n=H(2200+t).polylines,Q["tuplet_digit_"+t]=Z(n,(R,a)=>[R*.5,a*.5]);{n=[[]];for(let t=0;t<8;t++){let R=t/7*Math.PI;n[0].push([Math.cos(R)*6,1-Math.sin(R)*6])}n.push([[-1,1],[0,0],[1,1],[0,2]]),Q.fermata=n}n=[],n.push([[-8,2],[-5,-1],[-2,2],[1,-1],[4,2],[7,-1]]),n.push([[-4,-2],[-1,1]]),n.push([[2,-2],[5,1]]),Q.mordent=n,n=H(2274).polylines.slice(-2),n=Z(n,(t,R)=>We(-t*.4,R*.6,Math.PI/2)),Q.turn=n,n=Z(H(2670).polylines,(t,R)=>[t*.8-4,R*.8]).concat(Z(H(2668).polylines,(t,R)=>[t*.8+4.5,R*.8-.5])),Q.trill=n,n=Z(H(2218).polylines,(t,R)=>[t,R+8]),Q.flageolet=n,n=Z(H(3316).polylines,(t,R)=>[t*.8-11,R*.8-3]).concat(Z(H(3405).polylines,(t,R)=>[t*.8+0,R*.8])).concat(Z(H(3404).polylines,(t,R)=>[t*.8+8,R*.8])).concat([[[14,6],[15,5],[16,6],[15,7]]]),Q.pedal_on=Z(n,(t,R)=>[t,R+3]);{n=[];for(let t=0;t<8;t++){let R=t/8*Math.PI*2;n=n.concat(Z([[[2,-2],[3,0],[7,-.5],[9,-2],[11,0],[9,2],[7,.5],[3,0],[2,2]]],(a,l)=>We(a*.8,l*.8,R)))}Q.pedal_off=n}n=Z(H(2407).polylines,(t,R)=>[(t-5)*1.25,R/78+.5]),n=Z(n,(t,R)=>R<.5?[t-2*(R/.5)-2,R]:[t-2*(1-R)/.5-2,R]),Q.brace=n})();function Ue(e,_,n,t,R){let a=e*Math.cos(R)-_*Math.sin(R),l=e*Math.sin(R)+_*Math.cos(R);return a*=n,l*=t,[a*Math.cos(-R)-l*Math.sin(-R),a*Math.sin(-R)+l*Math.cos(-R)]}function We(e,_,n){let t=e*Math.cos(n)-_*Math.sin(n),R=e*Math.sin(n)+_*Math.cos(n);return[t,R]}function Ye(e){let{tag:_,x:n,y:t,w:R,h:a}=e;e.pts=[],e.pts1=[];let l=20,r=0,s=e.x,i=e.y,f=e.x+e.w,M=e.y1,u=Math.atan2(M-i,f-s)+Math.PI/2*e.dir,o=Math.cos(u)*a,m=Math.sin(u)*a,F=s*.8+f*.2,h=i*.8+M*.2,S=s*.2+f*.8,U=i*.2+M*.8,L=F+o,W=h+m,V=S+o,E=U+m,O=e.x+e.w*.2,T=e.y+e.dir*a,c=e.x+e.w*.8,I=e.y1+e.dir*a,X=L*.5+O*.5,d=W*.5+T*.5,P=V*.5+c*.5,p=E*.5+I*.5;i+=r,d+=r,p+=r,M+=r,e.control=[[s,i],[X,d],[P,p],[f,M]];let g=[];for(let b=0;b<l;b++){let Y=b/(l-1);e.pts.push(tt(s,i,X,d,P,p,f,M,Y))}g=[];for(let b=2;b<l-2;b++){let Y=1-b/(l-1);e.pts1.push(tt(s,i,X,d-e.dir,P,p-e.dir,f,M,Y))}}function nt(e){let{tag:_,x:n,y:t,w:R,h:a}=e;e.pts=[];function l(r){for(let s=0;s<r.length;s++)r[s].length<=1||e.pts.push(r[s])}if(e.text==ee.PEDAL_ON){let r=Q.pedal_on,s=e.h/24;l(Z(r,(i,f)=>[n+i*s,t+f*s+a/2]))}else if(e.text==ee.PEDAL_OFF){let r=Q.pedal_off,s=e.h/24;l(Z(r,(i,f)=>[n+i*s,t+f*s+a/2]))}else if(e.text==ee.PIANISSISSIMO||e.text==ee.PIANISSIMO||e.text==ee.PIANO||e.text==ee.MEZZO_PIANO||e.text==ee.MEZZO_FORTE||e.text==ee.FORTE||e.text==ee.FORTISSIMO||e.text==ee.FORTISSISSIMO||e.text==ee.SFORZANDO){let r=k(e.text,v.TRIPLEX_ITALIC),s=e.h/30,i=-r/2*s;for(let f=0;f<e.text.length;f++){if(e.text[f]==" "){i+=10*s;continue}let M=se(e.text[f],v.TRIPLEX_ITALIC);if(M===void 0)continue;let u=H(M);l(Z(u.polylines,(o,m)=>[n+i+(o-u.xmin)*s,t+(m+14)*s])),i+=(u.xmax-u.xmin-3)*s}}else{let r=k(e.text,v.DUPLEX_ITALIC),s=e.h/40,i=0;for(let f=0;f<e.text.length;f++){if(e.text[f]==" "){i+=10*s;continue}let M=se(e.text[f],v.DUPLEX_ITALIC);if(M===void 0)continue;let u=H(M);l(Z(u.polylines,(o,m)=>[n+i+(o-u.xmin)*s,t+(m+18)*s])),i+=(u.xmax-u.xmin)*s}}}function fe(e){let _=Infinity,n=Infinity,t=-Infinity,R=-Infinity;for(let a=0;a<e.length;a++)if(Array.isArray(e[a][0]))for(let l=0;l<e[a].length;l++)_=Math.min(_,e[a][l][0]),n=Math.min(n,e[a][l][1]),t=Math.max(t,e[a][l][0]),R=Math.max(R,e[a][l][1]);else _=Math.min(_,e[a][0]),n=Math.min(n,e[a][1]),t=Math.max(t,e[a][0]),R=Math.max(R,e[a][1]);return{x:_,y:n,w:t-_,h:R-n}}function lt(e,_){return e.x<=_.x+_.w&&e.x+e.w>=_.x&&e.y<=_.y+_.h&&e.y+e.h>=_.y}function it(e,_,n){return n.x<=e&&e<=n.x+n.w&&n.y<=_&&_<=n.y+n.h}function Rt(e){let _=[],n=[];for(let R=0;R<e.length;R++)if(e[R].tag=="cue")e[R].pts||nt(e[R]),e[R].bbox||(e[R].bbox=fe(e[R].pts)),n.push(e[R]);else if(e[R].tag=="slur")e[R].pts||Ye(e[R]),e[R].bbox||(e[R].bbox=fe(e[R].pts)),_.push(e[R]);else if(e[R].tag=="cresc"){let{x:a,y:l,w:r,h:s,x1:i,y1:f,w1:M,h1:u}=e[R];e[R].bbox=fe([[a,l],[a+r,l+s],[i,f],[i+M,f+u]]),n.push(e[R])}function t(R,a=5){if(!(a<=0)){for(let l=0;l<_.length;l++)if(lt(R.bbox,_[l].bbox)){let r=!1,s=null;for(let i=0;i<_[l].pts.length;i++)if(it(_[l].pts[i][0],_[l].pts[i][1],R.bbox)){r=!0,s=R.bbox.y+R.bbox.h/2<_[l].bbox.y+_[l].bbox.h/2?-1:1;break}if(r){let i=s*Math.min(4,Math.max(2,a));return R.y+=i,R.bbox.y+=i,R.y1!=null&&(R.y1+=i),R.pts=null,t(R,a-1)}}}}for(let R=0;R<n.length;R++)t(n[R])}function rt(e){let _=[],n=[];for(let R=0;R<e.length;R++)if(e[R].tag=="note_head"){let a=e[R],{x:l,y:r,w:s,h:i}=a;a.bbox||(a.stem_dir<0?a.twisted?a.bbox={x:l,y:r-i/2,w:s,h:i}:a.bbox={x:l-s,y:r-i/2,w:s,h:i}:a.twisted?a.bbox={x:l-s,y:r-i/2,w:s,h:i}:a.bbox={x:l,y:r-i/2,w:s,h:i}),n.push(e[R])}else e[R].tag=="slur"&&(e[R].pts||Ye(e[R]),e[R].bbox||(e[R].bbox=fe(e[R].pts)),_.push(e[R]));function t(R,a=5){if(!(a<=0)){for(let l=0;l<n.length;l++)if(lt(R.bbox,n[l].bbox)){let r=!1,s=R.dir;for(let i=0;i<R.pts.length;i++)if(it(R.pts[i][0],R.pts[i][1],n[l].bbox)){r=!0;break}if(r){let i=s*Math.min(4,Math.max(2,a));return R.y+=i,R.y1+=i,R.bbox.y+=i,R.pts.forEach(f=>{f[1]+=i}),R.pts1.forEach(f=>{f[1]+=i}),t(R,a-1)}}}}for(let R=0;R<_.length;R++)_[R].adjacent||t(_[R])}function st(e,_,n){let t=[];function R(a){for(let l=0;l<a.length;l++)a[l].length<=1||t.push(a[l])}for(let a=0;a<e.length;a++){let l=e[a],{tag:r,x:s,y:i,w:f,h:M}=l;if(r=="note_head"){let u,o=(l.stem_dir<0?"_up":"_down")+(l.twisted?"_twist":"");l.duration>=J.WHOLE?o="note_whole"+o:l.duration>=J.HALF?o="note_half"+o:o="note_fill"+o,u=Q[o],l.mini&&(u=Z(u,(m,F)=>[m/2,F/2])),R(Z(u,(m,F)=>[s+m,i+F]))}else if(r=="dot"){let u=Q.dot;l.mini&&(u=Z(u,(o,m)=>[o/2,m/2])),R(Z(u,(o,m)=>[s+o,i+m]))}else if(r=="accidental"){let u;l.type==y.FLAT?u=Q.acc_flat:l.type==y.NATURAL?u=Q.acc_nat:l.type==y.SHARP&&(u=Q.acc_sharp),l.mini&&(u=Z(u,(o,m)=>[o/2,m/2])),R(Z(u,(o,m)=>[s+o,i+m]))}else if(r=="clef"){let u;l.type==q.TREBLE?u=Q.clef_g:u=Q.clef_f,R(Z(u,(o,m)=>[s+o,i+m]))}else if(r=="rest"){if(l.duration==J.WHOLE){let u=Q.rest_whole;R(Z(u,(o,m)=>[s+o,i+m]))}else if(l.duration==J.HALF){let u=Q.rest_half;R(Z(u,(o,m)=>[s+o,i+m]))}else if(l.duration==J.QUARTER){let u=Q.rest_quarter;R(Z(u,(o,m)=>[s+o,i+m]))}else if(l.duration==J.EIGHTH){let u=Q.rest_8;R(Z(u,(o,m)=>[s+o,i+m]))}else if(l.duration==J.SIXTEENTH){let u=Q.rest_16;R(Z(u,(o,m)=>[s+o,i+m]))}else if(l.duration==J.THIRTYSECOND){let u=Q.rest_32;R(Z(u,(o,m)=>[s+o,i+m]))}else if(l.duration==J.SIXTYFOURTH){let u=Q.rest_64;R(Z(u,(o,m)=>[s+o,i+m]))}}else if(r=="flag")if(l.stem_dir<0){let u=l.is_last?Q.flag_up:Q.flag_mid_up;l.mini&&(u=Z(u,(o,m)=>[o/2,m/2])),R(Z(u,(o,m)=>[s+o,i+m]))}else{let u=l.is_last?Q.flag_down:Q.flag_mid_down;l.mini&&(u=Z(u,(o,m)=>[o/2,m/2])),R(Z(u,(o,m)=>[s+o,i+m]))}else if(r=="beam")for(let u=.3;u<4.66;u+=1.09)t.push([[s,i-u*l.stem_dir],[s+f,i+M-u*l.stem_dir]]);else if(r=="line")t.push([[s,i],[s+f,i+M]]);else if(r=="cresc"){let u=[[[s,i],[s+f,i+M]],[[l.x1,l.y1],[l.x1+l.w1,l.y1+l.h1]]];R(u)}else if(r=="slur")l.pts||Ye(l),t.push(l.pts),t.push(l.pts1);else if(r=="timesig_digit"){let u=Q["timesig_digit_"+l.value];R(Z(u,(o,m)=>[s+o,i+m]))}else if(r=="tuplet_label"){let u=l.label.toString().split(""),o=s+f/2,m=u.length,F=8,h=4,S=o-m/2*F-h,U=o+m/2*F+h;S>=s&&U<=s+f&&(t.push([[s,i],[s,i+M],[S,i+M]]),t.push([[U,i+M],[s+f,i+M],[s+f,i]]));for(let L=0;L<u.length;L++){let W=Q["tuplet_digit_"+u[L]];R(Z(W,(V,E)=>[S+h+F*L+V+4,i+M+E]))}}else if(r=="lyric"){let u=f/k(l.text),o=-4*u;for(let m=0;m<l.text.length;m++){if(l.text[m]==" "){o+=10*u;continue}let F=se(l.text[m]);if(F===void 0)continue;let h=H(F);R(Z(h.polylines,(S,U)=>[s+o+(S-h.xmin)*u,i+(U+12)*u])),o+=(h.xmax-h.xmin)*u}}else if(r=="bold_text"){let u=f/k(l.text,v.TRIPLEX,-2);isNaN(u)&&(u=1);let o=0;for(let m=0;m<l.text.length;m++){if(l.text[m]==" "){o+=10*u;continue}let F=se(l.text[m],v.TRIPLEX);if(F===void 0)continue;let h=H(F);R(Z(h.polylines,(S,U)=>[s+o+(S-h.xmin)*u,i+(U+12)*u])),o+=(h.xmax-h.xmin-2)*u}}else if(r=="regular_text"){let u=f/k(l.text,v.DUPLEX,-2);isNaN(u)&&(u=1);let o=0;for(let m=0;m<l.text.length;m++){if(l.text[m]==" "){o+=10*u;continue}let F=se(l.text[m],v.DUPLEX);if(F===void 0)continue;let h=H(F);R(Z(h.polylines,(S,U)=>[s+o+(S-h.xmin)*u,i+(U+12)*u])),o+=(h.xmax-h.xmin-2)*u}}else if(r=="bracket")if(l.type==te.BRACE){let u=Q.brace;R(Z(u,(o,m)=>[s+o,i+m*M]))}else l.type==te.BRACKET&&(t.push([[s+5,i-12],[s-2,i-8],[s-8,i-7],[s-8,i+M+7],[s-2,i+M+8],[s+5,i+M+12]]),t.push([[s+5,i-12],[s-1,i-8],[s-7,i-6],[s-7,i+M+6],[s-1,i+M+8],[s+5,i+M+12]]),t.push([[s-6,i-5],[s-6,i+M+5]]));else if(r=="articulation"){let u=Math.abs(l.type);if(u==G.STACCATO){let o=Q.dot;R(Z(o,(m,F)=>[s+m,i+F]))}else if(u==G.ACCENT){let o=[[s-5,i-3],[s+5,i],[s-5,i+3]];t.push(o)}else if(u==G.SPICCATO){let o=[[s-1,i-3],[s,i+3],[s+1,i-3],[s-1,i-3]];t.push(o)}else if(u==G.TENUTO){let o=[[s-4,i],[s+4,i]];t.push(o)}else if(u==G.MARCATO){let o=[[s-3,i+3],[s,i-3],[s+3,i+3]];t.push(o)}else if(u==G.UP_BOW){let o=[[s-3,i-3],[s,i+3],[s+3,i-3]];t.push(o)}else if(u==G.TREMBLEMENT){let o=[[[s-4,i],[s+4,i]],[[s,i-4],[s,i+4]]];R(o)}else if(u==G.FERMATA){let o=Q.fermata;R(Z(o,(m,F)=>[s+m,i+F*l.dir]))}else if(u==G.MORDENT){let o=Q.mordent;R(Z(o,(m,F)=>[s+m,i+F]))}else if(u==G.TURN){let o=Q.turn;R(Z(o,(m,F)=>[s+m,i+F]))}else if(u==G.TRILL){let o=Q.trill;R(Z(o,(m,F)=>[s+m,i+F]))}else if(u==G.FLAGEOLET){let o=Q.flageolet;R(Z(o,(m,F)=>[s+m,i+F]))}else{let o=H(se(l.type.toString(),v.TRIPLEX)).polylines;R(Z(o,(m,F)=>[s+m/2,i+F/2]))}if(l.type<0){let o=[[s,i-5],[s,i+5]];t.push(o)}}else if(r=="squiggle"){let u=[],o=[],m=!1,F=Math.ceil(M/8)*8,h=i-(F-M)/2;for(let S=0;S<F;S+=4)u.push([m?s+2:s-2,h+S]),m&&S+4<F&&o.push([[s+2.8,S+h+.8],[s-1.2,S+h+4.8]]),m=!m;t.push(u),R(o)}else r=="cue"&&(l.pts||nt(l),R(l.pts))}return t}function _t(e,_=2){let n=Math.pow(10,_);for(let t=0;t<e.length;t++)for(let R=0;R<e[t].length;R++){let[a,l]=e[t][R];a=Math.round(a*n)/n,l=Math.round(l*n)/n,e[t][R][0]=a,e[t][R][1]=l}}function at(e,{background:_="white"}={}){let n=`<svg xmlns="http://www.w3.org/2000/svg" width="${e.w}" height="${e.h}">`;_&&(n+=`<rect x="0" y="0" width="${e.w}" height="${e.h}" fill="${_}"></rect>`),n+='<path stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" d="';for(let t=0;t<e.polylines.length;t++){n+="M ";for(let R=0;R<e.polylines[t].length;R++)n+=e.polylines[t][R]+" "}return n+='"/>',n+="</svg>",n}function ot(e,{background:_="white",speed:n=.001}={}){let t=e.w,R=e.h,a=e.polylines,l=`<svg xmlns="http://www.w3.org/2000/svg" width="${t}" height="${R}">`;_&&(l+=`<rect x="0" y="0" width="${e.w}" height="${e.h}" fill="${_}"></rect>`);let r=[],s=[],i=0;for(let f=0;f<a.length;f++){let M=0;for(let u=1;u<a[f].length;u++)M+=Math.hypot(a[f][u-1][0]-a[f][u][0],a[f][u-1][1]-a[f][u][1]);r.push(M),s.push(i),i+=M}for(let f=0;f<a.length;f++){let M=r[f];l+=`
    <path 
      stroke="black" 
      stroke-width="1" 
      fill="none" 
      stroke-dasharray="${M}"
      stroke-dashoffset="${M}"
      d="M`;for(let o=0;o<a[f].length;o++)l+=a[f][o]+" ";let u=n*M;l+=`">
    <animate id="a${f}"
      attributeName="stroke-dashoffset" 
      fill="freeze"
      from="${M}" to="${0}" dur="${u}s" 
      begin="${s[f]*n}s;a${f}.end+${1+n*i}s"/>
    />
    <animate id="b${f}"
      attributeName="stroke-dashoffset" 
      fill="freeze"
      from="${0}" to="${M}" dur="${1}s" 
      begin="${n*i}s;b${f}.end+${n*i}s"/>
    />
    </path>`}return l+="</svg>",l}function ut(e){let _=e.w,n=e.h,t=e.polylines;for(var R=`%PDF-1.1
%%\xA5\xB1\xEB
1 0 obj
<< /Type /Catalog
/Pages 2 0 R
>>endobj
    2 0 obj
<< /Type /Pages
/Kids [3 0 R]
/Count 1
/MediaBox [0 0 ${_} ${n}]
>>
endobj
    3 0 obj
<< /Type /Page
/Parent 2 0 R
/Resources
<< /Font
<< /F1
<< /Type /Font
    /Subtype /Type1
/BaseFont /Times-Roman
>>
>>
>>
/Contents [`,a="",l=4,r=0;r<t.length;r++){a+=`${l} 0 obj 
<< /Length 0 >>
 stream
 1 j 1 J 1.5 w
`;for(var s=0;s<t[r].length;s++){var[i,f]=t[r][s];a+=`${i} ${n-f} ${s?"l":"m"} `}a+=`
S
endstream
endobj
`,R+=`${l} 0 R `,l++}return R+=`]
>>
endobj
`,a+=`
trailer
<< /Root 1 0 R 
 /Size 0
 >>startxref

%%EOF
`,R+a}function jt(e,_,n,t,R,a,l){function r(o,m,F){e[m*_+o]=1-(1-e[m*_+o])*(1-F)}function s(o){return Math.floor(o)}function i(o){return s(o+.5)}function f(o){return o-Math.floor(o)}function M(o){return 1-f(o)}function u(o,m,F,h){let S=Math.abs(h-m)>Math.abs(F-o);S&&([o,m]=[m,o],[F,h]=[h,F]),o>F&&([o,F]=[F,o],[m,h]=[h,m]);let U=F-o,W=(h-m)/U;U==0&&(W=1);let V=i(o),E=m+W*(V-o),O=M(o+.5),T=V,c=s(E);S?(r(c,T,M(E)*O),r(c+1,T,f(E)*O)):(r(T,c,M(E)*O),r(T,c+1,f(E)*O));let I=E+W;V=i(F),E=h+W*(V-F),O=f(F+.5);let X=V,d=s(E);if(S?(r(d,X,M(E)*O),r(d+1,X,f(E)*O)):(r(X,d,M(E)*O),r(X,d+1,f(E)*O)),S)for(let P=T+1;P<=X-1;P++)r(s(I),P,M(I)),r(s(I)+1,P,f(I)),I=I+W;else for(let P=T+1;P<=X-1;P++)r(P,s(I),M(I)),r(P,s(I)+1,f(I)),I=I+W}u(t,R,a,l)}function qt(e,_,n){let t=[];t.push(71,73,70,56,57,97),t.push(_&255),t.push(_>>8&255),t.push(n&255),t.push(n>>8&255),t.push(246),t.push(0,0);for(let r=0;r<127;r++)t.push(r*2,r*2,r*2);t.push(255,255,255),t.push(44,0,0,0,0),t.push(_&255),t.push(_>>8&255),t.push(n&255),t.push(n>>8&255),t.push(0,7);let R=~~(_*n/126),a=R*126,l=_*n-a;for(let r=0;r<R;r++){t.push(127),t.push(128);for(let s=0;s<126;s++)t.push(~~(e[r*126+s]*127))}if(l){t.push(l+1),t.push(128);for(let r=0;r<l;r++)t.push(~~(e[a+r]*127))}return t.push(1,129,0,59),t}function Mt(e,{scale:_=1,iter:n=2}={}){let t=1/_,R=~~(e.w/t),a=~~(e.h/t),l=e.polylines,r=new Array(R*a).fill(0);for(var s=0;s<l.length;s++)for(var i=0;i<l[s].length-1;i++){let M=l[s][i][0]/t,u=l[s][i][1]/t,o=l[s][i+1][0]/t,m=l[s][i+1][1]/t;for(let F=0;F<n;F++)jt(r,R,a,M,u,o,m)}for(let M=0;M<r.length;M++)r[M]=1-r[M];return qt(r,R,a)}var ft=4,Xe=1<<ft,Nt=8,zt=1<<Nt,le=4095,en=4,tn=.5,Ee=function(e){return .5*(1-Math.cos(e*Math.PI))},ne;function Ie(e,_=0,n=0){if(ne==null){ne=new Array(le+1);for(let h=0;h<le+1;h++)ne[h]=Math.random()}e<0&&(e=-e),_<0&&(_=-_),n<0&&(n=-n);let t=Math.floor(e),R=Math.floor(_),a=Math.floor(n),l=e-t,r=_-R,s=n-a,i,f,M=0,u=.5,o,m,F;for(let h=0;h<en;h++){let S=t+(R<<ft)+(a<<Nt);i=Ee(l),f=Ee(r),o=ne[S&le],o+=i*(ne[S+1&le]-o),m=ne[S+Xe&le],m+=i*(ne[S+Xe+1&le]-m),o+=f*(m-o),S+=zt,m=ne[S&le],m+=i*(ne[S+1&le]-m),F=ne[S+Xe&le],F+=i*(ne[S+Xe+1&le]-F),m+=f*(F-m),o+=Ee(s)*(m-o),M+=o*u,u*=tn,t<<=1,l*=2,R<<=1,r*=2,a<<=1,s*=2,l>=1&&(t++,l--),r>=1&&(R++,r--),s>=1&&(a++,s--)}return M}function nn(e,_,n){let t=[];for(let R=0;R<e.length-1;R++){let a=e[R],l=e[R+1],r=Math.hypot(a[0]-l[0],a[1]-l[1]),s=Math.ceil(r/_);r>=n&&(s=1);for(let i=0;i<s;i++){let f=i/s,M=[a[0]*(1-f)+l[0]*f,a[1]*(1-f)+l[1]*f];t.push(M)}t.push(l.slice())}return t}function ln(e,_,n=1){let t=0;for(let a=0;a<e.length;a++)(e[a].type=="composer"||e[a].type=="tempo"||e[a].type=="title"||e[a].type=="subtitle")&&(t=Math.max(t,e[a].y+e[a].h));let R=[];for(let a=0;a<_.length;a++){let l=[];if(fe(_[a]).y-4<=t)for(let s=0;s<_[a].length;s++){let[i,f]=_[a][s];i+=(Ie(i*.01,f*.01,1+a*.1)*2-1)*2*n,f+=(Ie(i*.01,f*.01,2+a*.1)*2-1)*2*n,i-=Math.min(f*.1,20)*n,f-=Math.min(i*.01,20)*n,l.push([i,f])}else for(let s=0;s<_[a].length;s++){let[i,f]=_[a][s];i+=(Ie(i*.01,f*.01,1+a*.1)*2-1)*6*n,f+=(Ie(i*.01,f*.01,2+a*.1)*2-1)*5*n,i-=Math.min(f*.015,20)*n,f-=Math.min(i*.01,20)*n,l.push([i,f])}R.push(l)}return R}function mt(e,{noise_mul:_=1}={}){let n=e.polylines.map(R=>nn(R,5,500));n=ln(e.elements,n,_);let t=`<svg xmlns="http://www.w3.org/2000/svg" width="${e.w}" height="${e.h}">`;t+=`<rect x="0" y="0" width="${e.w}" height="${e.h}" fill="antiquewhite"></rect>`;for(let R=0;R<n.length;R++){t+=`<path stroke="#2B1100" stroke-opacity="${Math.random()*.1+.6}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none" d="M `;for(let a=0;a<n[R].length;a++)t+=n[R][a]+" ";t+='"/>'}return t+="</svg>",t}var Re={0:["SEQUENCE_NUMBER","value"],1:["TEXT_EVENT","text"],2:["COPYRIGHT_NOTICE","text"],3:["SEQUENCE_OR_TRACK_NAME","text"],4:["INSTRUMENT_NAME","text"],5:["LYRIC","text"],6:["MARKER","text"],7:["CUE_POINT","text"],32:["CHANNEL_PREFIX","value"],33:["PORT","value"],47:["END_OF_TRACK"],84:["SMPTE_OFFSET","hour","min","sec","frame","frac_frame"],81:["SET_TEMPO","data"],88:["TIME_SIGNATURE","numerator","denominator_exp","clocks_per_metronome_click","notated_32nd_per_quarter_note"],89:["KEY_SIGNATURE","num_sharps_or_flats","is_minor"],127:["SEQUENCER_SPECIFIC_EVENT","data"]},ce={8:["NOTE_OFF","key","velocity"],9:["NOTE_ON","key","velocity"],10:["POLYPHONIC_KEY_PRESSURE","key","pressure"],11:["CONTROL_CHANGE","controller","value"],12:["PROGRAM_CHANGE","value"],13:["CHANNEL_PRESSURE","value"],14:["PITCH_WHEEL_CHANGE","lsb","msb"]},Pe={2:["SONG_POSITION_POINTER","lsb","msb"],3:["SONG_SELECT","value"],6:["TUNE_REQUEST"],7:["END_OF_EXCLUSIVE"],8:["TIMING_CLOCK"],10:["START"],11:["CONTINUE"],12:["STOP"],14:["ACTIVE_SENSING"],15:["RESET"]},Tt=Object.fromEntries(Object.entries(Re).map(e=>[e[1][0],[e[0],...e[1].slice(1)]])),Ft=Object.fromEntries(Object.entries(ce).map(e=>[e[1][0],[e[0],...e[1].slice(1)]])),ct=Object.fromEntries(Object.entries(Pe).map(e=>[e[1][0],[e[0],...e[1].slice(1)]]));function Ot(e){var F,h,S;let _=0;function n(U){let L=String.fromCharCode(...e.slice(_,_+U));return _+=U,L}function t(){return e[_++]}function R(){let U=(e[_]<<24|e[_+1]<<16|e[_+2]<<8|e[_+3])>>>0;return _+=4,U}function a(){let U=e[_]<<8|e[_+1];return _+=2,U}function l(U){let L=0;for(let W=0;W<U;W++)L=(L<<8|e[_])>>>0,_++;return L}function r(){let U=!1,L=0;do{let W=e[_]&127;L=(L<<7|W)>>>0,U=!(e[_]>>7&1),_++}while(!U);return L}let s=n(4),i=R(),f=a(),M=a(),u=e[_]>>7&1,o={};if(u){let U=a()&32767;o.negative_SMPTE_format=-((~(U>>8)&127)+1),o.ticks_per_frame=U&255}else o.ticks_per_quarter_note=a()&32767;let m=ue(ue({magic:s,num_tracks:M,format:f,time_format:u?"TIME_CODE":"METRIC"},o),{tracks:[]});for(;n(4)=="MTrk";){let U=R(),L=_,W={events:[]};for(;_<L+U;){let V=r(),E={type:"UNDEFINED",delta_time:V,data:{}};if(e[_]==255){let O=(F=Re[e[++_]])!=null?F:["UNDEFINED"];_++;let T=r();E.type=O[0];let c=~~(T/(O.length-1));for(let I=1;I<O.length;I++)if(O[I]=="text")E.data.text=n(c);else if(O[I]=="data")E.data=e.slice(_,_+c),_+=c;else if(E.data[O[I]]=l(c),O[I]=="num_sharps_or_flats"){let X=E.data[O[I]];X>127&&(X=-((~X&255)+1)),E.data[O[I]]=X}}else if(e[_]==240||e[_]==247){E.type="SYSEX",E.data=[];do E.data.push(e[_++]);while(e[_]!=240&&e[_]!=247);E.data.push(e[_++])}else{let O=e[_]>>4&15,T=e[_]&15;_++;let c=["UNDEFINED"];O==15?c=(h=Pe[T])!=null?h:c:c=(S=ce[O])!=null?S:c,c[0]=="UNDEFINED"&&W.events.length&&(_--,T=W.events[W.events.length-1].data.channel,c=Object.values(ce).find(I=>I[0]==W.events[W.events.length-1].type)),E.type=c[0];for(let I=1;I<c.length;I++)E.data[c[I]]=t();E.data.channel=T}W.events.push(E)}m.tracks.push(W)}return m}function Lt(e){let _=[];function n(s){for(let i=0;i<s.length;i++)_.push(s.charCodeAt(i))}function t(s){return _.push(s)}function R(s){_.push(s>>24&255),_.push(s>>16&255),_.push(s>>8&255),_.push(s&255)}function a(s){_.push(s>>8&255),_.push(s&255)}function l(s,i){for(let f=0;f<i;f++)_.push(s>>(i-f-1<<3)&255)}function r(s){let i=[];for(;s>0;)i.push(s&127),s=s>>>7;i.length||i.push(0),i.reverse();for(let f=0;f<i.length-1;f++)i[f]|=128;_.push(...i)}n(e.magic),R(6),a(1),a(e.num_tracks),e.time_format=="METRIC"?a(e.ticks_per_quarter_note):a(e.ticks_per_frame|~(-e.negative_SMPTE_format-1)<<8);for(let s=0;s<e.tracks.length;s++){n("MTrk");let i=_.length;_.push(0,0,0,0);for(let M=0;M<e.tracks[s].events.length;M++){let u=e.tracks[s].events[M];if(r(u.delta_time),Tt[u.type]){let o=Tt[u.type][0];if(t(255),t(Number(o)),Re[o][1]=="text")r(u.data.text.length),n(u.data.text);else if(Re[o][1]=="value")u.type=="SEQUENCE_NUMBER"?(t(2),a(u.data.value)):(t(1),t(u.data.value));else if(Re[o][1]=="data")r(u.data.length),_.push(...u.data);else{r(Re[o].length-1);for(let m=1;m<Re[o].length;m++){let F=u.data[Re[o][m]];Re[o][m]=="num_sharps_or_flats"&&F<0&&(F=(~-F&255)+1),_.push(F)}}}else if(Ft[u.type]){let o=Number(Ft[u.type][0]);_.push(o<<4|u.data.channel);for(let m=1;m<ce[o].length;m++)t(u.data[ce[o][m]])}else if(ct[u.type]){let o=Number(ct[u.type][0]);_.push(15<<4|o);for(let m=1;m<Pe[o].length;m++)t(u.data[Pe[o][m]])}else for(let o=1;o<u.data.length;o++)t(u.data[o])}let f=_.length-i-4;_[i]=f>>24&255,_[i+1]=f>>16&255,_[i+2]=f>>8&255,_[i+3]=f&255}return _}var pe={">":G.ACCENT,"^":G.MARCATO,".":G.STACCATO,"-":G.TENUTO,",":G.SPICCATO,"?":G.FERMATA,"+":G.TREMBLEMENT,t:G.TRILL,o:G.FLAGEOLET,m:G.MORDENT,s:G.TURN,v:G.UP_BOW,"{":G.ARPEGGIATED},Rn=Object.fromEntries(Object.entries(pe).map(e=>[e[1],e[0]]));function ht(e){e=e.replace(/[\n\r\t]/g," ");let _="\uFFFF",n=new RegExp(_,"g"),t="\uFFFE",R=new RegExp(t,"g");e=e.replace(/\\'/g,t),e=e.split("'").map((T,c)=>c%2?T.replace(/ /g,_):T).join("'"),e=e.split(";").filter((T,c)=>!(c%2)).join(" ");let a=e.split(" ").filter(T=>T.length).map(T=>T.replace(n," ").replace(R,"'")),l={title:[],instruments:[],composer:[],slurs:[],measures:[],crescs:[]},r,s,i,f,M,u,o=0,m=[],F=0,h=0,S=0,U=!1,L=[];function W(T){return m[m.length-1]==T}function V(){let T=m[m.length-1];T&&(T=="note"?(m.pop(),i.tuplet&&i.tuplet.display_duration===null&&(i.tuplet.display_duration=i.duration,i.duration=Math.max(1,~~(i.duration*L[L.length-1].mul))),i.tuplet&&L[L.length-1].members.push(i),W("grace")||m.includes("grace")?(s.grace[S]||(s.grace[S]={duration:0,barline:K.NONE,staves:[{clef:s.clef,time_signature:[1,1],key_signature:s.key_signature,notes:[],grace:[],rests:[],voices:1,beams:[]}]}),s.grace[S].staves[0].notes.push(i)):s.notes.push(i),r.duration=Math.max(r.duration,F+i.duration),W("chord")||(F+=i.duration)):T=="rest"?(m.pop(),f.tuplet&&f.tuplet.display_duration===null&&(f.tuplet.display_duration=f.duration,f.duration=Math.max(1,~~(f.duration*L[L.length-1].mul))),f.tuplet&&!U&&L[L.length-1].members.push(f),r.duration=Math.max(r.duration,F+f.duration),F+=f.duration,U||s.rests.push(f)):T=="title"||T=="composer"||T=="instruments"||T=="tempo"?m.pop():T=="slur"?(m.pop(),l.slurs.push(M)):T=="cresc"&&(m.pop(),l.crescs.push(u)))}function E(T){V(),m.push(T)}function O(T){return T[T.length-1]=="."?[96/Number(T.slice(0,-1)),!0]:[64/Number(T),!1]}for(;o<a.length;){let T=a[o];if(T=="end"){if(V(),W("staff"))bt(s),r.staves.push(s);else if(W("measure"))l.measures.push(r);else if(W("chord"))m.includes("grace")?F+=s.grace[S].staves[0].notes[s.grace[S].staves[0].notes.length-1].duration:F+=s.notes[s.notes.length-1].duration;else if(W("voice"))h++,F=0;else if(W("grace"))s.grace[S].duration=Math.max(s.grace[S].duration,F),bt(s.grace[S].staves[0],-1),F=S;else if(W("tuplet")){let c=L.pop(),I=c.members[c.members.length-1].begin-c.begin+c.members[c.members.length-1].duration,X=c.dur-I;for(let d=c.members.length-1;d>=0&&c.members[d].begin==c.members[c.members.length-1].begin;d--)c.members[d].duration+=X;F=c.begin+c.dur}m.pop()}else if(T=="title")E("title");else if(T=="composer")E("composer");else if(T=="instruments")E("instruments");else if(T=="tempo")E("tempo");else if(T=="measure")E("measure"),r={duration:0,barline:K.SINGLE,staves:[]};else if(T=="staff"){if(E("staff"),s={clef:q.TREBLE,time_signature:[4,4],key_signature:[0,0],notes:[],grace:[],rests:[],voices:1,beams:[]},l.measures[l.measures.length-1]&&l.measures[l.measures.length-1].staves[r.staves.length]){let c=l.measures[l.measures.length-1].staves[r.staves.length];s.time_signature[0]=c.time_signature[0],s.time_signature[1]=c.time_signature[1],s.key_signature[0]=c.key_signature[0],s.key_signature[1]=c.key_signature[1],s.clef=c.clef}F=0,h=0}else if(T=="note"){if(E("note"),i={begin:null,duration:null,accidental:null,modifier:!1,octave:null,name:null,voice:null,staff_pos:null,stem_dir:null,prev_in_chord:null,next_in_chord:null,tuplet:null},m[m.length-2]=="grace"&&s.grace[S]&&s.grace[S].staves[0].notes.length){let c=s.grace[S].staves[0].notes;c[c.length-1]&&Object.assign(i,c[c.length-1])}else s.notes[s.notes.length-1]&&Object.assign(i,s.notes[s.notes.length-1]);if(i.begin=F,i.accidental=null,i.voice=h,i.id&&delete i.id,i.lyric&&delete i.lyric,i.articulation&&delete i.articulation,i.cue&&delete i.cue,m[m.length-2]!="grace"){let c=L[L.length-1];i.tuplet&&c?i.tuplet.id!=c.id&&(i.tuplet={id:c.id,display_duration:null,label:c.num}):c&&!i.tuplet?i.tuplet={id:c.id,display_duration:null,label:c.num}:!c&&i.tuplet&&(i.tuplet=null)}else i.tuplet=null}else if(T=="rest")if(E("rest"),f={begin:null,duration:null,voice:null,tuplet:null},U=!1,s.rests[s.rests.length-1]&&Object.assign(f,s.rests[s.rests.length-1]),f.begin=F,f.voice=h,f.cue&&delete f.cue,m[m.length-2]!="grace"){let c=L[L.length-1];f.tuplet&&c?f.tuplet.id!=c.id&&(f.tuplet={id:c.id,display_duration:null,label:c.num}):c&&!f.tuplet?f.tuplet={id:c.id,display_duration:null,label:c.num}:!c&&f.tuplet&&(f.tuplet=null)}else f.tuplet=null;else if(T=="chord")E("chord");else if(T=="grace")E("grace"),S=F,F=0;else if(T=="tuplet")E("tuplet"),L.push({id:Te(),mul:1,begin:F,dur:0,num:3,members:[]});else if(T=="voice")E("voice");else if(T=="slur")E("slur"),M={left:null,right:null,is_tie:!1};else if(T=="tie")E("slur"),M={left:null,right:null,is_tie:!0};else if(T=="cresc")E("cresc"),u={left:null,right:null,val_left:null,val_right:null};else if(W("measure"))(T.startsWith("|")||T.startsWith(":"))&&(T=="|"?r.barline=K.SINGLE:T=="||"?r.barline=K.DOUBLE:T=="|||"?r.barline=K.END:T=="|:"?r.barline=K.REPEAT_BEGIN:T==":|"?r.barline=K.REPEAT_END:T==":|:"&&(r.barline=K.REPEAT_END_BEGIN));else if(W("staff")){if(T=="G")s.clef=q.TREBLE;else if(T=="F")s.clef=q.BASS;else if(T=="~")s.key_signature=[0,0];else if(T.startsWith("b"))s.key_signature=[y.FLAT,T.length];else if(T.startsWith("#"))s.key_signature=[y.SHARP,T.length];else if(T.includes("/")){let c=T.split("/");s.time_signature=[Number(c[0]),Number(c[1])]}}else if(W("note"))if(/^[A-Z].*/.test(T))i.name=T[0],i.octave=Number(T.slice(1));else if(T[0]=="d"){let[c,I]=O(T.slice(1));i.duration=c,i.modifier=I,i.tuplet&&(i.tuplet.display_duration=null)}else T[0]=="$"?i.id=T.slice(1):T[0]=="#"?i.accidental=y.SHARP:T[0]=="b"?i.accidental=y.FLAT:T[0]=="~"?i.accidental=y.NATURAL:T[0]=="l"?i.lyric=T.slice(1).replace(/(^')|('$)/g,""):T[0]=="a"?(pe[T[1]]?i.articulation=pe[T[1]]:i.articulation=Number(T[1]),T[2]=="|"&&(i.articulation=-i.articulation)):T[0]=="|"?i.cue={position:0,data:T.slice(1).replace(/(^')|('$)/g,"")}:T[0]=="["?i.cue={position:-1,data:T.slice(1).replace(/(^')|('$)/g,"")}:T[0]=="]"&&(i.cue={position:1,data:T.slice(1).replace(/(^')|('$)/g,"")});else if(W("rest"))if(T[0]=="d"){let c=64/Number(T.slice(1));f.duration=c,f.tuplet&&(f.tuplet.display_duration=null)}else T[0]=="|"?f.cue={position:0,data:T.slice(1).replace(/(^')|('$)/g,"")}:T[0]=="["?f.cue={position:-1,data:T.slice(1).replace(/(^')|('$)/g,"")}:T[0]=="]"?f.cue={position:1,data:T.slice(1).replace(/(^')|('$)/g,"")}:T[0]=="-"&&(U=!0);else if(W("slur"))T[0]=="$"&&(M.left==null?M.left=T.slice(1):M.right=T.slice(1));else if(W("cresc"))T[0]=="$"?u.left==null?u.left=T.slice(1):u.right=T.slice(1):u.val_left===null?u.val_left=Number(T):u.val_right=Number(T);else if(W("tuplet"))if(T[0]=="d"){let[c,I]=T.slice(1).split("/"),X=O(c)[0],d=O(I)[0];L[L.length-1].mul=X/d,L[L.length-1].dur=X}else{let c=Number(T);L[L.length-1].num=c}else if(W("title"))l.title.push(T.replace(/(^')|('$)/g,""));else if(W("composer"))l.composer.push(T.replace(/(^')|('$)/g,""));else if(W("instruments"))if(T=="{"){for(;l.instruments[l.instruments.length-1]&&l.instruments[l.instruments.length-1].connect_barlines.length<l.instruments[l.instruments.length-1].names.length;)l.instruments[l.instruments.length-1].connect_barlines.push(!1);l.instruments.push({bracket:te.BRACE,names:[],connect_barlines:[]})}else if(T=="["){for(;l.instruments[l.instruments.length-1]&&l.instruments[l.instruments.length-1].connect_barlines.length<l.instruments[l.instruments.length-1].names.length;)l.instruments[l.instruments.length-1].connect_barlines.push(!1);l.instruments.push({bracket:te.BRACKET,names:[],connect_barlines:[]})}else if(T=="|"){for(;l.instruments[l.instruments.length-1]&&l.instruments[l.instruments.length-1].connect_barlines.length<l.instruments[l.instruments.length-1].names.length;)l.instruments[l.instruments.length-1].connect_barlines.push(!1);l.instruments.push({bracket:te.NONE,names:[],connect_barlines:[]})}else if(T=="-")l.instruments[l.instruments.length-1].connect_barlines.push(!0);else{l.instruments.length||l.instruments.push({bracket:te.NONE,names:[],connect_barlines:[]});let c=l.instruments[l.instruments.length-1];c.connect_barlines.length<c.names.length&&c.connect_barlines.push(!1),c.names.push(T.replace(/(^')|('$)/g,""))}else if(W("tempo"))if(l.tempo||(l.tempo={}),T[0]=="d"){let[c,I]=O(T.slice(1));l.tempo.duration=c,l.tempo.modifier=I}else T[0]=="="?l.tempo.bpm=Number(T.slice(1)):l.tempo.text=T.replace(/(^')|('$)/g,"");o++}return V(),l}function bt(e,_=0){for(let M=0;M<e.notes.length;M++)e.voices=Math.max(e.notes[M].voice+1,e.voices);for(let M=0;M<e.rests.length;M++)e.voices=Math.max(e.rests[M].voice+1,e.voices);function n(M){let u=~~(J.WHOLE/M[1]);return u*=M[0]%2||M[0]<=2?M[0]:M[0]/2,u}let t=n(e.time_signature);function R(M){return~~(M.begin/t)}function a(M){let u=[];for(let o of e.notes)R(o)==M&&u.push(o);return u}function l(M){let u;if(M.duration<J.QUARTER){let m=R(M);M.tuplet?u=e.notes.filter(F=>F.tuplet&&F.tuplet.id==M.tuplet.id):u=a(m).filter(F=>F.duration<J.QUARTER)}else{u=[];for(let m of e.notes)m.begin==M.begin&&u.push(m)}return u.reduce((m,F)=>m+F.staff_pos,0)/u.length<4?1:-1}let[r,s]=e.key_signature,i=_e[r].slice(0,s).split(""),f={};for(let M=0;M<e.notes.length;M++){let u=e.notes[M],o=u.name,m=o+"_"+u.octave;u.accidental!=null?(u.name=o+["b","","s"][u.accidental+1],f[m]=u.accidental):f[m]===void 0?i.includes(o)?(u.name=o+["b",null,"s"][r+1],f[m]=r):u.name=o:u.name=o+["b","","s"][f[m]+1],u.name+="_",u.name+=u.octave,u.staff_pos=Me(u.name,e.clef)}for(let M=0;M<e.notes.length;M++){let u=e.notes[M],o;e.voices==1?o=_||l(u):o=u.voice%2?1:-1,u.stem_dir=o}he(e,t)}function St(e){let _="";if(_+=`title '${e.title.map(n=>n.replace(/'/g,"\\'")).join("' '")}'
`,e.composer&&(_+=`composer '${e.composer}'
`),e.tempo&&(_+="tempo",e.tempo.text&&(_+=" '"+e.tempo.text.replace(/'/g,"\\'")+"'"),e.tempo.duration&&(e.tempo.modifier?_+=" d"+(96/e.tempo.duration).toString()+".":_+=" d"+(64/e.tempo.duration).toString(),e.tempo.bpm&&(_+=" ="+e.tempo.bpm)),_+=`
`),e.instruments.length){_+="instruments ";for(let n=0;n<e.instruments.length;n++){_+=["","{","["][e.instruments[n].bracket]+" ";for(let t=0;t<e.instruments[n].names.length;t++)t&&e.instruments[n].connect_barlines[t-1]&&(_+=" - "),_+=`'${e.instruments[n].names[t].replace(/'/g,"\\'")}' `}_+=`
`}for(let n=0;n<e.measures.length;n++){let t=e.measures[n];_+="measure",t.barline==K.DOUBLE?_+=" ||":t.barline==K.REPEAT_BEGIN?_+=" |:":t.barline==K.REPEAT_END?_+=" :|":t.barline==K.END?_+=" |||":t.barline==K.REPEAT_END_BEGIN&&(_+=" :|:"),_+=`
`;for(let R=0;R<t.staves.length;R++){let a=t.staves[R];_+=`  staff ${a.clef==q.TREBLE?"G":"F"} ${["b","","#"][a.key_signature[0]+1].repeat(a.key_signature[1])} ${a.time_signature[0]}/${a.time_signature[1]}
`;for(let l=0;l<a.voices;l++){let s=function(i){var f;for(let M=0;M<i.length;M++)if(!i[M][2]){if(i[M][1].tuplet){let o=function(){let F=-1,h=0,S=0;for(let V=M;V<i.length&&!(!i[V][1].tuplet||i[V][1].tuplet.id!=i[M][1].tuplet.id);V++)i[V][1].begin!=F&&(F=i[V][1].begin,S+=i[V][1].tuplet.display_duration),h=i[V][1].begin-i[M][1].begin+i[V][1].duration;function U(V){return 64/V==~~(64/V)?(~~(64/V)).toString():(~~(96/V)).toString()+"."}let L=U(h),W=U(S);return[L,W]},m=null;for(let F=M-1;F>=0;F--)if(i[F][1].tuplet){m=i[F][1].tuplet.id;break}!i[M-1]||m===null?_+=`   tuplet ${i[M][1].tuplet.label} d${o().join("/")}
`:m!==null&&m!=i[M][1].tuplet.id&&(_+=`   end
   tuplet ${i[M][1].tuplet.label} d${o().join("/")}
`)}else if(i[M-1]&&i[M-1][1].tuplet){let o=null;for(let m=M+1;m<i.length;m++)if(i[m][1].tuplet){o=i[m][1].tuplet.id;break}i[M-1][1].tuplet.id!=o&&(_+=`   end
`)}if(i[M][0]=="note"){let o=i[M][1];for(;o.prev_in_chord!==null;)o=a.notes[o.prev_in_chord];let m=o.next_in_chord!==null;m&&(_+=`    chord
`);do{i.find(U=>U[1]==o)[2]=!0;let F=["note"];F.push(o.name[0]+o.octave),o.accidental!==null&&F.push(["b","~","#"][o.accidental+1]);let h=o.duration;o.tuplet&&(h=o.tuplet.display_duration),o.modifier?F.push("d"+(96/h).toString()+"."):F.push("d"+(64/h).toString()),o.articulation&&F.push("a"+((f=Rn[o.articulation])!=null?f:o.articulation)),o.cue&&F.push(`${["[","|","]"][o.cue.position+1]}'${o.cue.data.replace(/'/g,"\\'")}'`),o.lyric&&F.push(`l'${o.lyric.replace(/'/g,"\\'")}'`);let S="    ";m&&(S+="  "),S+=F.join(" "),o.id&&(S=S.padEnd(50," ")+" $"+o.id),_+=S+`
`,o=a.notes[o.next_in_chord]}while(o);m&&(_+=`    end
`)}else if(i[M][0]=="rest"){let o=i[M][1],m=o.duration;o.tuplet&&(m=o.tuplet.display_duration),_+=`    rest d${64/m}`,o.cue&&(_+=` ${["[","|","]"][o.cue.position+1]}'${o.cue.data.replace(/'/g,"\\'")}'`),_+=`
`}else i[M][0]=="grace"&&(_+=`   grace
`,s(i[M][1].items),_+=`   end
`)}i[i.length-1]&&i[i.length-1][1].tuplet&&(_+=`   end
`)},r=[];for(let i=0;i<a.notes.length;i++)a.notes[i].voice==l&&r.push(["note",a.notes[i],!1]);for(let i=0;i<a.rests.length;i++)a.rests[i].voice==l&&r.push(["rest",a.rests[i],!1]);for(let i=0;i<a.grace.length;i++){if(!a.grace[i])continue;let f=["grace",{begin:i-.001,duration:a.grace[i].duration,items:[]},!1];for(let M=0;M<a.grace[i].staves[0].notes.length;M++){let u=a.grace[i].staves[0].notes[M];u.voice==l&&f[1].items.push(["note",u,!1])}for(let M=0;M<a.grace[i].staves[0].rests.length;M++){let u=a.grace[i].staves[0].rests[M];u.voice==l&&f[1].items.push(["rest",u,!1])}f[1].items.sort((M,u)=>M[1].begin-u[1].begin),f[1].items.length&&r.push(f)}r.sort((i,f)=>i[1].begin-f[1].begin),a.voices>1&&(_+=`   voice
`),s(r),a.voices>1&&(_+=`   end
`)}_+=`  end
`}_+=`end
`}for(let n=0;n<e.slurs.length;n++){let t=e.slurs[n];t.is_tie?_+=`tie $${t.left} $${t.right}
`:_+=`slur $${t.left} $${t.right}
`}for(let n=0;n<e.crescs.length;n++){let t=e.crescs[n];_+=`cresc ${t.val_left} ${t.val_right} $${t.left} $${t.right}
`}return _}var N={PAGE_WIDTH:1200,LINE_HEIGHT:9,NOTE_WIDTH:12,REST_WIDTH_MUL:1,CLEF_WIDTH_MUL:2,TIMESIG_WIDTH_MUL:2,KEYSIG_WIDTH_MUL:.8,ACCIDENTAL_WIDTH_MUL:1.2,LEDGER_WIDTH_MUL:.75,INTER_NOTE_WIDTH:4,DURATION_BASED_SPACING:.05,FLAG_SPACING:.72,MEASURE_PAD_FRONT:12,MEASURE_PAD_BACK:12,INTER_STAFF_HEIGHT:70,INTER_ROW_HEIGHT:100,STEM_LENGTH:2.5,PAGE_MARGIN_X:100,PAGE_MARGIN_Y:50,TITLE_TEXT_SIZE:34,SUBTITLE_TEXT_SIZE:20,TITLE_LINE_SPACING:12,TEMPO_COMPOSER_TEXT_SIZE:14,INSTRUMENT_TEXT_SIZE:16,MEASURE_NUMBER_TEXT_SIZE:12,INSTRUMENT_PAD_RIGHT:20,BEAM_MAX_SLOPE:.4,LINES_PER_STAFF:5,GRACE_WIDTH_MUL:.4,LYRIC_SCALE:.6,LYRIC_SPACING:12,CUE_TEXT_SIZE:22,CUE_HEIGHT:22,SQUIGGLE_WIDTH_MUL:1.5,JUSTIFY_ALIGN_MIN:.75,SLUR_ARC_MUL:1,SHOW_SOLO_INSTRUMENT:0,SHOW_MEASURE_NUMBER:1,HEADBUTT_RESOLVE:1,HEADBUTT_MERGE:1,CUE_EVADE:1,SLUR_EVADE:1,JOIN_STAFF_LINES:1,TUPLET_LABEL_SPACING:1.1,DEBUG_BLOCKS:0},sn=1.5,z=24;function ie(){return N.PAGE_WIDTH-N.PAGE_MARGIN_X*2}var Ne={};function _n(e,_=null){let n=!1;for(let R=0;R<e.notes.length;R++)if(e.notes[R].cue){n=!0;break}if(!n){for(let R=0;R<e.rests.length;R++)if(e.rests[R].cue){n=!0;break}}if(!n&&_&&_.length){for(let R=0;R<e.notes.length;R++)if(e.notes[R].id){for(let a=0;a<_.length;a++)if(_[a].left==e.notes[R].id||_[a].right==e.notes[R].id){n=!0;break}if(n)break}}let t=!1;for(let R=0;R<e.notes.length;R++)if(e.notes[R].lyric){t=!0;break}e.flags.need_cue=n,e.flags.need_lyric=t}function an(e,_,n){let t=e.measures;if(_!=0){let R=t[_-1].staves[n].key_signature,a=t[_].staves[n].key_signature;if(R[0]!=a[0]||R[1]!=a[1]){let[s,i]=R,[f,M]=a;i>0&&M==0?t[_].staves[n].flags.need_keysig={accidental:~s,count:i}:t[_].staves[n].flags.need_keysig={accidental:f,count:M}}let l=t[_-1].staves[n].time_signature,r=t[_].staves[n].time_signature;(l[0]!=r[0]||l[1]!=r[1])&&(t[_].staves[n].flags.need_timesig=!0),t[_-1].staves[n].clef!=t[_].staves[n].clef&&(t[_].staves[n].flags.need_clef=!0)}else{let[R,a]=t[_].staves[n].key_signature;t[_].staves[n].flags.need_keysig={accidental:R,count:a},t[_].staves[n].flags.need_timesig=!0,t[_].staves[n].flags.need_clef=!0}_n(t[_].staves[n],e.crescs)}function on(e,_){let n=e[_],t=n.twisted;if(t)return t;let R=n,a=n;for(;R.prev_in_chord!=null;)R=e[R.prev_in_chord],R.twisted&&(t=!0);if(t)return t;for(;a.next_in_chord!=null;)a=e[a.next_in_chord],a.twisted&&(t=!0);return t}function dt(e){function _(n,t){let R=0;for(;t.prev_in_chord!==null;)t=n[t.prev_in_chord],R++;return R}for(let n=0;n<e.staves.length;n++){let t=e.staves[n];t.coords||(t.coords={x:0,y:0,w:0,local_y_min:0,local_y_max:0,col:0,row:0}),t.flags||(t.flags={need_keysig:null,need_timesig:!1,need_clef:!1,need_cue:!1,need_lyric:!1});for(let a of t.beams)for(let l of a)t.notes[l].beamed=!0;for(let a=0;a<t.notes.length;a++){let l=t.notes[a],r=!1,s=N.STEM_LENGTH,i=l.stem_dir,f=0;if(l.prev_in_chord!==null){let M=l.staff_pos-t.notes[l.prev_in_chord].staff_pos;Math.abs(M)<=1&&_(t.notes,l)%2&&(r=!0)}if(l.next_in_chord!==null){let M=l.staff_pos-t.notes[l.next_in_chord].staff_pos;!r&&Math.abs(M)<=1&&_(t.notes,l)%2&&(r=!0),s=Math.abs(M)/2}else l.tuplet?f=Ve(l.tuplet.display_duration,l.modifier):f=Ve(l.duration,l.modifier);s+=f*N.FLAG_SPACING/2,l.stem_len=s,l.flag_count=f,l.twisted=r,l.slot_shift=0,l.modifier_shift=0}let R=t.beams;for(let a of R){let l=[];for(let i=0;i<a.length;i++)l.push(t.notes[a[i]]);if(!l.length)continue;let r=[];for(let i=0;i<l.length;i++)r.push(l[i].flag_count);let s=Math.max(0,Math.max(...r)-1)*N.FLAG_SPACING;for(let i=0;i<l.length;i++)l[i].stem_len+=s-l[i].flag_count*N.FLAG_SPACING/6}Mn(t)}for(let n=0;n<e.staves.length;n++){let t=e.staves[n];for(let R=0;R<t.grace.length;R++)if(t.grace[R]){dt(t.grace[R]);let a=t.grace[R].staves[0];for(let l=0;l<a.notes.length;l++)a.notes[l].next_in_chord==null&&(a.notes[l].stem_len*=.6);t.grace[R].pad={left:0,inter:N.INTER_NOTE_WIDTH/2,right:0}}}if(e.pad={left:N.MEASURE_PAD_FRONT,inter:N.INTER_NOTE_WIDTH,right:N.MEASURE_PAD_BACK},un(e),N.HEADBUTT_RESOLVE)for(let n=0;n<e.staves.length;n++){let t=e.staves[n];for(let R=0;R<t.notes.length;R++){let i=function(){if(t.voices<=1||s.mid_note<=1||on(t.notes,R))return;let f=s.mid_pack.intervals[a],M=f.find(o=>o.idx==l);if(M.x>0)return;let u=null;for(let o=0;o<f.length;o++)if(f[o].idx!=M.idx&&Wt(f[o].top,f[o].bottom,M.top,M.bottom)){if(u)return;u=t.notes[f[o].idx]}u||(r.stem_dir<0&&(r.slot_shift=-N.NOTE_WIDTH),r.modifier_shift=-N.NOTE_WIDTH)},a=n,l=R,r=t.notes[R],s=e.slots[r.begin];i()}}}function fn(e){for(let _=0;_<e.length;_++){let n=e[_];n.barline==K.DOUBLE?n.pad.right+=4:n.barline==K.END?n.pad.right+=8:n.barline==K.REPEAT_END?n.pad.right+=12:n.barline==K.REPEAT_BEGIN?e[_+1].pad.left+=12:n.barline==K.REPEAT_END_BEGIN&&(n.pad.right+=12,e[_+1].pad.left+=12)}}function mn(e,_){let n=e.staves[_],t=n.beams,R=n.notes,a=e.slots;for(let l of t){let r=[];for(let u=0;u<l.length;u++)r.push(R[l[u]]);if(!r.length)continue;let s=r[0].stem_dir,i=r.map(u=>{let o=u.stem_len;return{x:w(e,u.begin)+N.NOTE_WIDTH*(Number(u.stem_dir<0)*a[u.begin].mid_note),y:A(2*s*o+u.staff_pos)}}),[f,M]=Nn(i);if(Math.abs(f)>N.BEAM_MAX_SLOPE){f=Math.sign(f)*N.BEAM_MAX_SLOPE;let u;s<0?u=i.reduce((o,m)=>m.y<=o.y?m:o,{x:0,y:Infinity}):u=i.reduce((o,m)=>m.y>=o.y?m:o,{x:0,y:-Infinity}),M=u.y-f*u.x}for(let u=0;u<r.length;u++){let o=i[u].x*f+M-A(r[u].staff_pos);Math.sign(o)!=r[u].stem_dir&&(M-=o,o=i[u].x*f+M-A(r[u].staff_pos)),Math.abs(o)<N.LINE_HEIGHT*1.5&&(M+=r[u].stem_dir*N.LINE_HEIGHT*1.5)}for(let u=0;u<r.length;u++){let o=i[u].x*f+M-A(r[u].staff_pos);r[u].stem_len=Math.abs(o)/N.LINE_HEIGHT}l.m=f,l.b=M}}function Tn(e,_){let n=e.staves[_];for(let t=0;t<n.notes.length;t++){let R=n.notes[t];if(R.articulation&&R.articulation!=G.ARPEGGIATED){let a=R,l=R;for(;a.prev_in_chord!=null;)a=n.notes[a.prev_in_chord];for(;l.next_in_chord!=null;)l=n.notes[l.next_in_chord];let r=a.staff_pos,s=l.staff_pos,i=(r%2?r:r-R.stem_dir)-R.stem_dir*2,f=Math.round(s+R.stem_len*R.stem_dir*2),M=(f%2?f:f+R.stem_dir)+R.stem_dir*2,u=0,o=1,m,F;n.voices<=1?R.articulation==G.TRILL?[m,F]=R.stem_dir<0?[o,M]:[u,i]:[m,F]=[u,i]:R.voice%2?R.stem_dir<0?[m,F]=[u,i]:[m,F]=[o,M]:R.stem_dir<0?[m,F]=[o,M]:[m,F]=[u,i],R.articulation_pos=[m,F]}}}function cn(e){let _=e;_.indent=0;let n=new Set;for(let R=0;R<e.instruments.length;R++)for(let a=0;a<e.instruments[R].names.length;a++)n.add(e.instruments[R].names[a]);let t=Array.from(n);if(t.length>1||N.SHOW_SOLO_INSTRUMENT){let R=0;for(let a=0;a<t.length;a++)R=Math.max(R,k(t[a],v.DUPLEX,-2));R*=N.INSTRUMENT_TEXT_SIZE/z,_.indent=R+N.INSTRUMENT_PAD_RIGHT}_.first_col_measure_indices=[],_.slurred_ids={};for(let R=0;R<_.slurs.length;R++)_.slurred_ids[_.slurs[R].left]=!0,_.slurred_ids[_.slurs[R].right]=!0;for(let R=0;R<_.measures.length;R++){let a=_.measures[R];for(let l=0;l<a.staves.length;l++){let r=a.staves[l];r.flags={need_keysig:null,need_timesig:!1,need_clef:!1,need_cue:!1,need_lyric:!1},an(_,R,l)}dt(a)}return fn(_.measures),Fn(_),_}function Nn(e){let _=0,n=0,t=0,R=0,a=e.length;for(let i of e)_+=i.x,n+=i.y,t+=i.x**2,R+=i.x*i.y;let l=a*t-_**2;l==0&&(l=1e-4);let r=(a*R-_*n)/l,s=(n-r*_)/a;return[r,s]}function Wt(e,_,n,t){return e<t&&n<_}function Qe(e,_,n,t,R,a){a||(a=(r,s)=>!1),e.intervals[n]||(e.intervals[n]=[]);let l=e.intervals[n];for(let r=0;r<99;r++){let s=!0;for(let i=0;i<l.length;i++)if(l[i].x==r&&Wt(l[i].top,l[i].bottom,t,R)&&!(l[i].top==t&&l[i].bottom==R&&a(_,i))){s=!1;break}if(s){l.push({top:t,bottom:R,x:r,idx:_});return}}}function Xt(e){let _=0;for(let n=0;n<e.intervals.length;n++)if(!!e.intervals[n])for(let t=0;t<e.intervals[n].length;t++)_=Math.max(e.intervals[n][t].x+1,_);return _}function un(e){let _=new Array(Math.max(1,e.duration)).fill(null).map(n=>({mid_note:0,left_grace:0,left_squiggle:0,left_deco:0,right_deco:0,left_note:0,right_note:0,right_spacing:0,acc_pack:{intervals:new Array(e.staves.length).fill(null).map(t=>[])},mid_pack:{intervals:new Array(e.staves.length).fill(null).map(t=>[])}}));for(let n=0;n<e.staves.length;n++){let a=function(l,r){return t[l].duration<J.HALF&&t[r].duration<J.HALF||J.HALF<=t[l].duration&&t[l].duration<J.WHOLE&&J.HALF<=t[r].duration&&t[r].duration<J.WHOLE},t=e.staves[n].notes,R=e.staves[n].rests;for(let l=0;l<t.length;l++){let r=_[t[l].begin];if(t[l].stem_dir<0?t[l].twisted?r.right_note=1:(r.mid_note=1,Qe(r.mid_pack,l,n,t[l].staff_pos-1,t[l].staff_pos+1,N.HEADBUTT_MERGE&&a)):t[l].twisted?r.left_note=1:(r.mid_note=1,Qe(r.mid_pack,l,n,t[l].staff_pos-1,t[l].staff_pos+1,N.HEADBUTT_MERGE&&a)),t[l].modifier&&(r.right_deco=Math.max(1,r.right_deco)),t.length>1){let s=N.DURATION_BASED_SPACING*t[l].duration;r.right_spacing?r.right_spacing=Math.min(s,r.right_spacing):r.right_spacing=s}t[l].flag_count&&!t[l].beamed&&t[l].stem_dir<0&&!t[l].twisted&&(r.right_deco=Math.max(1,r.right_deco)),t[l].articulation==G.ARPEGGIATED&&(r.left_squiggle=N.SQUIGGLE_WIDTH_MUL),t[l].accidental!==null&&Qe(r.acc_pack,l,n,t[l].staff_pos-3,t[l].staff_pos+2)}for(let l=0;l<R.length;l++){let r=_[R[l].begin];r.mid_note=Math.max(r.mid_note,N.REST_WIDTH_MUL)}for(let l=0;l<e.staves[n].grace.length;l++)if(e.staves[n].grace[l]){let r=_[l],s=[0,0,0];w(e.staves[n].grace[l],e.staves[n].grace[l].duration,s),r.left_grace=s[0]*N.GRACE_WIDTH_MUL+s[1]*e.staves[n].grace[l].pad.inter/N.NOTE_WIDTH}t.length||(_[0].mid_note=Math.max(_[0].mid_note,N.REST_WIDTH_MUL))}for(let n=0;n<_.length;n++)_[n].left_deco=Xt(_[n].acc_pack)*N.ACCIDENTAL_WIDTH_MUL;for(let n=0;n<_.length;n++)_[n].mid_note=Math.max(_[n].mid_note,Xt(_[n].mid_pack)*1);for(let n=0;n<e.staves.length;n++){let t=e.staves[n].notes;for(let R=0;R<t.length;R++)if(t[R].lyric){let a=_[t[R].begin],l=k(t[R].lyric)/N.NOTE_WIDTH*N.LYRIC_SCALE;a.mid_note+a.right_note+a.right_deco+a.right_spacing<l&&(a.right_spacing=l-a.mid_note-a.right_note-a.right_deco)}}e.slots=_}function w(e,_,n){let t=e.slots,R=0,a=e.pad.left,l=0;if(e.staves.some(r=>r.flags.need_clef)&&(a+=N.CLEF_WIDTH_MUL*N.NOTE_WIDTH,l++,a+=e.pad.inter),e.staves.some(r=>r.flags.need_timesig)&&(a+=N.TIMESIG_WIDTH_MUL*N.NOTE_WIDTH,l++,a+=e.pad.inter),e.staves.some(r=>r.flags.need_keysig)){let r=0;for(let s=0;s<e.staves.length;s++)r=Math.max(r,e.staves[s].key_signature[1]);a+=r*N.KEYSIG_WIDTH_MUL*N.NOTE_WIDTH,l++,a+=e.pad.inter}for(let r=0;r<_;r++){t[r].left_grace&&(a+=e.pad.inter*2,R+=t[r].left_grace,l+=2);let s=t[r].left_note+t[r].right_note+t[r].mid_note+t[r].left_deco+t[r].right_deco+t[r].right_spacing+t[r].left_squiggle;R+=s,s&&(a+=e.pad.inter,l++)}return t[_]?(t[_].left_grace&&(a+=e.pad.inter*2,R+=t[_].left_grace,l+=2),R+=t[_].left_note+t[_].left_deco+t[_].left_squiggle):_>=t.length?(a+=e.pad.right-e.pad.inter,l--):_<0&&(a-=e.pad.left),n&&(n[0]=R,n[1]=l,n[2]=a),R*N.NOTE_WIDTH+a}function A(e){return e*N.LINE_HEIGHT/2}function On(e,_){let n=0,t=(N.LINES_PER_STAFF-1)*2;for(let f=0;f<e.notes.length;f++){let M=e.notes[f],o=M.staff_pos,m=o;M.stem_dir<0?o-=M.stem_len*2:m+=M.stem_len*2,M.tuplet&&(M.stem_dir<0?o-=3:m+=3),M.articulation_pos&&(o=Math.min(o,M.articulation_pos[1]-2),m=Math.max(m,M.articulation_pos[1]+2)),M.id&&_[M.id]&&(o-=2,m+=2),o-=1,m+=1,n=Math.min(n,o),t=Math.max(t,m)}for(let f=0;f<e.rests.length;f++){let M=e.rests[f];n=Math.min(n,M.staff_pos-2),t=Math.max(t,M.staff_pos+2)}let R=A(n),a=A(t),{need_cue:l,need_lyric:r}=e.flags,s=l?N.CUE_HEIGHT:0,i=r?z*N.LYRIC_SCALE+N.LYRIC_SPACING*2:0;return[R,a+s+i]}function Ve(e,_){return Math.max(0,~~(4-Math.log2(_?e/sn:e)))}function Mn(e){let _=be(e.notes),n=e.notes,t=e.rests;function R(a){let l;if(e.voices<=1)l=4;else if(e.voices==2){let r=(a.voice+1)%e.voices;if(r<a.voice){l=_[a.voice]+4;for(let s=0;s<n.length;s++)n[s].voice==r&&n[s].begin==a.begin&&(l=Math.max(l,5+n[s].staff_pos));l=~~(l/2)*2}else{l=_[a.voice]-4;for(let s=0;s<n.length;s++)n[s].voice==r&&n[s].begin==a.begin&&(l=Math.min(l,-5+n[s].staff_pos));l=~~(l/2)*2}}else l=_[a.voice];return l}for(let a=0;a<t.length;a++)t[a].staff_pos=R(t[a])}function It(e,_,n=!1){let t=e.staves[_],R=t.notes,a=t.rests,l=[],r=e.slots,s=new Array(e.duration).fill(null).map(O=>new Set);function i(O,T){if(T<0)for(let c=Math.floor((T+1)/2)*2;c<0;c+=2)s[O].add(c);else if(T>9)for(let c=10;c<~~(T/2)*2+1;c+=2)s[O].add(c)}function f(){for(let O=0;O<s.length;O++){let T=r[O],c=w(e,O);for(let I of s[O])l.push({tag:"line",type:"ledger",x:c-T.left_note*N.NOTE_WIDTH-N.LEDGER_WIDTH_MUL/2*N.NOTE_WIDTH,y:A(I),w:N.NOTE_WIDTH*(N.LEDGER_WIDTH_MUL+T.left_note+T.mid_note+T.right_note),h:0})}}function M(O,T){let c=r[O.begin],I=T+N.NOTE_WIDTH*(Number(O.stem_dir<0)*c.mid_note);return O.stem_dir<0?O.twisted?I+=N.NOTE_WIDTH/2:I-=N.NOTE_WIDTH/2:O.twisted?I-=N.NOTE_WIDTH/2:I+=N.NOTE_WIDTH/2,I}function u(O,T,c){let I=r[O.begin],X=O,d=O,P=T+N.NOTE_WIDTH*(I.mid_note+I.right_note+.5);for(T+=O.slot_shift,P+=O.modifier_shift;X.prev_in_chord!=null;)X=R[X.prev_in_chord];for(;d.next_in_chord!=null;)d=R[d.next_in_chord];if(O.id){let p=T+N.NOTE_WIDTH*(Number(O.stem_dir<0)*I.mid_note),g={note:O,staff_idx:_,measure:e,row:null,col:null,chord_head_x:M(X,T),chord_head_y:A(X.staff_pos),head_x:M(O,T),tail_x:p,head_y:A(O.staff_pos),tail_y:null},b=O;for(;b.next_in_chord!==null;)b=t.notes[b.next_in_chord];let Y=A(b.staff_pos);Y+=b.stem_len*b.stem_dir*N.LINE_HEIGHT,g.tail_y=Y,g.chord_head_x+=t.coords.x,g.chord_head_y+=t.coords.y,g.head_x+=t.coords.x,g.head_y+=t.coords.y,g.tail_x+=t.coords.x,g.tail_y+=t.coords.y,g.row=t.coords.row,g.col=t.coords.col,Ne[O.id]=g}if(O.modifier&&l.push({tag:"dot",type:"modifier",x:P,y:A(c%2?c:c+(O.voice%2?1:-1)),w:0,h:0}),O.articulation)if(O.articulation!=G.ARPEGGIATED){let[p,g]=O.articulation_pos,b=p?T+N.NOTE_WIDTH*(Number(O.stem_dir<0)*I.mid_note):M(O,T),Y=A(g);l.push({tag:"articulation",type:O.articulation,dir:(p?-1:1)*O.stem_dir,x:b,y:Y,w:N.NOTE_WIDTH,h:N.LINE_HEIGHT})}else{let p=X.staff_pos,g=d.staff_pos,b=A(p-O.stem_dir),Y=Math.round(g+O.stem_dir),x=A(Y),D=Math.min(b,x),$=Math.max(b,x);l.push({tag:"squiggle",type:"arpeggiated_chord",x:T-(I.left_deco+I.left_note+I.left_squiggle/2)*N.NOTE_WIDTH,y:D,w:0,h:$-D})}if(l.push({tag:"note_head",x:T+N.NOTE_WIDTH*(Number(O.stem_dir<0)*I.mid_note),y:A(c),w:N.NOTE_WIDTH,h:N.LINE_HEIGHT,twisted:O.twisted,stem_dir:O.stem_dir,duration:O.duration}),!O.beamed&&O.stem_len!=0&&O.duration<J.WHOLE){let p=O.stem_len*O.stem_dir,g=0,b=p,Y=g-b;l.push({tag:"line",type:"note_stem",x:T+N.NOTE_WIDTH*(Number(O.stem_dir<0)*I.mid_note),y:A(c+b*2),w:0,h:N.LINE_HEIGHT*Y})}if(!O.beamed&&O.flag_count){let p=O.flag_count;for(let g=0;g<p;g++){let b=(O.stem_len-g*N.FLAG_SPACING)*O.stem_dir*2;l.push({tag:"flag",x:T+N.NOTE_WIDTH*(Number(O.stem_dir<0)*I.mid_note),y:A(c+b),w:N.NOTE_WIDTH,h:N.LINE_HEIGHT,stem_dir:O.stem_dir,is_last:g==p-1})}}}function o(O,T,c){l.push({tag:"accidental",type:O,x:T,y:A(c),w:N.NOTE_WIDTH,h:N.LINE_HEIGHT})}function m(O,T){let c=O.duration;O.tuplet&&(c=O.tuplet.display_duration);let I=O.staff_pos;if(c==J.WHOLE){let d=r[O.begin],P=I-2;l.push({tag:"line",type:"ledger",x:T-d.left_note*N.NOTE_WIDTH-.5*N.NOTE_WIDTH,y:A(P),w:N.NOTE_WIDTH*(1+d.left_note+d.mid_note+d.right_note),h:0})}else if(c==J.HALF){let d=r[O.begin],P=I;l.push({tag:"line",type:"ledger",x:T-d.left_note*N.NOTE_WIDTH-.5*N.NOTE_WIDTH,y:A(P),w:N.NOTE_WIDTH*(1+d.left_note+d.mid_note+d.right_note),h:0})}let X=A(I);l.push({tag:"rest",x:T+N.NOTE_WIDTH/2,y:X,w:N.NOTE_WIDTH,h:N.LINE_HEIGHT*(N.LINES_PER_STAFF-1),duration:c})}function F(O){if(!O.length)return;let T=~~(J.WHOLE/t.time_signature[1]),c=O[0].stem_dir,I=[];for(let b=0;b<O.length;b++)I.push(O[b].flag_count);let X=O.map(b=>{let Y=b.stem_len;return{x:w(e,b.begin)+N.NOTE_WIDTH*(Number(b.stem_dir<0)*r[b.begin].mid_note)+b.slot_shift,y:A(2*c*Y+b.staff_pos)}}),d=O.map(b=>b.flag_count),P=new Array(X.length*2-2).fill(0);for(let b=0;b<X.length;b++){let Y=I[b],x=d[b-1],D=d[b+1];if(b==0)P[b*2]=Y;else if(b==X.length-1)P[b*2-1]=Y;else{Math.abs(d[b]-x)<=Math.abs(d[b]-D)?P[b*2-1]=Y:P[b*2]=Y;let $=~~(O[b-1].begin/T)==~~(O[b].begin/T),j=~~(O[b].begin/T)==~~(O[b+1].begin/T);!$&&b!=1&&(P[b*2-1]=1),!j&&b!=X.length-2&&(P[b*2]=1)}}for(let b=0;b<P.length;b++)if(P[b]==0){let[Y,x]=[~~(b/2),~~(b/2)+1];P[b]=Math.min(d[Y],d[x])}let p=[[1,0,P.length]],g=-1;for(let b=2;b<=4;b++){for(let Y=0;Y<P.length;Y++)P[Y]>=b&&g<0&&(g=Y),P[Y]<b&&g>=0&&(p.push([b,g,Y]),g=-1);g>=0&&(p.push([b,g,P.length]),g=-1)}for(let b=0;b<p.length;b++){let[Y,x]=[p[b][1]/2,p[b][2]/2],[D,$]=[~~Y,~~x],[j,re]=[Y-D,x-$];j>0&&(j+=.2),re>0&&(re-=.2);let[Oe,me]=[Math.min(D+1,X.length-1),Math.min($+1,X.length-1)],oe=[X[D].x,X[D].y],He=[X[Oe].x,X[Oe].y],Ke=[X[$].x,X[$].y],xe=[X[me].x,X[me].y],Le=[oe[0]*(1-j)+He[0]*j,oe[1]*(1-j)+He[1]*j],ye=[Ke[0]*(1-re)+xe[0]*re,Ke[1]*(1-re)+xe[1]*re];l.push({tag:"beam",x:Le[0],y:Le[1]-(p[b][0]-1)*c*N.LINE_HEIGHT*N.FLAG_SPACING,w:ye[0]-Le[0],h:ye[1]-Le[1],stem_dir:c})}for(let b=0;b<P.length;b++){let[Y,x]=[~~(b/2),~~(b/2)+1],[D,$,j]=[X[Y].x,X[Y].y,X[Y].y],[re,Oe,me]=[X[x].x,X[x].y,X[x].y];if(b%2==0){let oe=$-O[Y].stem_len*O[Y].stem_dir*N.LINE_HEIGHT;l.push({tag:"line",type:"note_stem",x:D,y:j,w:0,h:oe-j})}else if(b==P.length-1){let oe=Oe-O[x].stem_len*O[x].stem_dir*N.LINE_HEIGHT;l.push({tag:"line",type:"note_stem",x:re,y:me,w:0,h:oe-me})}}}function h(){l.push({tag:"clef",type:t.clef,x:e.pad.inter+N.NOTE_WIDTH*N.CLEF_WIDTH_MUL/2,y:A(t.clef==q.TREBLE?6:2),w:N.CLEF_WIDTH_MUL*N.NOTE_WIDTH,h:N.LINE_HEIGHT*(N.LINES_PER_STAFF-1)})}function S(){let{accidental:O,count:T}=t.flags.need_keysig,c=!1;(O==~y.SHARP||O==~y.FLAT)&&(c=!0,O=~O);let I=Array.from(_e[O].slice(0,T)),X=O==y.SHARP?[6,6,6,6,5,6,5]:[5,6,5,6,5,6,5],d=e.pad.inter+Number(t.flags.need_clef)*(N.NOTE_WIDTH*N.CLEF_WIDTH_MUL+e.pad.inter);for(let P=0;P<I.length;P++){let p;t.clef==q.TREBLE?p=I[P]+"_"+X[P]:p=I[P]+"_"+(X[P]-2);let g=Me(p,t.clef);l.push({tag:"accidental",type:c?y.NATURAL:O,x:d+P*N.NOTE_WIDTH*N.KEYSIG_WIDTH_MUL+1,y:A(g),w:N.NOTE_WIDTH,h:N.LINE_HEIGHT})}}function U(){let O=e.pad.inter+Number(t.flags.need_clef)*(N.NOTE_WIDTH*N.CLEF_WIDTH_MUL+e.pad.inter);t.flags.need_keysig&&(O+=t.flags.need_keysig.count*N.NOTE_WIDTH*N.KEYSIG_WIDTH_MUL+e.pad.inter),O+=N.TIMESIG_WIDTH_MUL*N.NOTE_WIDTH/2;function T(I,X,d){l.push({tag:"timesig_digit",value:I,x:X,y:A(d),w:N.TIMESIG_WIDTH_MUL*N.NOTE_WIDTH,h:N.LINE_HEIGHT*(N.LINES_PER_STAFF-1)/2})}function c(I,X,d){let P=Array.from(I.toString()).map(Number),p=N.TIMESIG_WIDTH_MUL*N.NOTE_WIDTH*.5;for(let g=0;g<P.length;g++)T(P[g],X-P.length*p/2+g*p+p/2,d)}c(t.time_signature[0],O,2),c(t.time_signature[1],O,6)}function L(){let O={};function T(c,I){if(!c.tuplet)return;let X=O[c.tuplet.id];X||(X=O[c.tuplet.id]={label:c.tuplet.label,stem_dir:-1,xmin:Infinity,xmax:-Infinity,ymin:Infinity,ymax:-Infinity});let d=r[c.begin],P=w(e,c.begin);if(I){let g=A(c.staff_pos);X.xmin=Math.min(X.xmin,P),X.xmax=Math.max(X.xmax,P+d.mid_note*N.NOTE_WIDTH),X.ymin=Math.min(X.ymin,g-N.LINE_HEIGHT*2),X.ymax=Math.max(X.ymax,g+N.LINE_HEIGHT*2)}else{let p=c;X.stem_dir=p.stem_dir;let g=A(p.staff_pos),b=g+N.LINE_HEIGHT/2,Y=g+p.stem_len*p.stem_dir*N.LINE_HEIGHT+Math.max(0,p.flag_count-1)*N.FLAG_SPACING*p.stem_dir*N.LINE_HEIGHT;p.stem_dir<0?(X.xmin=Math.min(X.xmin,P-(d.left_note-.5)*N.NOTE_WIDTH),X.xmax=Math.max(X.xmax,P+d.mid_note*N.NOTE_WIDTH)):(X.xmin=Math.min(X.xmin,P),X.xmax=Math.max(X.xmax,P+(d.mid_note+d.right_note-.5)*N.NOTE_WIDTH)),X.ymin=Math.min(X.ymin,b,Y),X.ymax=Math.max(X.ymax,b,Y)}}for(let c=0;c<t.notes.length;c++)T(t.notes[c],!1);for(let c=0;c<t.rests.length;c++)T(t.rests[c],!0);for(let c in O){let{label:I,stem_dir:X,ymin:d,ymax:P,xmin:p,xmax:g}=O[c],b=X<0?d:P;l.push({tag:"tuplet_label",label:I,x:p,y:b+X*N.LINE_HEIGHT*N.TUPLET_LABEL_SPACING,w:g-p,h:X*N.LINE_HEIGHT/2})}}function W(O,T){let c;c=t.coords.local_y_max-N.LYRIC_SPACING-N.LYRIC_SCALE*z,l.push({tag:"lyric",text:O.lyric,x:T,y:c,w:k(O.lyric)*N.LYRIC_SCALE,h:z*N.LYRIC_SCALE})}function V(O,T){let c=r[O.begin],I;I=t.coords.local_y_max-(t.flags.need_lyric?N.LYRIC_SPACING*2+N.LYRIC_SCALE*z:0)-N.CUE_HEIGHT;let X=T;O.cue.position==0?X+=N.NOTE_WIDTH*c.mid_note/2:O.cue.position==-1?X-=N.NOTE_WIDTH*(c.left_note+c.left_deco+c.left_squiggle+c.left_grace)+e.pad.inter/2:O.cue.position==1&&(X+=N.NOTE_WIDTH*(c.mid_note+c.right_deco+c.right_note)+e.pad.inter/2),l.push({tag:"cue",text:O.cue.data,x:X,y:I-(N.CUE_TEXT_SIZE-N.CUE_HEIGHT)/2,w:N.NOTE_WIDTH,h:N.CUE_TEXT_SIZE})}if(N.DEBUG_BLOCKS&&function(){for(let T=0;T<r.length;T++){let c=w(e,T);l.push({tag:"dbg",color:["red","blue","green"][~~(Math.random()*3)],x:c,y:t.coords.local_y_min,w:r[T].mid_note*N.NOTE_WIDTH,h:t.coords.local_y_max-t.coords.local_y_min})}}(),!n){let O=w(e,e.duration);for(let T=0;T<N.LINES_PER_STAFF;T++)l.push({tag:"line",type:"staff_line",x:0,y:T*N.LINE_HEIGHT,w:O,h:0})}t.flags.need_clef&&h(),t.flags.need_keysig&&S(),t.flags.need_timesig&&U();for(let O=0;O<R.length;O++){let T=R[O],c=T.staff_pos,I=w(e,T.begin),X=r[T.begin];if(i(T.begin,c),u(T,I,c),T.lyric&&W(T,I),T.cue&&V(T,I),T.accidental!==null){let d=X.acc_pack.intervals[_].find(P=>P.idx==O).x;o(T.accidental,I-N.NOTE_WIDTH*X.left_note-N.NOTE_WIDTH*N.ACCIDENTAL_WIDTH_MUL*.6-N.NOTE_WIDTH*N.ACCIDENTAL_WIDTH_MUL*d*.8,c)}}let E=t.beams;for(let O of E){let T=[];for(let c=0;c<O.length;c++)T.push(R[O[c]]);!T.length||F(T)}for(let O=0;O<a.length;O++){let T=a[O],c=w(e,T.begin);m(T,c),T.cue&&V(T,c)}L(),f(),Ge(l,t.coords.x,t.coords.y);for(let O=0;O<t.grace.length;O++){if(!t.grace[O])continue;let T=N.NOTE_WIDTH;N.NOTE_WIDTH*=N.GRACE_WIDTH_MUL;let c=It(t.grace[O],0,!0);N.NOTE_WIDTH=T,c.forEach(I=>{I.mini=!0,l.push(I)})}return l}function Ge(e,_,n){for(let t=0;t<e.length;t++)e[t].x+=_,e[t].y+=n,e[t].x1&&(e[t].x1+=_),e[t].y1&&(e[t].y1+=n)}function Fn(e){let _=e.measures,n=[];for(let M=0;M<_.length;M++){let u=[0,0,0];w(_[M],_[M].duration,u),u[0]+=u[2]/N.NOTE_WIDTH,n.push(u)}let t=[{count:0,width:0,num_inter:0}];for(let M=0;M<_.length;M++){M||(_[M].is_first_col=!0,e.first_col_measure_indices.push(M));let u=t[t.length-1];if(u.width+n[M][0]<=(ie()-(t.length==1?e.indent:0))/N.NOTE_WIDTH)u.count++,u.width+=n[M][0],u.num_inter+=n[M][1];else{M&&(_[M-1].is_last_col=!0),_[M].is_first_col=!0,e.first_col_measure_indices.push(M);for(let m=0;m<_[M].staves.length;m++){_[M].staves[m].flags.need_clef=!0;let[F,h]=_[M].staves[m].key_signature;_[M].staves[m].flags.need_keysig={accidental:F,count:h}}let o=[0,0,0];w(_[M],_[M].duration,o),o[0]+=o[2]/N.NOTE_WIDTH,n[M]=o,u={count:1,width:n[M][0],num_inter:n[M][1]},t.push(u)}}let R=0,a=[],l=_.map(M=>M.staves.length).reduce((M,u)=>Math.max(M,u),0);for(let M=0;M<t.length;M++){for(let u=0;u<l;u++){let[o,m]=[!1,!1];for(let F=R;F<R+t[M].count;F++)!_[F].staves[u]||(o=o||_[F].staves[u].flags.need_cue,m=m||_[F].staves[u].flags.need_lyric);for(let F=R;F<R+t[M].count;F++)!_[F].staves[u]||(_[F].staves[u].flags.need_cue=o,_[F].staves[u].flags.need_lyric=m)}R+=t[M].count}R=0;for(let M=0;M<t.length;M++){let u=ie()-(M==0?e.indent:0)-t[M].width*N.NOTE_WIDTH,o=u/t[M].num_inter;for(let m=R;m<R+t[M].count;m++)_[m].pad.inter+=M==t.length-1&&u/ie()>1-N.JUSTIFY_ALIGN_MIN?0:o;R+=t[M].count}for(let M=0;M<_.length;M++){let u=_[M];for(let o=0;o<u.staves.length;o++)mn(u,o),Tn(u,o)}R=0;for(let M=0;M<t.length;M++){a[M]=[];for(let u=0;u<l;u++){let[o,m]=[0,0,0,0];for(let S=R;S<R+t[M].count;S++){if(!_[S].staves[u])continue;let[U,L]=On(_[S].staves[u],e.slurred_ids);o=Math.min(U,o),m=Math.max(L,m)}let F=o,h=m;a[M][u]=[F,h]}R+=t[M].count}let r=e.indent,s=-a[0][0][0],i=0,f=0;t[0]&&t[1]&&t[0].count==0&&(r=0,s=-a[1][0][0],i++);for(let M=0;M<_.length;M++){let u=0,o=_[M].staves,m=w(_[M],_[M].duration);for(let F=0;F<o.length;F++){let h=N.LINE_HEIGHT*(N.LINES_PER_STAFF-1)+N.INTER_STAFF_HEIGHT,S=a[i][F][1],U=r,L=s+u;F!=o.length-1&&(S-=a[i][F+1][0]),h=Math.max(h,S),F!=o.length-1?u+=h:u+=N.LINE_HEIGHT*(N.LINES_PER_STAFF-1),o[F].coords.x=U,o[F].coords.y=L,o[F].coords.row=i,o[F].coords.col=f,o[F].coords.w=m,o[F].coords.local_y_min=a[i][F][0],o[F].coords.local_y_max=a[i][F][1];for(let W=0;W<o[F].grace.length;W++){if(!o[F].grace[W])continue;let V=w(_[M],W),E=_[M].slots[W];V-=(E.left_note+E.left_deco+E.left_squiggle+E.left_grace)*N.NOTE_WIDTH+_[M].pad.inter,o[F].grace[W].staves[0].coords.x=U+V,o[F].grace[W].staves[0].coords.y=L,o[F].grace[W].staves[0].coords.row=i,o[F].grace[W].staves[0].coords.col=f,o[F].grace[W].staves[0].coords.w=w(o[F].grace[W],o[F].grace[W].duration)*N.GRACE_WIDTH_MUL,o[F].grace[W].staves[0].coords.local_y_min=a[i][F][0],o[F].grace[W].staves[0].coords.local_y_max=a[i][F][1]}}if(r+=m,f++,_[M].is_last_col||M==_.length-1){r=0;let F=a[i][a[i].length-1][1];F-=N.LINE_HEIGHT*(N.LINES_PER_STAFF-1),i++,f=0,a[i]&&(F-=a[i][0][0]),F=Math.max(F+30,N.INTER_ROW_HEIGHT),u+=F,s+=u}}}function Ln(e){var R;let _=e.measures,n=[],t=0;for(let a=0;a<_.length;a++){let l=_[a].staves;if(N.SHOW_MEASURE_NUMBER&&(l[0]&&_[a].duration>=l[0].time_signature[0]*(64/l[0].time_signature[1])||l[0]&&_[a+1]&&_[a+1].staves[0]&&_[a+1].staves[0].key_signature[0]==l[0].key_signature[0]&&_[a+1].staves[0].key_signature[1]==l[0].key_signature[1]&&_[a].duration+_[a+1].duration==l[0].time_signature[0]*(64/l[0].time_signature[1]))&&t++,_[a].is_first_col){let s=0;for(let i=0;i<e.instruments.length&&l[s];i++){let f=l[s].coords.y,M=l[s+e.instruments[i].names.length-1].coords.y+N.LINE_HEIGHT*(N.LINES_PER_STAFF-1);if(!i&&a&&N.SHOW_MEASURE_NUMBER){let u=t.toString(),o=k(u,v.DUPLEX,-2)*N.MEASURE_NUMBER_TEXT_SIZE/z;n.push({tag:"regular_text",type:"measure_number",text:u,x:l[0].coords.x-o/2,y:f-N.MEASURE_NUMBER_TEXT_SIZE-14,w:o,h:N.MEASURE_NUMBER_TEXT_SIZE})}if(!a&&e.indent)if(new Set(e.instruments[i].names).size==1){let u=k(e.instruments[i].names[0],v.DUPLEX,-2)*N.INSTRUMENT_TEXT_SIZE/z;n.push({tag:"regular_text",type:"instrument",text:e.instruments[i].names[0],x:l[0].coords.x-u-N.INSTRUMENT_PAD_RIGHT,y:(f+M)/2-N.INSTRUMENT_TEXT_SIZE/2,w:u,h:N.INSTRUMENT_TEXT_SIZE})}else for(let u=0;u<e.instruments[i].names.length;u++){let o=l[s+u].coords.y,m=l[s+u].coords.y+N.LINE_HEIGHT*(N.LINES_PER_STAFF-1),F=k(e.instruments[i].names[u],v.DUPLEX,-2)*N.INSTRUMENT_TEXT_SIZE/z;n.push({tag:"regular_text",type:"instrument",text:e.instruments[i].names[u],x:l[0].coords.x-F-N.INSTRUMENT_PAD_RIGHT,y:(o+m)/2-N.INSTRUMENT_TEXT_SIZE/2,w:F,h:N.INSTRUMENT_TEXT_SIZE})}e.instruments[i].bracket!=te.NONE&&n.push({tag:"bracket",type:e.instruments[i].bracket,x:l[0].coords.x,y:f,w:0,h:M-f}),s+=e.instruments[i].names.length}if(l.length>1&&n.push({tag:"line",type:"barline",x:l[0].coords.x,y:l[0].coords.y,w:0,h:l[l.length-1].coords.y+N.LINE_HEIGHT*(N.LINES_PER_STAFF-1)-l[0].coords.y}),N.JOIN_STAFF_LINES){let i=((R=e.first_col_measure_indices[l[0].coords.row+1])!=null?R:_.length)-1,f=_[i].staves[0].coords.x+_[i].staves[0].coords.w;for(let M=0;M<l.length;M++){let u=l[M].coords.y;for(let o=0;o<N.LINES_PER_STAFF;o++)n.push({tag:"line",type:"staff_line",x:l[0].coords.x,y:u+o*N.LINE_HEIGHT,w:f-l[0].coords.x,h:0})}}}for(let s=0;s<l.length;s++)It(_[a],s,N.JOIN_STAFF_LINES).forEach(f=>n.push(f));e.instruments.length||n.push({tag:"line",type:"barline",x:l[0].coords.x+l[0].coords.w,y:l[0].coords.y,w:0,h:l[l.length-1].coords.y+N.LINE_HEIGHT*(N.LINES_PER_STAFF-1)-l[0].coords.y});let r=0;for(let s=0;s<e.instruments.length;s++){for(let i=0;i<e.instruments[s].names.length;i++){let f=l[r+i].coords.y,M=l[r+i].coords.y+N.LINE_HEIGHT*(N.LINES_PER_STAFF-1),u=l[r+i+1]?l[r+i+1].coords.y:M;if((_[a].barline==K.SINGLE||_[a].barline==K.REPEAT_BEGIN)&&n.push({tag:"line",type:"barline",x:l[r+i].coords.x+l[r+i].coords.w,y:f,w:0,h:(e.instruments[s].connect_barlines[i]?u:M)-f}),_[a].barline==K.DOUBLE&&(n.push({tag:"line",type:"barline",x:l[r+i].coords.x+l[r+i].coords.w,y:f,w:0,h:(e.instruments[s].connect_barlines[i]?u:M)-f}),n.push({tag:"line",type:"barline",x:l[r+i].coords.x+l[r+i].coords.w-4,y:f,w:0,h:(e.instruments[s].connect_barlines[i]?u:M)-f})),_[a].barline==K.END||_[a].barline==K.REPEAT_END||_[a].barline==K.REPEAT_END_BEGIN){for(let o=0;o<4;o++)n.push({tag:"line",type:"barline",x:l[r+i].coords.x+l[r+i].coords.w-o,y:f,w:0,h:(e.instruments[s].connect_barlines[i]?u:M)-f});n.push({tag:"line",type:"barline",x:l[r+i].coords.x+l[r+i].coords.w-8,y:f,w:0,h:(e.instruments[s].connect_barlines[i]?u:M)-f}),_[a].barline!=K.END&&(n.push({tag:"dot",type:"barline_repeat",x:l[r+i].coords.x+l[r+i].coords.w-12,y:f+N.LINE_HEIGHT*1.5,w:0,h:0}),n.push({tag:"dot",type:"barline_repeat",x:l[r+i].coords.x+l[r+i].coords.w-12,y:f+N.LINE_HEIGHT*2.5,w:0,h:0}))}if(_[a].barline==K.REPEAT_BEGIN||_[a].barline==K.REPEAT_END_BEGIN){let o=_[a+1].staves[r+i].coords.x+w(_[a+1],-1),m=_[a+1].staves[r+i].coords.y,F=l[r+i].coords.x+l[r+i].coords.w,h=Math.abs(o-F)<.01;if(!h)for(let S=1;S<4;S++)n.push({tag:"line",type:"barline",x:o+S,y:m,w:0,h:(e.instruments[s].connect_barlines[i]?u:M)-f});n.push({tag:"line",type:"barline",x:o+8-3*Number(h),y:m,w:0,h:(e.instruments[s].connect_barlines[i]?u:M)-f}),n.push({tag:"dot",type:"barline_repeat",x:o+12-3*Number(h),y:m+N.LINE_HEIGHT*1.5,w:0,h:0}),n.push({tag:"dot",type:"barline_repeat",x:o+12-3*Number(h),y:m+N.LINE_HEIGHT*2.5,w:0,h:0})}}r+=e.instruments[s].names.length}}return n}function bn(e){let _=[],n=e.measures.filter(t=>t.is_first_col).map(t=>t.staves[0].coords.y);for(let t=0;t<e.slurs.length;t++){let L=function(d){if(!d.length)return null;let P=Infinity,p=-Infinity;for(let g=0;g<d.length;g++){let b=A(d[g].staff_pos),Y=b+d[g].stem_dir*d[g].stem_len*N.LINE_HEIGHT;d[g].accidental!=null&&(b-=N.LINE_HEIGHT,Y+=N.LINE_HEIGHT),P=Math.min(b,Y,P),p=Math.max(b,Y,p)}return[P,p]},W=function(){let d=e.first_col_measure_indices[r.row]+r.col,P=e.first_col_measure_indices[s.row]+s.col;if(d!=P)return null;let p=V(r),g=V(s),b=e.measures[d].staves[r.staff_idx].notes.filter(Y=>p<Y.begin&&Y.begin<g);return L(b)},V=function(d){let P=e.first_col_measure_indices[d.row]+d.col;if(e.measures[P]!=d.measure){for(let p=0;p<e.measures[P].staves[d.staff_idx].grace.length;p++)if(e.measures[P].staves[d.staff_idx].grace[p]==d.measure)return p}return d.note.begin},E=function(d,P){let p=e.first_col_measure_indices[d.row]+d.col,g=d.note.begin;if(e.measures[p]!=d.measure){for(let Y=0;Y<e.measures[p].staves[d.staff_idx].grace.length;Y++)if(e.measures[p].staves[d.staff_idx].grace[Y]==d.measure){g=Y;break}}let b=e.measures[p].staves[d.staff_idx].notes.filter(Y=>Math.sign(Y.begin-g)==P);return L(b)},O=function(d){let P=e.first_col_measure_indices[r.row]+r.col,p=e.first_col_measure_indices[s.row]+s.col;if(d==1?e.first_col_measure_indices[r.row+1]&&e.first_col_measure_indices[r.row+1]<p&&(p=e.first_col_measure_indices[r.row+1]):d==2&&e.first_col_measure_indices[s.row]&&e.first_col_measure_indices[s.row]>P&&(P=e.first_col_measure_indices[s.row]-1),P+1>=p)return null;let g=Infinity,b=-Infinity;for(let Y=P+1;Y<p;Y++){let[x,D]=L(e.measures[Y].staves[r.staff_idx].notes);x==null&&(x=0,D=N.LINE_HEIGHT*4),g=Math.min(g,x),b=Math.max(b,D)}return[g,b]},X=function(d){if(T=null,c=I=null,!l&&r.staff_idx==s.staff_idx){let P=e.first_col_measure_indices[r.row]+r.col,p=e.first_col_measure_indices[s.row]+s.col;if(P<=p){if(P==p){let g=W();g&&([c,I]=g)}else{let g;d==0?(g=[E(r,1),O(0),E(s,-1)],s.measure.staves[s.staff_idx].flags.need_clef&&g.push([N.LINE_HEIGHT,N.LINE_HEIGHT*(N.LINES_PER_STAFF-1)])):d==1?g=[E(r,1),O(1)]:d==2&&(g=[O(2),E(s,-1)]);for(let b=0;b<g.length;b++)g[b]!=null&&(c===null?[c,I]=g[b]:(c=Math.min(g[b][0],c),I=Math.max(g[b][1],I)))}if(c!==null){let g=f-r.measure.staves[r.staff_idx].coords.y,b=u-s.measure.staves[s.staff_idx].coords.y,Y,x;d==0?(Y=g,x=b):d==1?Y=x=g:d==2&&(Y=x=b),o==-1?T=(Math.max(Y,x)+(Y+x)/2)/2-c:T=I-(Math.min(Y,x)+(Y+x)/2)/2,T*=1.2,T=Math.max(T,0),T+=N.LINE_HEIGHT*2}}}},{left:R,right:a,is_tie:l}=e.slurs[t],r=Ne[R],s=Ne[a],i,f,M,u,o,m=r.note.articulation?4:7,F=r.note.articulation?2:5,h=s.note.articulation?4:7,S=s.note.articulation?2:5,U=e.measures[e.first_col_measure_indices[r.row]+r.col]!=r.measure;if(l)r.note.voice==0&&s.note.voice==0&&r.measure.staves[r.staff_idx].voices==1&&s.measure.staves[s.staff_idx].voices==1&&r.note.stem_dir==s.note.stem_dir?(r.note.next_in_chord==null&&r.note.prev_in_chord!=null&&s.note.next_in_chord==null&&s.note.prev_in_chord!=null?o=r.note.stem_dir:o=-r.note.stem_dir,[i,f]=[r.head_x,r.head_y+m*o],[M,u]=[s.head_x,s.head_y+h*o]):Math.max(r.note.voice,s.note.voice)%2?(o=1,[i,f]=[r.head_x,r.head_y+m],[M,u]=[s.head_x,s.head_y+h]):(o=-1,[i,f]=[r.head_x,r.head_y-m],[M,u]=[s.head_x,s.head_y-h]);else if(m=r.note.articulation?r.note.articulation==G.STACCATO?Math.abs(r.note.articulation_pos[1]*N.LINE_HEIGHT/2-(r.chord_head_y-r.measure.staves[r.staff_idx].coords.y))+5:4:7,h=s.note.articulation?s.note.articulation==G.STACCATO?Math.abs(s.note.articulation_pos[1]*N.LINE_HEIGHT/2-(s.chord_head_y-s.measure.staves[s.staff_idx].coords.y))+5:4:7,(r.measure.staves[r.staff_idx].voices>1||s.measure.staves[s.staff_idx].voices>1)&&r.note.stem_dir==s.note.stem_dir)r.note.stem_dir==1?(o=1,[i,f]=[r.tail_x,r.tail_y+F],[M,u]=[s.tail_x,s.tail_y+S]):(o=-1,[i,f]=[r.tail_x,r.tail_y-F],[M,u]=[s.tail_x,s.tail_y-S]);else{let d=Math.abs(r.chord_head_y-s.tail_y)<Math.abs(r.tail_y-s.chord_head_y)+5,P=Math.abs(r.tail_y-s.tail_y)<Math.abs(r.chord_head_y-s.chord_head_y)-40;r.note.stem_dir<0&&s.note.stem_dir<0?P?(o=-1,[i,f]=[r.tail_x,r.tail_y-F],[M,u]=[s.tail_x,s.tail_y-S]):(o=1,[i,f]=[r.chord_head_x,r.chord_head_y+m],[M,u]=[s.chord_head_x,s.chord_head_y+h]):r.note.stem_dir<0&&s.note.stem_dir>0?d?(o=1,[i,f]=[r.chord_head_x,r.chord_head_y+m],[M,u]=[s.tail_x,s.tail_y+S]):(o=-1,[i,f]=[r.tail_x,r.tail_y-F],[M,u]=[s.chord_head_x,s.chord_head_y-h]):r.note.stem_dir>0&&s.note.stem_dir>0?P?(o=1,[i,f]=[r.tail_x,r.tail_y+F],[M,u]=[s.tail_x,s.tail_y+S]):(o=-1,[i,f]=[r.chord_head_x,r.chord_head_y-m],[M,u]=[s.chord_head_x,s.chord_head_y-h]):d?(o=-1,[i,f]=[r.chord_head_x,r.chord_head_y-m],[M,u]=[s.tail_x,s.tail_y-S]):(o=1,[i,f]=[r.tail_x,r.tail_y+F],[M,u]=[s.chord_head_x,s.chord_head_y+h])}l?(i+=3,M-=3):(i+=2,M-=2);let T=null,c=null,I=null;if(r.row==s.row){X(0);let d=Math.min(N.LINE_HEIGHT*(r.measure==s.measure?4.5:6.5),Math.max(N.LINE_HEIGHT*1.5,T!=null?0:Math.abs(M-i)*.05,T!=null?0:Math.abs(u-f)*.5,T==null?0:T));l&&(d*=.6),_.push({tag:"slur",x:i,y:f,w:M-i,h:d*N.SLUR_ARC_MUL,y1:u,dir:o,adjacent:T==null})}else{let p=function(b){let Y=e.first_col_measure_indices[b],x=e.measures[Y].slots[0],D=w(e.measures[Y],-1);return Math.max(D,0)};X(1);let d=Math.min(N.LINE_HEIGHT*6.5,Math.max(N.LINE_HEIGHT*1.5,T!=null?0:Math.abs(ie()-i)*.16,T==null?0:T));l&&(d*=.6);let P=f+o*d/4;c!=null&&(P=P*.5+(r.measure.staves[r.staff_idx].coords.y+(o<0?c-N.LINE_HEIGHT/2:I+N.LINE_HEIGHT/2))*.5),_.push({tag:"slur",x:i,y:f,w:ie()-i,h:d*N.SLUR_ARC_MUL,y1:P,dir:o});for(let b=r.row+1;b<s.row;b++){let Y=Math.min(N.LINE_HEIGHT*7,Math.max(N.LINE_HEIGHT*1.5,ie()*.16)),x=p(b),D=e.measures.slice(e.first_col_measure_indices[b],e.first_col_measure_indices[b+1]||Infinity).map(j=>j.staves[r.staff_idx]).map(j=>j.notes).flat(),$=L(D);_.push({tag:"slur",x,y:n[b]+(o<0?$[0]:$[1]),w:ie()-x,h:Y*N.SLUR_ARC_MUL*3/4,y1:n[b]+(o<0?$[0]:$[1]),dir:o})}let g=p(s.row);X(2),d=Math.min(N.LINE_HEIGHT*6.5,Math.max(N.LINE_HEIGHT*1.5,T!=null?0:M*.16,T==null?0:T)),P=u+o*d/4,c!=null&&(P=P*.5+(s.measure.staves[s.staff_idx].coords.y+(o<0?c-N.LINE_HEIGHT/2:I+N.LINE_HEIGHT/2))*.5),_.push({tag:"slur",x:g,y:P,w:M-g,h:d*N.SLUR_ARC_MUL,y1:u,dir:o})}}return _}function hn(e){let _=[];for(let n=0;n<e.crescs.length;n++){let{left:t,right:R,val_left:a,val_right:l}=e.crescs[n],r=Ne[t],s=Ne[R],i=r.head_x+3,f=s.head_x-3,M=r.measure.staves[r.staff_idx],u=s.measure.staves[s.staff_idx],o=N.CUE_TEXT_SIZE,m=M.coords.y+M.coords.local_y_max-(M.flags.need_lyric?2*N.LYRIC_SPACING+N.LYRIC_SCALE*z:0)-N.CUE_HEIGHT/2,F=u.coords.y+u.coords.local_y_max-(u.flags.need_lyric?2*N.LYRIC_SPACING+N.LYRIC_SCALE*z:0)-N.CUE_HEIGHT/2;if(r.row==s.row){let h=m-o/2*a,S=m+o/2*a,U=F-o/2*l,L=F+o/2*l;_.push({tag:"cresc",x:i,y:h,w:f-i,h:U-h,x1:i,y1:S,w1:f-i,h1:L-S})}else{let h=ie()-i,S=[0,h];for(let U=r.row+1;U<s.row;U++)S.push(h+=ie());S.push(h+=f);for(let U=0;U<s.row-r.row+1;U++){let L=U==0,W=U==s.row-r.row,V=S[U]/h,E=S[U+1]/h,O=L?i:0,T=W?f:ie(),c;if(L)c=m;else if(W)c=F;else for(let b=0;b<e.measures.length;b++)if(e.measures[b].staves[r.staff_idx].coords.row==r.row+U){let Y=e.measures[b].staves[r.staff_idx];c=Y.coords.y+Y.coords.local_y_max-(Y.flags.need_lyric?2*N.LYRIC_SPACING+N.LYRIC_SCALE*z:0)-N.CUE_HEIGHT/2;break}let I=a*(1-V)+l*V,X=a*(1-E)+l*E,d=c-o/2*I,P=c+o/2*I,p=c-o/2*X,g=c+o/2*X;_.push({tag:"line",type:"cresc_top",x:O,y:d,w:T-O,h:p-d}),_.push({tag:"line",type:"cresc_bottom",x:O,y:P,w:T-O,h:g-P})}}}return _}function Sn(e){let _=[],n=0;if(e.duration!=null&&e.bpm!=null){if(e.duration<J.WHOLE){let a=Ve(e.duration,e.modifier);_.push({tag:"note_head",x:N.NOTE_WIDTH,y:N.TEMPO_COMPOSER_TEXT_SIZE,w:N.NOTE_WIDTH,h:N.LINE_HEIGHT,twisted:!1,stem_dir:-1,duration:e.duration}),n+=N.NOTE_WIDTH;let l=(a+1)*N.FLAG_SPACING*N.LINE_HEIGHT;_.push({tag:"line",type:"note_stem",x:N.NOTE_WIDTH,y:-l,w:0,h:N.TEMPO_COMPOSER_TEXT_SIZE+l}),e.modifier&&_.push({tag:"dot",type:"modifier",x:N.NOTE_WIDTH*1.5,y:N.TEMPO_COMPOSER_TEXT_SIZE,w:0,h:0}),(e.modifier||a)&&(n+=N.NOTE_WIDTH);for(let r=0;r<a;r++)_.push({tag:"flag",x:N.NOTE_WIDTH,y:-l+r*N.FLAG_SPACING*N.LINE_HEIGHT,w:N.NOTE_WIDTH,h:N.LINE_HEIGHT,stem_dir:-1,is_last:r==a-1})}else _.push({tag:"note_head",x:N.NOTE_WIDTH,y:N.TEMPO_COMPOSER_TEXT_SIZE/2,w:N.NOTE_WIDTH,h:N.LINE_HEIGHT,twisted:!1,stem_dir:-1,duration:e.duration}),n+=N.NOTE_WIDTH;let t=" = "+e.bpm,R=k(t,v.DUPLEX,-2)*N.TEMPO_COMPOSER_TEXT_SIZE/z;_.push({tag:"regular_text",type:"tempo",text:t,x:n,y:0,w:R,h:N.TEMPO_COMPOSER_TEXT_SIZE}),n+=R+N.TEMPO_COMPOSER_TEXT_SIZE}if(e.text!=null){let t=k(e.text,v.TRIPLEX,-2)*N.TEMPO_COMPOSER_TEXT_SIZE/z;_.push({tag:"bold_text",type:"tempo",text:e.text,x:n,y:0,w:t,h:N.TEMPO_COMPOSER_TEXT_SIZE})}return _}function dn(e){let _=N.PAGE_MARGIN_Y;for(let n=0;n<e.title.length;n++)_+=(n?N.SUBTITLE_TEXT_SIZE:N.TITLE_TEXT_SIZE)+N.TITLE_LINE_SPACING;if(e.tempo||e.composer.length){if(_+=N.TITLE_LINE_SPACING,e.composer.length){let n=N.TEMPO_COMPOSER_TEXT_SIZE;for(let t=0;t<e.composer.length;t++)_+=N.TEMPO_COMPOSER_TEXT_SIZE+4;_-=N.TEMPO_COMPOSER_TEXT_SIZE+4}_+=N.TEMPO_COMPOSER_TEXT_SIZE}return _+=N.TITLE_LINE_SPACING*2,_}function Wn(e){Ne={};let _=Ln(e);_.push(...bn(e)),_.push(...hn(e));let n=e.measures[e.measures.length-1].staves[e.measures[e.measures.length-1].staves.length-1],t=n.coords.y+Math.max(n.coords.local_y_max,N.LINE_HEIGHT*(N.LINES_PER_STAFF-1)+N.INTER_ROW_HEIGHT),R=[],a=N.PAGE_MARGIN_Y;for(let l=0;l<e.title.length;l++){let r=l?N.SUBTITLE_TEXT_SIZE:N.TITLE_TEXT_SIZE,s=k(e.title[l],l?v.DUPLEX:v.TRIPLEX,-2)*r/z;R.push(ue(ue({},l?{tag:"regular_text",type:"subtitle"}:{tag:"bold_text",type:"title"}),{text:e.title[l],x:N.PAGE_WIDTH/2-s/2,y:a,w:s,h:r})),a+=r+N.TITLE_LINE_SPACING}if(e.tempo||e.composer.length){if(a+=N.TITLE_LINE_SPACING,e.composer.length){let l=N.TEMPO_COMPOSER_TEXT_SIZE;for(let r=0;r<e.composer.length;r++){let s=k(e.composer[r],v.DUPLEX,-2)*l/z;R.push({tag:"regular_text",type:"composer",text:e.composer[r],x:N.PAGE_WIDTH-N.PAGE_MARGIN_X-s,y:a,w:s,h:l}),a+=N.TEMPO_COMPOSER_TEXT_SIZE+4}a-=N.TEMPO_COMPOSER_TEXT_SIZE+4}if(e.tempo){let l=Sn(e.tempo);Ge(l,N.PAGE_MARGIN_X+e.indent,a),l.forEach(r=>R.push(r))}a+=N.TEMPO_COMPOSER_TEXT_SIZE}return a+=N.TITLE_LINE_SPACING*2,Ge(_,N.PAGE_MARGIN_X,a),_.forEach(l=>R.push(l)),[R,t+N.PAGE_MARGIN_Y+a]}function Xn(e,{compute_polylines:_=!0}={}){let[n,t]=Wn(e),R={w:N.PAGE_WIDTH,h:t,elements:n,polylines:null};return N.SLUR_EVADE&&rt(n),N.CUE_EVADE&&Rt(n),_&&(R.polylines=st(n,R.w,R.h)),R}function Pt(e,_){let n=Math.max(0,_),t=0,R;for(R=0;R<e.measures.length&&!(n<t+e.measures[R].duration);R++)t+=e.measures[R].duration;if(R>=e.measures.length)return Pt(e,t-.01);let a=e.measures[R],l=n-t,r=~~l,s=l-r,i=w(a,r),f;a.slots[r+1]?f=w(a,r+1):e.measures[R+1]&&!e.measures[R+1].is_first_col?f=a.staves[0].coords.w+w(e.measures[R+1],0):f=a.staves[0].coords.w;let M=i*(1-s)+f*s,u=a.staves[0].coords.x+M+N.PAGE_MARGIN_X,o=dn(e),m=o+a.staves[0].coords.y,F=o+a.staves[a.staves.length-1].coords.y+N.LINE_HEIGHT*(N.LINES_PER_STAFF-1);return[u,m,u,F]}return rn;})();
;(typeof module == 'object')?(module.exports=legumes):0;
